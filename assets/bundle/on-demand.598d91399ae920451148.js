(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[565],{41524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var o=n(29943),l=n(91757);const s=(0,l.createAction)("@onDemand/SET_SELECTED_CATEGORY",(({selectedCategoryID:e})=>({selectedCategoryID:e})))(),r=(0,n(18172).ZP)(((e,{payload:t})=>{e.selectedCategoryID=t.selectedCategoryID})),a=(0,l.createReducer)({selectedCategoryID:null}).handleAction(s,r);var d=n(24970),c=n(77493),i=n(54226);function y(e){var t;return null===(t=function(e){var t;return null===(t=e.application)||void 0===t?void 0:t.categoryListScrollEvent}(e))||void 0===t?void 0:t.scrollTriggeredByCategoryChange}function*g({payload:{event:e,mainCategoryID:t,contentListRef:n,indexInList:o}}){const l=yield(0,d.Ys)(y);var r;l&&e===i.SK.scrollByCategoryChange?(yield(0,d.gz)(s({selectedCategoryID:t})),null==n||null===(r=n.current)||void 0===r||r.scrollToItem(o,"start")):l||e!==i.SK.scrollByUI||(yield(0,d.gz)(s({selectedCategoryID:t})))}function*u(){yield(0,d.ib)((0,l.getType)(c.C),g)}var f=n(80705),D=n(88980),I=n(89537),C=n(73400),p=n(41655),m=n(64687),v=n(51612),_=n(34195);const L=(0,m.gV)("/app/src/modules/onDemand/sagas/listItemsInView.ts");function*E({payload:{startIndex:e,stopIndex:t}}){(yield(0,d.Ys)(I.K))&&(yield(0,d.qn)((0,l.getType)(f.C.success)));const n=yield(0,d.Ys)((n=>((e,{startIndex:t,stopIndex:n})=>(0,p.F)(e).slice(t,n+1).filter((({type:e})=>e===C.uZ.Category)).map((({id:e})=>e)))(n,{startIndex:e,stopIndex:t})));L.log("vod categories to get items",n);for(const e of n)(yield(0,d.Ys)((t=>(0,D.N)(t,{categoryID:e}))))||(yield(0,d.gz)(v.mf.request({categoryID:e,offset:30,page:1})));yield(0,d.gz)((0,c.F)())}function*A(){yield(0,d.Fm)((0,l.getType)(_.L),E)}function*T(){yield(0,d.rM)(A),yield(0,d.rM)(u)}var x=n(67294),R=n(45881),S=n(84954);const B=()=>{(0,o.Z)([{id:"onDemand",reducerMap:{onDemand:a},sagas:[T]}]);const e=(0,x.useRef)(null),t=(0,x.useRef)(null),n=(0,x.useMemo)((()=>({categoryListRef:e,contentListRef:t})),[e,t]);return x.createElement(R.s.Provider,{value:n},x.createElement(S.A,null))},K=(0,x.memo)(B)}}]);