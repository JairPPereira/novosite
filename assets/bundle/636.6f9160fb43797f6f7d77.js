(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[636],{54758:(t,e,r)=>{"use strict";r.d(e,{_b:()=>l});var i=r(41788),n=r(80976),a=r(22122),s=r(63349),u=r(36722),o=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return(0,i.Z)(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(n.Z),c=String.fromCharCode(9),d=function(t){var e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),r={};return e[1]&&(r.length=parseInt(e[1],10)),e[2]&&(r.offset=parseInt(e[2],10)),r},f=function(t){for(var e,r=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},n=r.length;n--;)""!==r[n]&&((e=/([^=]*)=(.*)/.exec(r[n]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),i[e[0]]=e[1]);return i},g=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}(0,i.Z)(e,t);var r=e.prototype;return r.push=function(t){var e,r,i=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,r){var i=r(t);return i===t?e:e.concat([i])}),[t]).forEach((function(t){for(var n=0;n<i.customParsers.length;n++)if(i.customParsers[n].call(i,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return r={type:"tag",tagType:"inf"},e[1]&&(r.duration=parseFloat(e[1])),e[2]&&(r.title=e[2]),void i.trigger("data",r);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"targetduration"},e[1]&&(r.duration=parseInt(e[1],10)),void i.trigger("data",r);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"version"},e[1]&&(r.version=parseInt(e[1],10)),void i.trigger("data",r);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",tagType:"media-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void i.trigger("data",r);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void i.trigger("data",r);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return r={type:"tag",tagType:"playlist-type"},e[1]&&(r.playlistType=e[1]),void i.trigger("data",r);if(e=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t))return r=(0,a.Z)(d(e[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",r);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return r={type:"tag",tagType:"allow-cache"},e[1]&&(r.allowed=!/NO/.test(e[1])),void i.trigger("data",r);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(r={type:"tag",tagType:"map"},e[1]){var s=f(e[1]);s.URI&&(r.uri=s.URI),s.BYTERANGE&&(r.byterange=d(s.BYTERANGE))}i.trigger("data",r)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(r={type:"tag",tagType:"stream-inf"},e[1]){if(r.attributes=f(e[1]),r.attributes.RESOLUTION){var u=r.attributes.RESOLUTION.split("x"),o={};u[0]&&(o.width=parseInt(u[0],10)),u[1]&&(o.height=parseInt(u[1],10)),r.attributes.RESOLUTION=o}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}i.trigger("data",r)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return r={type:"tag",tagType:"media"},e[1]&&(r.attributes=f(e[1])),void i.trigger("data",r);if(e=/^#EXT-X-ENDLIST/.exec(t))i.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return r={type:"tag",tagType:"program-date-time"},e[1]&&(r.dateTimeString=e[1],r.dateTimeObject=new Date(e[1])),void i.trigger("data",r);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return r={type:"tag",tagType:"key"},e[1]&&(r.attributes=f(e[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void i.trigger("data",r);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return r={type:"tag",tagType:"start"},e[1]&&(r.attributes=f(e[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void i.trigger("data",r);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return r={type:"tag",tagType:"cue-out-cont"},e[1]?r.data=e[1]:r.data="",void i.trigger("data",r);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return r={type:"tag",tagType:"cue-out"},e[1]?r.data=e[1]:r.data="",void i.trigger("data",r);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return r={type:"tag",tagType:"cue-in"},e[1]?r.data=e[1]:r.data="",void i.trigger("data",r);if((e=/^#EXT-X-SKIP:(.*)$/.exec(t))&&e[1])return(r={type:"tag",tagType:"skip"}).attributes=f(e[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(c)),void i.trigger("data",r);if((e=/^#EXT-X-PART:(.*)$/.exec(t))&&e[1])return(r={type:"tag",tagType:"part"}).attributes=f(e[1]),["DURATION"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/.test(r.attributes[t]))})),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=d(r.attributes.BYTERANGE)),void i.trigger("data",r);if((e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t))&&e[1])return(r={type:"tag",tagType:"server-control"}).attributes=f(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/.test(r.attributes[t]))})),void i.trigger("data",r);if((e=/^#EXT-X-PART-INF:(.*)$/.exec(t))&&e[1])return(r={type:"tag",tagType:"part-inf"}).attributes=f(e[1]),["PART-TARGET"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),void i.trigger("data",r);if((e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t))&&e[1])return(r={type:"tag",tagType:"preload-hint"}).attributes=f(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(r.attributes.hasOwnProperty(t)){r.attributes[t]=parseInt(r.attributes[t],10);var e="BYTERANGE-LENGTH"===t?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[e]=r.attributes[t],delete r.attributes[t]}})),void i.trigger("data",r);if((e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t))&&e[1])return(r={type:"tag",tagType:"rendition-report"}).attributes=f(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseInt(r.attributes[t],10))})),void i.trigger("data",r);i.trigger("data",{type:"tag",data:t.slice(4)})}}}else i.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},r.addParser=function(t){var e=this,r=t.expression,i=t.customType,n=t.dataParser,a=t.segment;"function"!=typeof n&&(n=function(t){return t}),this.customParsers.push((function(t){if(r.exec(t))return e.trigger("data",{type:"custom",data:n(t),customType:i,segment:a}),!0}))},r.addTagMapper=function(t){var e=t.expression,r=t.map;this.tagMappers.push((function(t){return e.test(t)?r(t):t}))},e}(n.Z),p=function(t){var e={};return Object.keys(t).forEach((function(r){var i;e[(i=r,i.toLowerCase().replace(/-(\w)/g,(function(t){return t[1].toUpperCase()})))]=t[r]})),e},m=function(t){var e=t.serverControl,r=t.targetDuration,i=t.partTargetDuration;if(e){var n="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",u=r&&3*r,o=i&&2*i;r&&!e.hasOwnProperty(a)&&(e[a]=u,this.trigger("info",{message:n+" defaulting HOLD-BACK to targetDuration * 3 ("+u+")."})),u&&e[a]<u&&(this.trigger("warn",{message:n+" clamping HOLD-BACK ("+e[a]+") to targetDuration * 3 ("+u+")"}),e[a]=u),i&&!e.hasOwnProperty(s)&&(e[s]=3*i,this.trigger("info",{message:n+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+e[s]+")."})),i&&e[s]<o&&(this.trigger("warn",{message:n+" clamping PART-HOLD-BACK ("+e[s]+") to partTargetDuration * 2 ("+o+")."}),e[s]=o)}},l=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new o,e.parseStream=new g,e.lineStream.pipe(e.parseStream);var r,i,n=(0,s.Z)(e),c=[],d={},f=!1,l=function(){},b={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var T=0,E=0;return e.on("end",(function(){d.uri||!d.parts&&!d.preloadHints||(!d.map&&r&&(d.map=r),!d.key&&i&&(d.key=i),d.timeline||"number"!=typeof h||(d.timeline=h),e.manifest.preloadSegment=d)})),e.parseStream.on("data",(function(t){var e,s;({tag:function(){({version:function(){t.version&&(this.manifest.version=t.version)},"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(d.byterange=e,e.length=t.length,"offset"in t||(t.offset=T)),"offset"in t&&(d.byterange=e,e.offset=t.offset),T=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(d.duration=t.duration),0===t.duration&&(d.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=c},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:(0,u.Z)(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(i.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,h=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){r={},t.uri&&(r.uri=t.uri),t.byterange&&(r.byterange=t.byterange),i&&(r.key=i)},"stream-inf":function(){this.manifest.playlists=c,this.manifest.mediaGroups=this.manifest.mediaGroups||b,t.attributes?(d.attributes||(d.attributes={}),(0,a.Z)(d.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||b,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var r=this.manifest.mediaGroups[t.attributes.TYPE];r[t.attributes["GROUP-ID"]]=r[t.attributes["GROUP-ID"]]||{},e=r[t.attributes["GROUP-ID"]],(s={default:/yes/i.test(t.attributes.DEFAULT)}).default?s.autoselect=!0:s.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(s.language=t.attributes.LANGUAGE),t.attributes.URI&&(s.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(s.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(s.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(s.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=s}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){h+=1,d.discontinuity=!0,this.manifest.discontinuityStarts.push(c.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),d.dateTimeString=t.dateTimeString,d.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,m.call(this,this.manifest))},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){d.cueOut=t.data},"cue-out-cont":function(){d.cueOutCont=t.data},"cue-in":function(){d.cueIn=t.data},skip:function(){this.manifest.skip=p(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part:function(){var e=this;f=!0;var r=this.manifest.segments.length,i=p(t.attributes);d.parts=d.parts||[],d.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=E),E=i.byterange.offset+i.byterange.length);var n=d.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+n+" for segment #"+r,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(t,r){t.hasOwnProperty("lastPart")||e.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+r+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var e=this.manifest.serverControl=p(t.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),m.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,r=p(t.attributes),i=r.type&&"PART"===r.type;d.preloadHints=d.preloadHints||[],d.preloadHints.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=i?E:0,i&&(E=r.byterange.offset+r.byterange.length)));var n=d.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e,t.attributes,["TYPE","URI"]),r.type)for(var a=0;a<d.preloadHints.length-1;a++){var s=d.preloadHints[a];s.type&&s.type===r.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e+" has the same TYPE "+r.type+" as preload hint #"+a})}},"rendition-report":function(){var e=p(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);var r=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];f&&i.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+r,t.attributes,i)},"part-inf":function(){this.manifest.partInf=p(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),m.call(this,this.manifest)}}[t.tagType]||l).call(n)},uri:function(){d.uri=t.uri,c.push(d),this.manifest.targetDuration&&!("duration"in d)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),d.duration=this.manifest.targetDuration),i&&(d.key=i),d.timeline=h,r&&(d.map=r),E=0,d={}},comment:function(){},custom:function(){t.segment?(d.custom=d.custom||{},d.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(n)})),e}(0,i.Z)(e,t);var r=e.prototype;return r.warnOnMissingAttributes_=function(t,e,r){var i=[];r.forEach((function(t){e.hasOwnProperty(t)||i.push(t)})),i.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+i.join(", ")})},r.push=function(t){this.lineStream.push(t)},r.end=function(){this.lineStream.push("\n"),this.trigger("end")},r.addParser=function(t){this.parseStream.addParser(t)},r.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(n.Z)},30845:(t,e,r)=>{"use strict";function i(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}r.d(e,{Z:()=>n});const n=function(t,e){var r;void 0===e&&(e=i);var n,a=[],s=!1;return function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return s&&r===this&&e(i,a)||(n=t.apply(this,i),s=!0,r=this,a=i),n}}},40973:(t,e,r)=>{"use strict";r.d(e,{jp:()=>h,mm:()=>T,Qc:()=>_,LG:()=>Y});var i=r(80779),n=r(58908),a=r.n(n),s=r(36722),u=r(3969),o=function(t){return!!t&&"object"==typeof t},c=function t(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.reduce((function(e,r){return"object"!=typeof r||Object.keys(r).forEach((function(i){Array.isArray(e[i])&&Array.isArray(r[i])?e[i]=e[i].concat(r[i]):o(e[i])&&o(r[i])?e[i]=t(e[i],r[i]):e[i]=r[i]})),e}),{})},d=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},f=function(t){if(!t.length)return[];for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e},g=function(t){var e=t.baseUrl,r=void 0===e?"":e,n=t.source,a=void 0===n?"":n,s=t.range,u=void 0===s?"":s,o=t.indexRange,c=void 0===o?"":o,d={uri:a,resolvedUri:(0,i.Z)(r||"",a)};if(u||c){var f=(u||c).split("-"),g=parseInt(f[0],10),p=parseInt(f[1],10);d.byterange={length:p-g+1,offset:g}}return d},p=function(t){return t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},m={static:function(t){var e=t.duration,r=t.timescale,i=void 0===r?1:r,n=t.sourceDuration,a=t.periodDuration,s=p(t.endNumber),u=e/i;return"number"==typeof s?{start:0,end:s}:"number"==typeof a?{start:0,end:a/u}:{start:0,end:n/u}},dynamic:function(t){var e=t.NOW,r=t.clientOffset,i=t.availabilityStartTime,n=t.timescale,a=void 0===n?1:n,s=t.duration,u=t.start,o=void 0===u?0:u,c=t.minimumUpdatePeriod,d=void 0===c?0:c,f=t.timeShiftBufferDepth,g=void 0===f?1/0:f,m=p(t.endNumber),l=(e+r)/1e3,b=i+o,h=l+d-b,T=Math.ceil(h*a/s),E=Math.floor((l-b-g)*a/s),v=Math.floor((l-b)*a/s);return{start:Math.max(0,E),end:"number"==typeof m?m:Math.min(T,v)}}},l=function(t){var e=t.type,r=t.duration,i=t.timescale,n=void 0===i?1:i,a=t.periodDuration,s=t.sourceDuration,u=m[e](t),o=function(t,e){for(var r=[],i=t;i<e;i++)r.push(i);return r}(u.start,u.end).map(function(t){return function(e,r){var i=t.duration,n=t.timescale,a=void 0===n?1:n,s=t.periodIndex,u=t.startNumber;return{number:(void 0===u?1:u)+e,duration:i/a,timeline:s,time:r*i}}}(t));if("static"===e){var c=o.length-1,d="number"==typeof a?a:s;o[c].duration=d-r/n*c}return o},b=function(t){var e=t.baseUrl,r=t.initialization,i=void 0===r?{}:r,n=t.sourceDuration,a=t.indexRange,s=void 0===a?"":a,u=t.duration;if(!e)throw new Error("NO_BASE_URL");var o=g({baseUrl:e,source:i.sourceURL,range:i.range}),c=g({baseUrl:e,source:e,indexRange:s});if(c.map=o,u){var d=l(t);d.length&&(c.duration=d[0].duration,c.timeline=d[0].timeline)}else n&&(c.duration=n,c.timeline=0);return c.number=0,[c]},h=function(t,e,r){for(var i=t.sidx.map?t.sidx.map:null,n=t.sidx.duration,a=t.timeline||0,s=t.sidx.byterange,u=s.offset+s.length,o=e.timescale,c=e.references.filter((function(t){return 1!==t.referenceType})),d=[],f=t.endList?"static":"dynamic",g=u+e.firstOffset,p=0;p<c.length;p++){var m=e.references[p],l=m.referencedSize,h=m.subsegmentDuration,T=b({baseUrl:r,timescale:o,timeline:a,periodIndex:a,duration:h,sourceDuration:n,indexRange:g+"-"+(g+l-1),type:f})[0];i&&(T.map=i),d.push(T),g+=l}return t.segments=d,t},T=function(t){return t&&t.uri+"-"+(r=(e=t.byterange).offset+e.length-1,e.offset+"-"+r);var e,r},E=function(t){var e;return(e=t.reduce((function(t,e){var r,i=e.attributes.id+(e.attributes.lang||"");return t[i]?(e.segments[0]&&(e.segments[0].discontinuity=!0),(r=t[i].segments).push.apply(r,e.segments),e.attributes.contentProtection&&(t[i].attributes.contentProtection=e.attributes.contentProtection)):t[i]=e,t}),{}),Object.keys(e).map((function(t){return e[t]}))).map((function(t){var e;return t.discontinuityStarts=(e=t.segments,"discontinuity",e.reduce((function(t,e,r){return e.discontinuity&&t.push(r),t}),[])),t}))},v=function(t,e){var r=T(t.sidx),i=r&&e[r]&&e[r].sidx;return i&&h(t,i,t.sidx.resolvedUri),t},y=function(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var r in t)t[r]=v(t[r],e);return t},I=function(t){var e,r=t.attributes,i=t.segments,n=t.sidx,a={attributes:(e={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===r.type,timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:i,mediaSequence:i.length?i[0].number:1};return r.contentProtection&&(a.contentProtection=r.contentProtection),n&&(a.sidx=n),a},S=function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType},O=function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType},R=function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType},A=function(t,e,r){var i=t.NOW,n=t.clientOffset,a=t.availabilityStartTime,s=t.timescale,u=void 0===s?1:s,o=t.start,c=void 0===o?0:o,d=t.minimumUpdatePeriod,f=(i+n)/1e3+(void 0===d?0:d)-(a+c);return Math.ceil((f*u-e)/r)},D=function(t,e){for(var r=t.type,i=t.minimumUpdatePeriod,n=void 0===i?0:i,a=t.media,s=void 0===a?"":a,u=t.sourceDuration,o=t.timescale,c=void 0===o?1:o,d=t.startNumber,f=void 0===d?1:d,g=t.periodIndex,p=[],m=-1,l=0;l<e.length;l++){var b=e[l],h=b.d,T=b.r||0,E=b.t||0;m<0&&(m=E),E&&E>m&&(m=E);var v=void 0;if(T<0){var y=l+1;v=y===e.length?"dynamic"===r&&n>0&&s.indexOf("$Number$")>0?A(t,m,h):(u*c-m)/h:(e[y].t-m)/h}else v=T+1;for(var I=f+p.length+v,S=f+p.length;S<I;)p.push({number:S,duration:h/c,time:m,timeline:g}),m+=h,S++}return p},N=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,P=function(t,e){return t.replace(N,function(t){return function(e,r,i,n){if("$$"===e)return"$";if(void 0===t[r])return e;var a=""+t[r];return"RepresentationID"===r?a:(n=i?parseInt(n,10):1,a.length>=n?a:""+new Array(n-a.length+1).join("0")+a)}}(e))},U=function(t,e){var r={RepresentationID:t.id,Bandwidth:t.bandwidth||0},n=t.initialization,a=void 0===n?{sourceURL:"",range:""}:n,s=g({baseUrl:t.baseUrl,source:P(a.sourceURL,r),range:a.range});return function(t,e){return t.duration||e?t.duration?l(t):D(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}(t,e).map((function(e){r.Number=e.number,r.Time=e.time;var n=P(t.media||"",r),a=t.timescale||1,u=t.presentationTimeOffset||0,o=t.periodStart+(e.time-u)/a;return{uri:n,timeline:e.timeline,duration:e.duration,resolvedUri:(0,i.Z)(t.baseUrl||"",n),map:s,number:e.number,presentationTime:o}}))},w=function(t,e){var r=t.duration,i=t.segmentUrls,n=void 0===i?[]:i,a=t.periodStart;if(!r&&!e||r&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");var s,u=n.map((function(e){return function(t,e){var r=t.baseUrl,i=t.initialization,n=void 0===i?{}:i,a=g({baseUrl:r,source:n.sourceURL,range:n.range}),s=g({baseUrl:r,source:e.media,range:e.mediaRange});return s.map=a,s}(t,e)}));return r&&(s=l(t)),e&&(s=D(t,e)),s.map((function(e,r){if(u[r]){var i=u[r],n=t.timescale||1,s=t.presentationTimeOffset||0;return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i.presentationTime=a+(e.time-s)/n,i}})).filter((function(t){return t}))},L=function(t){var e,r,i=t.attributes,n=t.segmentInfo;n.template?(r=U,e=c(i,n.template)):n.base?(r=b,e=c(i,n.base)):n.list&&(r=w,e=c(i,n.list));var a={attributes:i};if(!r)return a;var s=r(e,n.segmentTimeline);if(e.duration){var u=e,o=u.duration,d=u.timescale,f=void 0===d?1:d;e.duration=o/f}else s.length?e.duration=s.reduce((function(t,e){return Math.max(t,Math.ceil(e.duration))}),0):e.duration=0;return a.attributes=e,a.segments=s,n.base&&e.indexRange&&(a.sidx=s[0],a.segments=[]),a},C=function(t,e){return f(t.childNodes).filter((function(t){return t.tagName===e}))},x=function(t){return t.textContent.trim()},M=function(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var r=e.slice(1),i=r[0],n=r[1],a=r[2],s=r[3],u=r[4],o=r[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(n||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(u||0)+parseFloat(o||0)},X={mediaPresentationDuration:function(t){return M(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:function(t){return M(t)},suggestedPresentationDelay:function(t){return M(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return M(t)},start:function(t){return M(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?M(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},G=function(t){return t&&t.attributes?f(t.attributes).reduce((function(t,e){var r=X[e.name]||X.DEFAULT;return t[e.name]=r(e.value),t}),{}):{}},B={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},H=function(t,e){return e.length?d(t.map((function(t){return e.map((function(e){return(0,i.Z)(t,x(e))}))}))):t},k=function(t){var e=C(t,"SegmentTemplate")[0],r=C(t,"SegmentList")[0],i=r&&C(r,"SegmentURL").map((function(t){return c({tag:"SegmentURL"},G(t))})),n=C(t,"SegmentBase")[0],a=r||e,s=a&&C(a,"SegmentTimeline")[0],u=r||n||e,o=u&&C(u,"Initialization")[0],d=e&&G(e);d&&o?d.initialization=o&&G(o):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var f={template:d,segmentTimeline:s&&C(s,"S").map((function(t){return G(t)})),list:r&&c(G(r),{segmentUrls:i,initialization:G(o)}),base:n&&c(G(n),{initialization:G(o)})};return Object.keys(f).forEach((function(t){f[t]||delete f[t]})),f},F=function(t,e){return function(r,i){var n=H(e,C(r.node,"BaseURL")),u=parseInt(r.attributes.id,10),o=a().isNaN(u)?i:u,f=c(t,{periodIndex:o,periodStart:r.attributes.start});"number"==typeof r.attributes.duration&&(f.periodDuration=r.attributes.duration);var g=C(r.node,"AdaptationSet"),p=k(r.node);return d(g.map(function(t,e,r){return function(i){var n,a=G(i),u=H(e,C(i,"BaseURL")),o=C(i,"Role")[0],f={role:G(o)},g=c(t,a,f),p=C(i,"Accessibility")[0],m="urn:scte:dash:cc:cea-608:2015"===(n=G(p)).schemeIdUri?n.value.split(";").map((function(t){var e,r;if(r=t,/^CC\d=/.test(t)){var i=t.split("=");e=i[0],r=i[1]}else/^CC\d$/.test(t)&&(e=t);return{channel:e,language:r}})):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?n.value.split(";").map((function(t){var e={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var r=t.split("="),i=r[0],n=r[1],a=void 0===n?"":n;e.channel=i,e.language=t,a.split(",").forEach((function(t){var r=t.split(":"),i=r[0],n=r[1];"lang"===i?e.language=n:"er"===i?e.easyReader=Number(n):"war"===i?e.aspectRatio=Number(n):"3D"===i&&(e["3D"]=Number(n))}))}else e.language=t;return e.channel&&(e.channel="SERVICE"+e.channel),e})):void 0;m&&(g=c(g,{captionServices:m}));var l=C(i,"Label")[0];if(l&&l.childNodes.length){var b=l.childNodes[0].nodeValue.trim();g=c(g,{label:b})}var h=C(i,"ContentProtection").reduce((function(t,e){var r=G(e),i=B[r.schemeIdUri];if(i){t[i]={attributes:r};var n=C(e,"cenc:pssh")[0];if(n){var a=x(n),u=a&&(0,s.Z)(a);t[i].pssh=u}}return t}),{});Object.keys(h).length&&(g=c(g,{contentProtection:h}));var T=k(i),E=C(i,"Representation"),v=c(r,T);return d(E.map(function(t,e,r){return function(i){var n=C(i,"BaseURL"),a=H(e,n),s=c(t,G(i)),u=k(i);return a.map((function(t){return{segmentInfo:c(r,u),attributes:c(s,{baseUrl:t})}}))}}(g,u,v)))}}(f,n,p)))}},V=function(t){if(""===t)throw new Error("DASH_EMPTY_MANIFEST");var e,r,i=new u.DOMParser;try{r=(e=i.parseFromString(t,"application/xml"))&&"MPD"===e.documentElement.tagName?e.documentElement:null}catch(t){}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r},_=function(t,e){void 0===e&&(e={});var r=function(t,e){void 0===e&&(e={});var r=e,i=r.manifestUri,n=void 0===i?"":i,a=r.NOW,s=void 0===a?Date.now():a,u=r.clientOffset,o=void 0===u?0:u,c=C(t,"Period");if(!c.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var f=C(t,"Location"),g=G(t),p=H([n],C(t,"BaseURL"));g.type=g.type||"static",g.sourceDuration=g.mediaPresentationDuration||0,g.NOW=s,g.clientOffset=o,f.length&&(g.locations=f.map(x));var m=[];return c.forEach((function(t,e){var r=G(t),i=m[e-1];r.start=function(t){var e=t.attributes,r=t.priorPeriodAttributes,i=t.mpdType;return"number"==typeof e.start?e.start:r&&"number"==typeof r.start&&"number"==typeof r.duration?r.start+r.duration:r||"static"!==i?null:0}({attributes:r,priorPeriodAttributes:i?i.attributes:null,mpdType:g.type}),m.push({node:t,attributes:r})})),{locations:g.locations,representationInfo:d(m.map(F(g,p)))}}(V(t),e);return function(t,e,r){var i;if(void 0===r&&(r={}),!t.length)return{};var n=t[0].attributes,a=n.sourceDuration,s=n.type,u=n.suggestedPresentationDelay,o=n.minimumUpdatePeriod,c=E(t.filter(S)).map(I),d=E(t.filter(O)),f=t.filter(R),g=t.map((function(t){return t.attributes.captionServices})).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:a,playlists:y(c,r)};o>=0&&(p.minimumUpdatePeriod=1e3*o),e&&(p.locations=e),"dynamic"===s&&(p.suggestedPresentationDelay=u);var m=0===p.playlists.length;return d.length&&(p.mediaGroups.AUDIO.audio=function(t,e,r){var i;void 0===e&&(e={}),void 0===r&&(r=!1);var n=t.reduce((function(t,n){var a=n.attributes.role&&n.attributes.role.value||"",s=n.attributes.lang||"",u=n.attributes.label||"main";if(s&&!n.attributes.label){var o=a?" ("+a+")":"";u=""+n.attributes.lang+o}t[u]||(t[u]={language:s,autoselect:!0,default:"main"===a,playlists:[],uri:""});var c=v(function(t,e){var r,i=t.attributes,n=t.segments,a=t.sidx,s={attributes:(r={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===i.type,timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(s.contentProtection=i.contentProtection),a&&(s.sidx=a),e&&(s.attributes.AUDIO="audio",s.attributes.SUBTITLES="subs"),s}(n,r),e);return t[u].playlists.push(c),void 0===i&&"main"===a&&((i=n).default=!0),t}),{});return i||(n[Object.keys(n)[0]].default=!0),n}(d,r,m)),f.length&&(p.mediaGroups.SUBTITLES.subs=function(t,e){return void 0===e&&(e={}),t.reduce((function(t,r){var i=r.attributes.lang||"text";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(v(function(t){var e,r=t.attributes,i=t.segments;void 0===i&&(i=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var n=((e={NAME:r.id,BANDWIDTH:r.bandwidth})["PROGRAM-ID"]=1,e);return r.codecs&&(n.CODECS=r.codecs),{attributes:n,uri:"",endList:"static"===r.type,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:i,mediaSequence:i.length?i[0].number:1}}(r),e)),t}),{})}(f,r)),g.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(t,e){return e?(e.forEach((function(e){var r=e.channel,i=e.language;t[i]={autoselect:!1,default:!1,instreamId:r,language:i},e.hasOwnProperty("aspectRatio")&&(t[i].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(t[i].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(t[i]["3D"]=e["3D"])})),t):t}),{})),p}(r.representationInfo.map(L),r.locations,e.sidxMapping)},Y=function(t){return function(t){var e=C(t,"UTCTiming")[0];if(!e)return null;var r=G(e);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return r}(V(t))}},84221:t=>{var e=Math.pow(2,32);t.exports=function(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8)},n=12;0===i.version?(i.earliestPresentationTime=r.getUint32(n),i.firstOffset=r.getUint32(n+4),n+=8):(i.earliestPresentationTime=r.getUint32(n)*e+r.getUint32(n+4),i.firstOffset=r.getUint32(n+8)*e+r.getUint32(n+12),n+=16),n+=2;var a=r.getUint16(n);for(n+=2;a>0;n+=12,a--)i.references.push({referenceType:(128&t[n])>>>7,referencedSize:2147483647&r.getUint32(n),subsegmentDuration:r.getUint32(n+4),startsWithSap:!!(128&t[n+8]),sapType:(112&t[n+8])>>>4,sapDeltaTime:268435455&r.getUint32(n+8)});return i}},51489:t=>{var e,r,i,n,a,s,u,o=9e4;e=function(t){return t*o},r=function(t,e){return t*e},i=function(t){return t/o},n=function(t,e){return t/e},a=function(t,r){return e(n(t,r))},s=function(t,e){return r(i(t),e)},u=function(t,e,r){return i(r?t:t-e)},t.exports={ONE_SECOND_IN_TS:o,secondsToVideoTs:e,secondsToAudioTs:r,videoTsToSeconds:i,audioTsToSeconds:n,audioTsToVideoTs:a,videoTsToAudioTs:s,metadataTsToSeconds:u}}}]);