(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[76],{35357:(e,n,t)=>{"use strict";let i,o,s,r;t.d(n,{SX:()=>i,bC:()=>o,OO:()=>s,Aj:()=>r}),function(e){e.root="root",e.langOnly="lang-only",e.viral="viral",e.liveTV="live-tv",e.liveTVChannel="live-tv-channel",e.liveTVChannelDetails="live-tv-channel-details",e.liveTVTimelineDetails="live-tv-timeline-details",e.onDemand="on-demand",e.onDemandCategoryViewAll="on-demand-category-view-all",e.onDemandChildCategoryViewAll="on-demand-child-category-view-all",e.onDemandMovie="on-demand-movie",e.onDemandSeriesRoot="on-demand-series-root",e.onDemandSeriesEpisode="on-demand-series-episode",e.onDemandMoviesDetails="on-demand-movies-details",e.onDemandSeriesDetails="on-demand-series-details",e.onDemandSeriesSeasonsDetails="on-demand-series-seasons-details",e.notFound="not-found",e.accountSignIn="account-sign-in",e.accountSignUp="account-sign-up",e.accountConfirmAccount="account-confirm-account",e.accountForgotPassword="account-forgot-password",e.accountManageAccount="account-manage-account",e.accountChangePassword="account-change-password",e.accountUpdateEmail="account-update-email",e.accountResetPassword="account-reset-password",e.accountKidsModeExit="account-kids-mode-exit",e.accountKidsModeDeletePin="account-kids-mode-delete-pin",e.accountKidsModeChangePin="account-kids-mode-change-pin",e.accountKidsModeManagePin="account-kids-mode-manage-pin",e.accountKidsModeForgotPin="account-kids-mode-forgot-pin",e.accountKidsModeSetPin="account-kids-mode-set-pin",e.accountKidsModeEnter="account-kids-mode-enter",e.search="search",e.searchLiveTVTimelineDetails="search-live-tv-timeline-details",e.searchLiveTVChannelDetails="search-live-tv-channel-details",e.searchOnDemandSeriesEpisode="search-on-demand-series-episode",e.searchOnDemandMoviesDetails="search-on-demand-movies-details",e.searchOnDemandSeriesDetails="search-on-demand-series-details",e.searchOnDemandSeriesSeasonsDetails="search-on-demand-series-seasons-details",e.shadowSiteMoviesCategory="shadow-site-movies-category",e.shadowSiteSeriesCategory="shadow-site-series-category",e.shadowSiteMoviesCategoryList="shadow-site-movies-category-list",e.shadowSiteSeriesCategoryList="shadow-site-series-category-list",e.shadowSiteMoviesCategories="shadow-site-movies-categories",e.shadowSiteSeriesCategories="shadow-site-series-categories",e.shadowSiteCategories="shadow-site-categories",e.shadowSiteMoviesDetail="shadow-site-movies-detail",e.shadowSiteSeriesDetail="shadow-site-series-detail",e.activate="activate",e.activateDevice="activate-device",e.activatePartner="activate-partner",e.partnerInvalidLink="partner-invalid-link"}(i||(i={})),function(e){e.liveTV="live-tv",e.onDemand="on-demand",e.viral="viral",e.account="account",e.search="search",e.shadowSite="shadow-site",e.activate="activate",e.partner="partner"}(o||(o={})),function(e){e.HEADLESS="headless"}(s||(s={})),function(e){e.emailUpdated="emailUpdated",e.passwordChanged="passwordChanged"}(r||(r={}))},95968:(e,n,t)=>{"use strict";t.d(n,{D7:()=>o,Zv:()=>s,hL:()=>r,Tk:()=>a,Db:()=>c,Xz:()=>l,yG:()=>d,w5:()=>u,jt:()=>g});var i=t(35357);function o(e){return e.router.ID||null}function s(e){return o(e)===i.SX.viral}function r(e){const n=l(e),t=d(e),s=function(e){return o(e)===i.SX.liveTVChannelDetails}(e);return n||t||s}function a(e){const n=function(e){return o(e)===i.SX.searchOnDemandMoviesDetails}(e),t=function(e){const n=o(e);return[i.SX.searchOnDemandSeriesDetails,i.SX.searchOnDemandSeriesSeasonsDetails].includes(n)}(e),s=function(e){return o(e)===i.SX.searchLiveTVChannelDetails}(e),r=function(e){return o(e)===i.SX.searchLiveTVTimelineDetails}(e);return n||t||s||r}function c(e){const n=o(e);return n===i.SX.onDemandCategoryViewAll||n===i.SX.onDemandChildCategoryViewAll}function l(e){const n=o(e);return[i.SX.onDemandSeriesDetails,i.SX.onDemandMoviesDetails,i.SX.onDemandSeriesSeasonsDetails,i.SX.onDemandSeriesRoot].includes(n)}function d(e){return o(e)===i.SX.liveTVTimelineDetails}function u(e){const n=o(e);return Object.values(i.SX).filter((e=>e.startsWith("account"))).includes(n)}function g(e){return o(e)===i.SX.accountForgotPassword}},51127:(e,n,t)=>{"use strict";function i(e){var n;return(null===(n=e.router.extra)||void 0===n?void 0:n.from)||null}function o(e){var n,t;return(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t.category)||null}function s(e){var n,t;return(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t.enterFullBrowser)||null}function r(e){var n,t,i,o;return void 0===(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t.shouldDockPlayer)||(null===(i=e.router)||void 0===i||null===(o=i.extra)||void 0===o?void 0:o.shouldDockPlayer)}function a(e){var n,t;return!(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t||!t.shouldUndockPlayer)}function c(e){var n,t;return(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t.scrollToWatchList)||null}function l(e){var n,t;return(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t.scrollToFavorites)||null}function d(e){var n,t;return(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t?void 0:t.scrollToPartner)||null}function u(e){var n,t;return!(null===(n=e.router)||void 0===n||null===(t=n.extra)||void 0===t||!t.openHamburgerMenu)}function g(e){var n;return(null===(n=e.router.extra)||void 0===n?void 0:n.redirectRoute)||null}function y(e){var n;return(null===(n=e.router.extra)||void 0===n?void 0:n.partnerActivePopup)||null}t.d(n,{nl:()=>i,l8:()=>o,ND:()=>s,U_:()=>r,Qo:()=>a,De:()=>c,jb:()=>l,R:()=>d,mQ:()=>u,qY:()=>g,Ld:()=>y})},65605:(e,n,t)=>{"use strict";t.d(n,{Eq:()=>a,Do:()=>c});var i=t(57872),o=t(95968),s=t(59394),r=t(88025);function a(e){const n=function(e){const n=(0,o.D7)(e),t=(0,s.hK)(e);return(0,r.q)(e,{routeID:n,params:t,query:{},ignoreLang:!0})}(e);return`${c(e)}${n}`}function c(e){return`https://${(0,i.S)(e)}`}},79494:(e,n,t)=>{"use strict";function i(e){var n;return(null===(n=e.router)||void 0===n?void 0:n.lastAccessedContent)||null}t.d(n,{C:()=>i})},88880:(e,n,t)=>{"use strict";t.d(n,{qQ:()=>c,DN:()=>l,hv:()=>d});var i=t(35357),o=t(95968),s=t(36150),r=t(59394);const a=(e,n,t)=>null!=e&&e.id&&!t?n===e.id:!!t&&Object.keys(e).reduce(((i,o)=>{if(!i)return i;switch(o){case"id":const i=e[o];return n===i;case"params":const s=e[o];return Object.keys(s).every((e=>s[e]===t[e]))}}),!0);function c(e,{path:n}){const t=(0,s.l)(e);for(const[e,i]of t.entries()){const t=n.match(i.regEx);if(t)return{routeID:e,params:t.slice(1).reduce(((e,n,t)=>{const o=i.keys[t],s="string"==typeof n?decodeURIComponent(n):n;return e[o.name]=s,e}),{})}}return{routeID:i.SX.notFound,params:{}}}function l(e,{match:n}){if(!n)return!1;const t=(0,o.D7)(e),i=(0,r.hK)(e);switch(typeof n){case"string":return t===n;case"object":return!(n instanceof Date)&&(Array.isArray(n)?n.some((e=>a(e,t,i))):a(n,t,i));default:return!1}}function d(e,{children:n}){return n.findIndex((({props:{match:n}})=>l(e,{match:n})))}},59394:(e,n,t)=>{"use strict";t.d(n,{hK:()=>o,go:()=>s,hP:()=>r,Rg:()=>a,tJ:()=>c,Kg:()=>l,mE:()=>d,Xc:()=>u,Ht:()=>g,D8:()=>y,Kr:()=>p,ai:()=>m});var i=t(35357);function o(e){return e.router.params||null}function s(e){const n=o(e);return(null==n?void 0:n.lang)||null}function r(e){const n=o(e);return(null==n?void 0:n.module)||null}function a(e){const n=o(e);return(null==n?void 0:n.slug)||null}function c(e){const n=o(e);return(null==n?void 0:n.episodeSlug)||null}function l(e){const n=o(e);return(null==n?void 0:n.timelineSlug)||null}function d(e){const n=o(e);return null!=n&&n.seasonNumber?parseInt(null==n?void 0:n.seasonNumber,10):null}function u(e){return o(e).module===i.bC.account}function g(e){return o(e).module===i.bC.liveTV}function y(e){return o(e).module===i.bC.search}function p(e){return o(e).passwordResetToken||null}function m(e){return o(e).module===i.bC.partner}},65358:(e,n,t)=>{"use strict";t.d(n,{CX:()=>s,Wt:()=>r,mv:()=>a,jy:()=>c,Sw:()=>l,yV:()=>d});var i=t(8247),o=t(35357);function s(e){return e.router.query||null}function r(e){var n,t;return(null===(n=e.router)||void 0===n||null===(t=n.query)||void 0===t?void 0:t.embedType)===o.OO.HEADLESS}function a(e){const n=s(e);if(null!=n&&n.channel)return(0,i.X)(e,{slug:n.channel})}function c(e){const n=s(e),t={};return null!=n&&n.utm_source&&(t.utm_source=n.utm_source),null!=n&&n.utm_campaign&&(t.utm_campaign=n.utm_campaign),null!=n&&n.utm_term&&(t.utm_term=n.utm_term),null!=n&&n.utm_medium&&(t.utm_medium=n.utm_medium),null!=n&&n.utm_content&&(t.utm_content=n.utm_content),t}function l(e){var n;const t=s(e);return"true"===(null!==(n=null==t?void 0:t.muted)&&void 0!==n?n:null==t?void 0:t.mute)||!1}function d(e){const n=s(e);return null==n||n.bootstrap,null}},63704:(e,n,t)=>{"use strict";t.d(n,{w:()=>a,H:()=>c});var i=t(90365),o=t(65605),s=t(88025),r=t(65358);function a(e,{routeID:n,params:t}){const o=(0,r.CX)(e),a=(0,i.F)(o);return(0,s.q)(e,{routeID:n,params:t,query:a})||null}function c(e,{path:n}){return`${(0,o.Do)(e)}${n}`}},57293:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});const i=(0,t(91757).createAction)("@search/CLEAR_CONTENT")()},72299:(e,n,t)=>{"use strict";t.d(n,{$h:()=>o,rb:()=>s,zn:()=>r,sH:()=>a});var i=t(91757);const o=(0,i.createAction)("@search/RESTORE_RECENTS")(),s=(0,i.createAction)("@search/ADD_TO_RECENTS")(),r=(0,i.createAction)("@search/REMOVE_RECENT_BY_INDEX")(),a=(0,i.createAction)("@search/REMOVE_ALL_RECENTS")()},66889:(e,n,t)=>{"use strict";t.d(n,{M:()=>i});const i=(0,t(91757).createAsyncAction)(["@search/FETCH_CONTENT/REQUEST",({searchQuery:e}={})=>({searchQuery:e})],"@search/FETCH_CONTENT/SUCCESS","@search/FETCH_CONTENT/FAILURE")()},16657:(e,n,t)=>{"use strict";t.d(n,{J:()=>B});var i=t(57293),o=t(66889),s=t(18172);const r=(0,s.ZP)((e=>{e.list=[],e.requestState="idle",e.errorMessage=null,e.lastSearchTransactionID=null,e.currentSearchString=""})),a=(0,s.ZP)(((e,{payload:n})=>{e.recents.splice(n,1)})),c=(0,s.ZP)(((e,{payload:n})=>{const t=e.recents.findIndex((e=>e.toLowerCase()===n.toLowerCase()));-1!==t&&e.recents.splice(t,1),10===e.recents.length&&e.recents.pop(),e.recents.unshift(n)})),l=(0,s.ZP)(((e,{payload:n})=>{e.recents=[...new Set(n)]})),d=(0,s.ZP)((e=>{e.recents=[]})),u=(0,s.ZP)(((e,{payload:n})=>{e.requestState="requesting",e.errorMessage=null,e.list=[],e.currentSearchString=n.searchQuery})),g=(0,s.ZP)(((e,{payload:{response:n}})=>{var t,i;e.list=[],null===(t=n.body.data)||void 0===t||t.forEach((n=>{const{id:t,type:i}=n;e.list.push({id:t,type:i})})),e.lastSearchTransactionID=(null===(i=n.headers)||void 0===i?void 0:i.get("x-search-transaction"))||null,e.requestState="success"})),y=(0,s.ZP)(((e,{})=>{e.requestState="error",e.errorMessage="Failed to fetch"}));var p=t(91757),m=t(72299);const v=(0,p.createReducer)({list:[],requestState:"idle",errorMessage:null,currentSearchString:"",lastSearchTransactionID:null,recents:[]}).handleAction(o.M.success,g).handleAction(o.M.request,u).handleAction(o.M.failure,y).handleAction(i.Z,r).handleAction(m.$h,l).handleAction(m.rb,c).handleAction(m.zn,a).handleAction(m.sH,d);var f=t(24970),D=t(70789),E=t(59394);function*I(){(yield(0,f.Ys)(E.D8))||(yield(0,f.gz)((0,i.Z)()))}function*h(){yield(0,f.ib)((0,p.getType)(D.Q),I)}var S=t(33114);const T="ptv-recents-serch-queries";function*P(){let e=yield(0,f.RE)([localStorage,"getItem"],T);e=e?JSON.parse(e):[],yield(0,f.gz)((0,m.$h)(e))}function*A(){yield(0,f.Fm)((0,p.getType)(S.K.success),P)}var C=t(96156),R=t(84361),O=t(1196),k=t(95418),b=t(64687);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,C.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const _=(0,b.gV)("/app/src/modules/search/sagas/searchFetch/worker.ts");function*q({payload:{searchQuery:e}}){try{if(yield(0,f.Ys)(O.R))throw _.error("application has error"),new Error("application-has-error");if(""===e)return;yield(0,f.RE)(R.R);const n=yield(0,f.Ys)(k.o),t=yield(0,f.fw)("plutoTVAPIService");_.log("requesting search items api",{searchQuery:e});const i=yield(0,f.RE)([t,t.search],{searchQuery:e,limit:100,headers:M({},n?{"x-search-transaction":n}:{})});_.log("search api call done",{response:i}),yield(0,f.gz)(o.M.success({response:i}))}catch(e){_.error(e),yield(0,f.gz)(o.M.failure({error:e}))}}function*x(){yield(0,f.Fm)((0,p.getType)(o.M.request),q)}var z=t(31814);function*j(){const e=yield(0,f.Ys)(z.nj);yield(0,f.RE)([localStorage,"setItem"],T,JSON.stringify(e))}function*N(){yield(0,f.ib)([(0,p.getType)(m.rb),(0,p.getType)(m.zn),(0,p.getType)(m.$h),(0,p.getType)(m.sH)],j)}var U=t(66320),V=t(15875),Y=t(71906),L=t(7083),Z=t(87624),F=t(6802);function $(e){const n=(0,F.wJ)(e);if(n.length>0){const t=n.filter((n=>null===(0,Z.K)(e,{contentID:n.id}))).map((e=>e.id));return t.length>0?t:null}return null}function K(e){const n=(0,F.xf)(e);if(n.length>0){const t=n.filter((n=>{const t=(0,L.H)(e,{channelID:n.id});return null===t||0===t.timelines.length})).map((e=>e.id));return t.length>0?t:null}return null}var Q=t(3842);const W=(0,b.gV)("/app/src/modules/search/sagas/updateSearchContent/worker.ts");function*X(){const e=yield(0,f.Ys)($);e&&(W.log("unavailable VOD needed by search component",e),yield(0,f.gz)(Y.j.request({itemIDs:e.join(",")})));const n=yield(0,f.Ys)(K);if(n){W.log("unavailable CHANNELS needed by search component",n),yield(0,f.gz)(U.N.request({channelIDs:n})),yield(0,f.qn)((0,p.getType)(U.N.success));const e=(0,Q.G)(new Date,30),t=240;W.log("updating TIMELINES needed by search component"),yield(0,f.gz)(V.K.request({channelIDs:n,duration:t,start:e}))}}function*H(){yield(0,f.Fm)((0,p.getType)(o.M.success),X)}function*G(){yield(0,f.rM)(x),yield(0,f.rM)(H),yield(0,f.rM)(A),yield(0,f.rM)(N),yield(0,f.rM)(h)}function B(){return{id:"search",reducerMap:{search:v},sagas:[G]}}},20659:(e,n,t)=>{"use strict";function i(e){var n;return null===(n=e.search)||void 0===n?void 0:n.currentSearchString}t.d(n,{M:()=>i})},26511:(e,n,t)=>{"use strict";t.d(n,{$:()=>s});var i=t(76862),o=t(29626);function s(e){const n=(0,o.o$)(e),t=(0,i.n)(e);return!n&&t}},95418:(e,n,t)=>{"use strict";t.d(n,{o:()=>o,A:()=>s});var i=t(95968);function o(e){var n;return null===(n=e.search)||void 0===n?void 0:n.lastSearchTransactionID}function s(e){const n=o(e),t=(0,i.Tk)(e);return n&&t?n:null}},41604:(e,n,t)=>{"use strict";function i(e){var n;return null===(n=e.search)||void 0===n?void 0:n.requestState}t.d(n,{M:()=>i})},6802:(e,n,t)=>{"use strict";t.d(n,{cl:()=>o,wJ:()=>s,xf:()=>r});var i=t(73400);function o(e){var n;return(null===(n=e.search)||void 0===n?void 0:n.list)||[]}function s(e){const n=i.dm.Movies,t=i.dm.Series;return o(e).filter((e=>[n,t].includes(e.type)))}function r(e){return o(e).filter((e=>e.type===i.vs.Channel))}},31814:(e,n,t)=>{"use strict";function i(e){var n;return null===(n=e.search)||void 0===n?void 0:n.recents}function o(e){return 0===i(e).length}t.d(n,{nj:()=>i,H8:()=>o})},73482:(e,n,t)=>{"use strict";t.d(n,{AA:()=>o,hK:()=>s,KZ:()=>r});var i=t(91757);const o=(0,i.createAction)("@svodUpsell/ADD_VIDEO_IMPRESSION",(({campaignID:e})=>({campaignID:e})))(),s=(0,i.createAction)("@svodUpsell/ADD_CHANNEL_ON_AFTER_CONTENT_IMPRESSION",(({campaignID:e})=>({campaignID:e})))(),r=(0,i.createAction)("@svodUpsell/SAVE_IMPRESSIONS_PROMOTED_ON_ENTRY_USER_INTERACTION_ACTION",(({campaignID:e})=>({campaignID:e})))()},32851:(e,n,t)=>{"use strict";t.d(n,{v:()=>i});const i=(0,t(91757).createAction)("@svodUpsell/SAVE_CURRENT_PROMOTION_MESSAGE_ID",(({currentPromotionMessageID:e}={currentPromotionMessageID:null})=>({currentPromotionMessageID:e})))()},80535:(e,n,t)=>{"use strict";t.d(n,{nP:()=>o,rr:()=>s,uh:()=>r,db:()=>a,no:()=>c,ot:()=>l,uV:()=>d,oT:()=>u});var i=t(91757);const o=(0,i.createAction)("@svodUpsell/SUBMIT_CHANNEL_ON_AFTER_CONTENT_IMPRESSION",(({campaignID:e})=>({campaignID:e})))(),s=(0,i.createAction)("@svodUpsell/DISMISS_CHANNEL_ON_AFTER_CONTENT_IMPRESSION",(({campaignID:e,screenElementID:n})=>({campaignID:e,screenElementID:n})))(),r=(0,i.createAction)("@svodUpsell/SUBMIT_UPSELL_CHANNEL_ON_AFTER_CONTENT_IMPRESSION")(),a=(0,i.createAction)("@svodUpsell/DISMISS_UPSELL_CHANNEL_ON_AFTER_CONTENT_IMPRESSION",(({screenElementID:e})=>({screenElementID:e})))(),c=(0,i.createAction)("@svodUpsell/SUBMIT_PROMOTED_ON_ENTRY_IMPRESSION",(({campaignID:e})=>({campaignID:e})))(),l=(0,i.createAction)("@svodUpsell/DISMISS_PROMOTED_ON_ENTRY_IMPRESSION",(({campaignID:e,screenElementID:n})=>({campaignID:e,screenElementID:n})))(),d=(0,i.createAction)("@svodUpsell/PROMOTED_ON_ENTRY_IMPRESSION",(({campaignID:e})=>({campaignID:e})))(),u=(0,i.createAction)("@svodUpsell/AUTO_DISMISS_CONTENT",(({currentPromotionMessageID:e})=>({currentPromotionMessageID:e})))()},19852:(e,n,t)=>{"use strict";t.d(n,{y:()=>te});var i=t(91757),o=t(73482),s=t(93106);const r=(0,i.createAction)("@svodUpsell/RESET_CURRENT_PROMOTION_MESSAGE_ID")();var a=t(32851);(0,i.createAction)("@svodUpsell/SAVE_HAS_SEEN_CHANNEL_ON_END")(),(0,i.createAction)("@svodUpsell/SAVE_HAS_SEEN_UPSELL_CHANNEL_ON_END")();const c=(0,i.createAction)("@svodUpsell/SAVE_HAS_SEEN_PROMOTED_ON_ENTRY")();var l=t(80535),d=t(18172);const u=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.userInteractions[n].impressionsChannelOnAfterContent+=1})),g=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.userInteractions[n].impressionsPromotionVideo+=1}));var y=t(96156),p=t(88899),m=t(83676),v=t(2759);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const E=(0,d.ZP)(((e,{payload:{bootstrapData:n,upsellCampaignsData:t,localStorageData:i}})=>{e.upsellCampaigns=n.upsellCampaignsV1.map((e=>{const n=null==t?void 0:t.campaigns.find((n=>n.campaignID===e.campaignID)),i=function(e){return e?e.map((e=>({id:e.id,title:e.title,subtitle:e.subtitle,message:e.message,ctaType:e.ctaType,ctaData:e.ctaData,ctaLabelText:e.ctaLabelText,ctaDismissLabelText:e.ctaDismissLabelText,images:e.images.filter((e=>[m.wU.colorLogoPNG,m.wU.featuredImage].includes(e.type)&&[m.as.square,m.as.wide].includes(e.style))).map((e=>({type:e.type,style:e.style,url:e.url})))}))):[]}(null==n?void 0:n.promotionMessages),o=null==n?void 0:n.promotionVideo,s=null==n?void 0:n.promotedChannelID;return D(D({},e),{},{promotionMessages:i,promotionVideo:o,promotedChannelID:s,start:(0,p.Q)(null==n?void 0:n.start),end:(0,p.Q)(null==n?void 0:n.end)})}));let o=(0,v.v)(i);o=Object.keys(o).filter((e=>n.upsellCampaignsV1.some((n=>n.campaignID===e)))).reduce(((e,n)=>D(D({},e),{},{[n]:D({},o[n])})),{});const s=n.upsellCampaignsV1.filter((e=>!o[e.campaignID])).reduce(((e,n)=>D(D({},e),{},{[n.campaignID]:{impressionsPromotionVideo:0,impressionsChannelOnAfterContent:0,impressionsPromotedOnEntry:0,ctaSubmitsChannelOnAfterContent:0,ctaSubmitsPromotedOnEntry:0,ctaDismissesPromotedOnEntry:0,ctaDismissesChannelOnAfterContent:0}})),{}),r=Object.assign(o,s);e.userInteractions=r})),I=(0,d.ZP)(((e,{payload:{currentPromotionMessageID:n}})=>{e.currentPromotionMessageID=n})),h=(0,d.ZP)((e=>{e.sessionUserInteractions.hasSeenPromotedOnEntry=!0})),S=(0,d.ZP)((e=>{e.currentPromotionMessageID=null})),T=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.sessionUserInteractions.hasSeenPromotedOnEntry=!0,e.currentPromotionMessageID=null,e.userInteractions[n].ctaSubmitsPromotedOnEntry+=1})),P=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.sessionUserInteractions.hasSeenPromotedOnEntry=!0,e.currentPromotionMessageID=null,e.userInteractions[n].ctaDismissesPromotedOnEntry+=1})),A=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.userInteractions[n].impressionsPromotedOnEntry+=1})),C=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.sessionUserInteractions.hasSeenChannelOnAfterContent=!0,e.currentPromotionMessageID=null,e.userInteractions[n].ctaSubmitsChannelOnAfterContent+=1})),R=(0,d.ZP)(((e,{payload:{campaignID:n}})=>{e.sessionUserInteractions.hasSeenChannelOnAfterContent=!0,e.currentPromotionMessageID=null,e.userInteractions[n].ctaDismissesChannelOnAfterContent+=1})),O=(0,d.ZP)((e=>{e.sessionUserInteractions.hasSeenUpsellChannelOnAfterContent=!0,e.currentPromotionMessageID=null})),k=(0,d.ZP)((e=>{e.sessionUserInteractions.hasSeenUpsellChannelOnAfterContent=!0,e.currentPromotionMessageID=null})),b=(0,d.ZP)(((e,{payload:{currentPromotionMessageID:n}})=>{switch(n){case m.$Q.promotedOnEntry:e.sessionUserInteractions.hasSeenPromotedOnEntry=!0;break;case m.$Q.channelOnAfterContent:e.sessionUserInteractions.hasSeenChannelOnAfterContent=!0;break;case m.$Q.upsellChannelOnAfterContent:e.sessionUserInteractions.hasSeenUpsellChannelOnAfterContent=!0}e.currentPromotionMessageID=null})),w=(0,i.createReducer)({upsellCampaigns:[],currentPromotionMessageID:null,userInteractions:{},sessionUserInteractions:{hasSeenChannelOnAfterContent:!1,hasSeenUpsellChannelOnAfterContent:!1,hasSeenPromotedOnEntry:!1}}).handleAction(s.t,E).handleAction(o.AA,g).handleAction(o.hK,u).handleAction(a.v,I).handleAction(c,h).handleAction(r,S).handleAction(l.no,T).handleAction(l.ot,P).handleAction(l.nP,C).handleAction(l.rr,R).handleAction(l.uh,O).handleAction(l.db,k).handleAction(l.oT,b).handleAction(l.uV,A);var M=t(24970),_=t(1531),q=t(35844);function*x(){if(yield(0,M.Ys)(q.GG)){const e=yield(0,M.Ys)(_.A4);yield(0,M.gz)((0,o.AA)({campaignID:e}))}}function*z(){yield(0,M.Fm)((0,i.getType)(l.no),x)}var j=t(29152);function*N(){const e=yield(0,M.Ys)(j.N4);yield(0,M.RE)([localStorage,"setItem"],"ptv-upsellcampaigns",e)}function*U(){yield(0,M.Fm)([(0,i.getType)(o.AA),(0,i.getType)(o.KZ),(0,i.getType)(o.hK),(0,i.getType)(l.no),(0,i.getType)(l.ot),(0,i.getType)(l.rr),(0,i.getType)(l.nP),(0,i.getType)(l.uV)],N)}var V=t(66320);function*Y(){const e=yield(0,M.Ys)(_.tS);e&&(yield(0,M.gz)(V.N.request({channelIDs:[e]})))}function*L(){yield(0,M.Fm)((0,i.getType)(s.t),Y)}var Z=t(29626),F=t(31280),$=t(60203),K=t(56297),Q=t(33759),W=t(39629),X=t(78706),H=t(64687),G=t(75203);const B=(0,H.gV)("/app/src/modules/svodUpsell/sagas/setCurrentPromotionMessage/setChannelOnAfterContent.ts");function*J(){let e,n;if(yield(0,M.qn)((0,i.getType)($.g)),(yield(0,M.Ys)(Z.es))&&(yield(0,M.Ys)(_.Qr)))for(;;){if(yield(0,M.Ys)(j.p0))return;const{payload:t}=yield(0,M.qn)((0,i.getType)(K.o)),o=new Date;let s=t.data.clips.find((e=>(0,W.K)(o,e.startTime,e.endTime)));if(s||(s=t.data.clips[0]),s){if(e!==s.clipID){e=s.clipID,n&&(yield(0,M.al)(n));const t=yield(0,M.Ys)(q.KI);if(!t)continue;const i=(0,Q.n$)(t,-6e4);if(!(0,W.C)(i,o,!0)){const e=(0,X.a5)(i,o);n=yield(0,M.rM)(ee,e)}}}else B.log("failed to find the current clip")}}function*ee(e){const n=yield(0,M.Ys)(F.Yg);n&&(yield(0,G.A)(e),yield(0,M.gz)((0,a.v)({currentPromotionMessageID:n})))}function*ne(){yield(0,M.rM)(U),yield(0,M.rM)(J),yield(0,M.rM)(L),yield(0,M.rM)(z)}function te(){return{id:"svodUpsell",reducerMap:{svodUpsell:w},sagas:[ne]}}},83676:(e,n,t)=>{"use strict";let i,o,s,r,a;t.d(n,{$Q:()=>i,vJ:()=>o,qr:()=>s,wU:()=>r,as:()=>a}),function(e){e.promotedOnEntry="promoted_on_entry",e.promotedDetailsOnEntry="promoted_details_on_entry",e.channelOnEntry="channel_on_entry",e.channelOnAfterContent="channel_on_after_content",e.upsellChannelOnEntry="upsell_channel_on_entry",e.upsellChannelOnAfterContent="upsell_channel_on_after_content"}(i||(i={})),function(e){e.goToExternal="go-to-external",e.goToChannelDetails="go-to-channel-details",e.goToChannelGuide="go-to-channel-guide",e.goToChannelFullscreen="go-to-channel-fullscreen",e.goToMovieDetails="go-to-movie-details",e.goToTVSeriesDetails="go-to-tv-series-details",e.goToVODCategoryDetails="go-to-vod-category-details",e.goToVODMovieDetails="go-to-vod-movie-details",e.goToVODSeriesDetails="go-to-vod-series-details",e.goToChannelCategoryDetails="go-to-channel-category-details"}(o||(o={})),function(e){e.toast="toast",e.modal="modal",e.videoToast="videoToast"}(s||(s={})),function(e){e.colorLogoPNG="colorLogoPNG",e.featuredImage="featuredImage"}(r||(r={})),function(e){e.square="square",e.wide="wide"}(a||(a={}))},2759:(e,n,t)=>{"use strict";t.d(n,{q:()=>r,v:()=>a});var i=t(96156);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e){let n="";return Object.keys(e).length>0&&(n=JSON.stringify(Object.keys(e).reduce(((n,t)=>(n.push([t,e[t].impressionsPromotionVideo,e[t].impressionsChannelOnAfterContent,e[t].impressionsPromotedOnEntry,e[t].ctaSubmitsChannelOnAfterContent,e[t].ctaSubmitsPromotedOnEntry,e[t].ctaDismissesPromotedOnEntry,e[t].ctaDismissesChannelOnAfterContent]),n)),[]))),n}function a(e){const n=JSON.parse(e);return(null==n?void 0:n.length)>0&&n.every((e=>function(e){if(8!==e.length)return!1;if("string"!=typeof e[0])return!1;for(let n=1;n<=7;n++)if("number"!=typeof e[n])return!1;return!0}(e)))?n.reduce(((e,n)=>s(s({},e),{},{[n[0]]:{impressionsPromotionVideo:n[1],impressionsChannelOnAfterContent:n[2],impressionsPromotedOnEntry:n[3],ctaSubmitsChannelOnAfterContent:n[4],ctaSubmitsPromotedOnEntry:n[5],ctaDismissesPromotedOnEntry:n[6],ctaDismissesChannelOnAfterContent:n[7]}})),{}):{}}},68234:(e,n,t)=>{"use strict";t.d(n,{o:()=>h});var i=t(52249),o=t(29626),s=t(41782),r=t(92299),a=t(37855),c=t(64687),l=t(75203),d=t(24970),u=t(91757),g=t(74552),y=t(73482),p=t(93106),m=t(32851),v=t(80535),f=t(83676),D=t(1531),E=t(76511);const I=(0,c.gV)("/app/src/modules/svodUpsell/sagas/checkUpsellCampaign.ts");function*h(e){const n=yield(0,d.Ys)(o.je),t=yield(0,d.Ys)(i.Fh);if(!n||t)return;let c=yield(0,d.RE)([localStorage,"getItem"],"ptv-upsellcampaigns");c||(c="[]");const h=yield(0,d.fw)("plutoTVAPIService");try{const[n,t]=yield(0,d.S3)([(0,d.RE)([h,h.SVODUpsellCampaigns]),(0,l.A)(2e3)]);if(t)return;yield(0,d.gz)((0,p.t)({bootstrapData:e,upsellCampaignsData:n,localStorageData:c}))}catch{return}if(!(yield(0,d.Ys)(E.Wy)))return;const T=yield(0,d.Ys)(D.A4);yield(0,d.gz)(r.F.request({content:{ID:T,type:a.Ab.UPSELL_PROMOTION_VIDEO}}));const P=yield(0,d.Ys)(o.Ro);P&&(yield(0,d.rM)(S,T));const[A,C]=yield(0,d.S3)([(0,d.qn)((0,u.getType)(s.M.success)),(0,d.qn)((0,u.getType)(v.no)),(0,d.qn)((0,u.getType)(s.M.failure)),(0,d.qn)((0,u.getType)(r.F.failure))]);A&&(yield(0,d.gz)((0,y.AA)({campaignID:T})),P?yield(0,d.gz)((0,v.oT)({currentPromotionMessageID:f.$Q.promotedOnEntry})):(yield(0,d.gz)((0,m.v)({currentPromotionMessageID:f.$Q.promotedOnEntry})),yield(0,d.gz)((0,v.uV)({campaignID:T}))),yield(0,d.gz)((0,g.M)())),C&&I.log("clicked CTA, ending SVOD saga")}function*S(e){yield(0,l.A)(5e3),yield(0,d.gz)((0,m.v)({currentPromotionMessageID:f.$Q.promotedOnEntry})),yield(0,d.gz)((0,v.uV)({campaignID:e}))}},1531:(e,n,t)=>{"use strict";t.d(n,{M7:()=>r,Qr:()=>a,A4:()=>c,Zo:()=>l,tS:()=>d,je:()=>u});var i=t(8247),o=t(39629),s=t(29152);function r(e){const n=Date.now();return e.svodUpsell.upsellCampaigns.find((t=>{const i=(0,s.VN)(e,{campaignID:t.campaignID}),r=(0,s.Zt)(e,{campaignID:t.campaignID}),a=(0,s.Qc)(e,{campaignID:t.campaignID}),c=(0,s.MT)(e,{campaignID:t.campaignID}),l=(0,s.TI)(e,{campaignID:t.campaignID});return(0,o.K)(n,t.start,t.end)&&!(i&&r&&a&&c&&l)}))}function a(e){return Boolean(r(e))}function c(e){const n=r(e);return null==n?void 0:n.campaignID}function l(e,{campaignID:n}){return e.svodUpsell.upsellCampaigns.find((e=>e.campaignID===n))}function d(e){var n;const t=r(e);return null===(n=l(e,{campaignID:null==t?void 0:t.campaignID}))||void 0===n?void 0:n.promotedChannelID}function u(e,{slug:n}){var t;const o=r(e);return(null===(t=l(e,{campaignID:null==o?void 0:o.campaignID}))||void 0===t?void 0:t.promotedChannelID)===(0,i.X)(e,{slug:n})}},53865:(e,n,t)=>{"use strict";function i(e){return e.svodUpsell.currentPromotionMessageID}function o(e){return!!e.svodUpsell.currentPromotionMessageID}t.d(n,{h:()=>i,H:()=>o})},31280:(e,n,t)=>{"use strict";t.d(n,{Yg:()=>d,Re:()=>y,tW:()=>p,v$:()=>m,cE:()=>v,Sm:()=>f,Zj:()=>D,LG:()=>E,BT:()=>I,ji:()=>h,xP:()=>S,Wd:()=>T});var i=t(29626),o=t(47776),s=t(35844),r=t(83676),a=t(1531),c=t(53865),l=t(29152);function d(e){const n=(0,a.Qr)(e),t=(0,s.mJ)(e);if(n&&t){if((0,o.i)(e)===(0,a.tS)(e)){const n=(0,l.ox)(e),t=function(e){var n;return null===(n=(0,a.M7)(e))||void 0===n?void 0:n.promotionMessages.some((e=>e.id===r.$Q.upsellChannelOnAfterContent))}(e),o=(0,i.Qy)(e);return t&&!n&&o?r.$Q.upsellChannelOnAfterContent:null}const n=(0,l.eO)(e),t=function(e){var n;return null===(n=(0,a.M7)(e))||void 0===n?void 0:n.promotionMessages.some((e=>e.id===r.$Q.channelOnAfterContent))}(e),s=(0,l.Ak)(e),c=(0,i._i)(e);return!t||n||s||!c?null:r.$Q.channelOnAfterContent}return null}function u(e){const n=(0,a.M7)(e),t=(0,c.h)(e);return null==n?void 0:n.promotionMessages.find((e=>e.id===t))}function g(e){const n=u(e);return null==n?void 0:n.images}function y(e){var n;return null===(n=g(e).find((e=>e.type===r.wU.colorLogoPNG&&e.style===r.as.square)))||void 0===n?void 0:n.url}function p(e){var n;return null===(n=g(e).find((e=>e.type===r.wU.colorLogoPNG&&e.style===r.as.wide)))||void 0===n?void 0:n.url}function m(e){var n;return null===(n=g(e).find((e=>e.type===r.wU.featuredImage&&e.style===r.as.square)))||void 0===n?void 0:n.url}function v(e){var n;return null===(n=g(e).find((e=>e.type===r.wU.featuredImage&&e.style===r.as.wide)))||void 0===n?void 0:n.url}function f(e){const n=u(e);return null==n?void 0:n.title}function D(e){const n=u(e);return null==n?void 0:n.subtitle}function E(e){const n=u(e);return null==n?void 0:n.ctaType}function I(e){const n=u(e);return null==n?void 0:n.ctaData}function h(e){const n=u(e);return null==n?void 0:n.ctaLabelText}function S(e){const n=u(e);return null==n?void 0:n.ctaDismissLabelText}function T(e){const n=(0,a.M7)(e),t=null==n?void 0:n.promotionMessages.find((e=>e.id===r.$Q.upsellChannelOnEntry));return null==t?void 0:t.ctaData}},76511:(e,n,t)=>{"use strict";t.d(n,{yu:()=>a,CX:()=>c,Wy:()=>l});var i=t(29626),o=t(1531),s=t(29152);function r(e){const n=(0,o.M7)(e);return null==n?void 0:n.promotionVideo}function a(e){const n=r(e);return null==n?void 0:n.url}function c(e){const n=r(e);return null==n?void 0:n.duration}function l(e){const n=(0,o.M7)(e);if(!n)return!1;const t=(0,s.VN)(e,{campaignID:n.campaignID});return!(!(0,i.E7)(e)||0===n.maxImpressionsPromotionVideo||t||!n.promotionVideo)}},29152:(e,n,t)=>{"use strict";t.d(n,{N4:()=>r,VN:()=>a,Zt:()=>c,Qc:()=>l,MT:()=>d,TI:()=>u,eO:()=>g,ox:()=>y,Ak:()=>p,p0:()=>m});var i=t(2759),o=t(1531);function s(e){return e.svodUpsell.userInteractions}function r(e){return(0,i.q)(e.svodUpsell.userInteractions)}function a(e,{campaignID:n}){var t;const i=(0,o.Zo)(e,{campaignID:n});return(null===(t=s(e)[n])||void 0===t?void 0:t.impressionsPromotionVideo)>=i.maxImpressionsPromotionVideo}function c(e,{campaignID:n}){var t;const i=(0,o.Zo)(e,{campaignID:n});return(null===(t=s(e)[n])||void 0===t?void 0:t.impressionsChannelOnAfterContent)>=i.maxImpressionsContentEnd}function l(e,{campaignID:n}){var t;return(null===(t=s(e)[n])||void 0===t?void 0:t.impressionsPromotedOnEntry)>=4}function d(e,{campaignID:n}){var t;return(null===(t=s(e)[n])||void 0===t?void 0:t.ctaDismissesPromotedOnEntry)>=2}function u(e,{campaignID:n}){var t;return(null===(t=s(e)[n])||void 0===t?void 0:t.ctaSubmitsPromotedOnEntry)>=1}function g(e){return e.svodUpsell.sessionUserInteractions.hasSeenChannelOnAfterContent}function y(e){return e.svodUpsell.sessionUserInteractions.hasSeenUpsellChannelOnAfterContent}function p(e){return c(e,{campaignID:(0,o.A4)(e)})}function m(e){const n=y(e),t=g(e);return n&&t}},81007:(e,n,t)=>{"use strict";t.d(n,{H:()=>s,c:()=>r});var i=t(23869),o=t(91757);const s=(0,o.createAction)("@tracking/EVENT",(({category:e,name:n,featureType:t,label:o,value:s,jsonExtensions:r,extra:a,linkID:c})=>({timestamp:(0,i.Fm)(new Date),category:e,name:n,featureType:t,label:o,value:s,jsonExtensions:r,extra:a,linkID:c})))(),r=({category:e,name:n,linkID:t,featureTypeResolver:s=(()=>null),labelResolver:r=(()=>null),valueResolver:c=(()=>null),jsonExtensionsResolver:l=(()=>{}),extraResolver:d=(()=>{})})=>(0,o.createAction)("@tracking/EVENT",((...o)=>({timestamp:(0,i.Fm)(new Date),category:e,name:n,linkID:t,featureType:s(...o),label:r(...o),value:c(...o),jsonExtensions:a(l(...o)),extra:d(...o)})))();function a(e){if(void 0===e)return;const n={ver:"2.0",data:{screenID:e.screenID}};return e.screenElementID&&(n.data.screenElementId=e.screenElementID),e.screenElementDetail&&(n.data.screenElementDetail=e.screenElementDetail),e.positionID&&(n.data.positionID=e.positionID),n}},71445:(e,n,t)=>{"use strict";t.d(n,{F:()=>r});var i=t(81007),o=t(71599),s=t(28606);const r=(0,i.c)({category:s.W,name:"impressionNonAd",featureTypeResolver:o.J,jsonExtensionsResolver:o.x})},28606:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});const i="background"},94006:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});const i="browse"},1358:(e,n,t)=>{"use strict";t.d(n,{d:()=>s});var i=t(81007),o=t(94006);const s=(0,i.c)({category:o.W,name:"linkClick",linkID:"embed_button"})},95345:(e,n,t)=>{"use strict";t.d(n,{T:()=>s});var i=t(81007),o=t(94006);const s=(0,i.c)({category:o.W,name:"vodEpisodePreview",labelResolver:({contentID:e})=>e})},38994:(e,n,t)=>{"use strict";t.d(n,{o:()=>s});var i=t(81007),o=t(94006);const s=(0,i.c)({category:o.W,name:"vodSeriesPreview",labelResolver:({contentID:e})=>e})},36021:(e,n,t)=>{"use strict";t.d(n,{r:()=>r});var i=t(81007),o=t(57441),s=t(66664);const r=(0,i.c)({category:s.W,name:"cmError",labelResolver:({errorDescription:e="na"})=>e,valueResolver:({errorCode:e})=>(0,o.v)(e)})},66664:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});const i="cm"},36438:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});const i="interact"},25375:(e,n,t)=>{"use strict";t.d(n,{$:()=>r});var i=t(81007),o=t(71599),s=t(36438);const r=(0,i.c)({category:s.W,name:"userAction",featureTypeResolver:o.J,jsonExtensionsResolver:o.x})},65855:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});const i="tos"},25533:(e,n,t)=>{"use strict";t.d(n,{w:()=>s});var i=t(81007),o=t(65855);const s=(0,i.c)({category:o.W,name:"policyAccepted",labelResolver:({policy:e})=>`policy=${e}`})},24244:(e,n,t)=>{"use strict";t.d(n,{U:()=>s});var i=t(81007),o=t(65855);const s=(0,i.c)({category:o.W,name:"policyViewed",labelResolver:({policy:e})=>`policy=${e}`})},25578:(e,n,t)=>{"use strict";t.d(n,{X:()=>s});var i=t(81007),o=t(65855);const s=(0,i.c)({category:o.W,name:"policyViewedAccepted",labelResolver:({policy:e})=>`policy=${e}`})},43575:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});const i=(0,t(91757).createAction)("@tracking/KIDS_CONSTRAINED_UPDATE")()},13192:(e,n,t)=>{"use strict";t.d(n,{N:()=>i});const i=(0,t(91757).createAction)("@tracking/KOCHAVA/ACTIVE_USERS")()},26036:(e,n,t)=>{"use strict";t.d(n,{k:()=>i});const i=(0,t(91757).createAction)("@tracking/KOCHAVA/MEDIA_MINUTES")()},47198:(e,n,t)=>{"use strict";t.d(n,{u:()=>i});const i=(0,t(91757).createAction)("@tracking/KOCHAVA/MEDIA_PLAY")()},9519:(e,n,t)=>{"use strict";t.d(n,{M:()=>i});const i=(0,t(91757).createAction)("@tracking/SET_LAST_GA_PATH")()},66695:(e,n,t)=>{"use strict";t.d(n,{m:()=>i});const i=(0,t(91757).createAction)("@tracking/TRACKED_NAVIGATE")()},43264:(e,n,t)=>{"use strict";t.d(n,{W:()=>Zs});var i=t(29368),o=t(90314),s=t(9942),r=t(70789),a=t(17522),c=t(51612),l=t(91757),d=t(81007),u=t(43575),g=t(26036);const y=(0,l.createAction)("@tracking/RESET_ACCOUNT_ID")(),p=(0,l.createAction)("@tracking/SET_ACCOUNT_ID")(),m=(0,l.createAction)("@tracking/SET_CONTENT_DATA")();var v,f=t(9519);const D={data:{accountID:"na",isAutoPlay:!1,contentID:null,clipID:"na",episodeID:"na",programTimelineID:"na",utmCampaign:"na",utmContent:"na",utmMedium:"na",utmSource:"na",utmTerm:"na",referrer:(null===(v=t.g.window)||void 0===v?void 0:v.document.referrer)||"na",section:"na",previousSection:"na",channelID:"na",previousChannelID:"na",cmPodDuration:0,cmPodIndex:0,cmPlutoID:"na",cmDurationOriginal:0,cmDurationServed:0,cmStarted:null,cmPodCounter:0,cmImpressionCounter:0,cmImpressionIndex:-1},partner:{welcome:null,success:null,kidsModeExit:null},kochava:{contentID:null,contentType:null,msConsumed:0,previous:{contentID:null,contentType:null}},phases:{appLoaded:!1,restartingSession:!1},kidsMode:!1,isKidsContent:null};var E=t(18172);const I=(0,E.ZP)(((e,{payload:{accountID:n}})=>{e.data.accountID=n})),h=(0,E.ZP)((e=>{e.data.accountID="na"})),S=(0,E.ZP)((e=>{e.phases.restartingSession=!1})),T=(0,E.ZP)((e=>{e.phases.restartingSession=!0})),P=(0,E.ZP)((e=>{e.phases.restartingSession=!1})),A=(0,E.ZP)((e=>{e.phases.restartingSession=!1}));var C=t(37855),R=t(78706),O=t(23869),k=t(72150);const b=(0,E.Uy)(((e,{payload:n})=>{const{cmID:t=e.data.cmPlutoID,type:i,cmDuration:o,cmImpressionIndex:s,cmPodDuration:r}=n;switch(e.data.cmPlutoID=t,i){case C.Yp.POD_START:case C.Yp.POD_ALREADY_STARTED:e.data.cmPodDuration=r,e.data.cmPodCounter=e.data.cmPodCounter+1;break;case C.Yp.POD_END:e.data.cmPodDuration===D.data.cmPodDuration&&(e.data.cmPodDuration=r);break;case C.Yp.BEGIN:e.data.cmImpressionIndex!==s&&(e.data.cmImpressionCounter=e.data.cmImpressionCounter+1),e.data.cmDurationOriginal=o,e.data.cmImpressionIndex=s;break;case C.Yp.START:(0,k.z0)("numberAds",1),e.data.cmStarted=(0,O.Fm)(new Date);break;case C.Yp.FIRST_QUARTILE:case C.Yp.MIDPOINT:case C.Yp.THIRD_QUARTILE:case C.Yp.COMPLETE:e.data.cmStarted===D.data.cmStarted&&(e.data.cmStarted=(0,O.Fm)(new Date)),e.data.cmPlutoID===D.data.cmPlutoID&&(e.data.cmPlutoID=t),e.data.cmDurationOriginal===D.data.cmDurationOriginal&&(e.data.cmDurationOriginal=o),e.data.cmImpressionIndex===D.data.cmImpressionIndex&&(e.data.cmImpressionIndex=s);break;case C.Yp.END:e.data.cmStarted===D.data.cmStarted&&(e.data.cmStarted=(0,O.Fm)(new Date)),e.data.cmPlutoID===D.data.cmPlutoID&&(e.data.cmPlutoID=t),e.data.cmDurationOriginal===D.data.cmDurationOriginal&&(e.data.cmDurationOriginal=o),e.data.cmImpressionIndex===D.data.cmImpressionIndex&&(e.data.cmImpressionIndex=s),e.data.cmStarted&&(e.data.cmDurationServed=(0,R.a5)(new Date,e.data.cmStarted));break;case C.Yp.CLEAR_CM_DATA:e.data.cmPodDuration=D.data.cmPodDuration,e.data.cmDurationOriginal=D.data.cmDurationOriginal,e.data.cmDurationServed=D.data.cmDurationServed,e.data.cmImpressionIndex=D.data.cmImpressionIndex,e.data.cmStarted=D.data.cmStarted}})),w=(0,E.ZP)(((e,{payload:{isKidsContent:n}})=>{e.isKidsContent=n})),M=(0,E.ZP)((e=>{e.kidsMode=!0})),_=(0,E.ZP)((e=>{e.kidsMode=!1})),q=(0,E.ZP)(((e,{payload:{contentID:n,contentType:t,msConsumed:i}})=>{const{contentID:o,contentType:s}=e.kochava;e.kochava.contentID=n,e.kochava.contentType=t,e.kochava.msConsumed=i,e.kochava.previous.contentID=o,e.kochava.previous.contentType=s}));var x=t(35357),z=t(64919);let j,N;!function(e){e.liveTV="live",e.onDemand="vod",e.settings="settings"}(j||(j={})),function(e){e.liveTV="live-tv",e.onDemand="on-demand",e.account="account"}(N||(N={}));const U=(0,E.ZP)(((e,{payload:{params:{module:n},query:t}})=>{if("na"===e.data.section)switch(n){case x.bC.liveTV:case x.bC.viral:e.data.section=j.liveTV;break;case x.bC.onDemand:e.data.section=j.onDemand;break;case x.bC.account:e.data.section=j.settings;break;default:e.data.section=j.liveTV}t&&("utm_campaign"in t&&(e.data.utmCampaign=(0,z.Z)(t.utm_campaign)),"utm_content"in t&&(e.data.utmContent=(0,z.Z)(t.utm_content)),"utm_medium"in t&&(e.data.utmMedium=(0,z.Z)(t.utm_medium)),"utm_source"in t&&(e.data.utmSource=(0,z.Z)(t.utm_source)),"utm_term"in t&&(e.data.utmTerm=(0,z.Z)(t.utm_term)),"referrer"in t&&"na"===e.data.referrer&&(e.data.referrer=t.referrer))})),V=(0,E.ZP)(((e,{payload:{ID:n,type:t}})=>{e.data.clipID="na",e.data.episodeID="na",e.data.programTimelineID="na";let i=n;i=t===C.Ab.ON_DEMAND_MOVIE||t===C.Ab.ON_DEMAND_SERIES_EPISODE?"vod":t===C.Ab.VIRAL?"viral":n,(i!==e.data.channelID||"vod"===i&&"vod"!==e.data.previousChannelID)&&(e.data.previousChannelID=e.data.channelID),e.data.channelID=i})),Y=(0,E.ZP)(((e,{payload:{path:n}})=>{e.lastGARoutePath=n})),L=(0,E.ZP)(((e,{payload:{data:n}})=>{e.partner=n.tracking})),Z=(0,E.ZP)(((e,n)=>{if("appLoaded"===n.payload.name&&(e.phases.appLoaded=!0),"sessionReset"===n.payload.name&&(e.data.episodeID="na",e.data.clipID="na",e.data.programTimelineID="na",e.data.previousChannelID="na",e.data.previousSection="na",e.data.cmPlutoID=D.data.cmPlutoID,e.data.cmPodCounter=D.data.cmPodCounter,e.data.cmPodIndex=D.data.cmPodIndex,e.data.cmPodDuration=D.data.cmPodDuration,e.data.cmDurationOriginal=D.data.cmDurationOriginal,e.data.cmImpressionCounter=D.data.cmImpressionCounter,e.data.cmImpressionIndex=D.data.cmImpressionIndex),"sectionSelect"===n.payload.name&&(e.data.previousSection=e.data.section,e.data.section=n.payload.label),"cmPodBegin"===n.payload.name&&(e.data.cmPodIndex=e.data.cmPodIndex+1),"videoRequest"===n.payload.name){const{contentID:t,autoPlay:i}=n.payload.extra;e.data.contentID!==t&&(e.data.isAutoPlay=i,e.data.contentID=t)}if("episodeStart"===n.payload.name&&n.payload.extra){const{episodeID:t,clipID:i,programTimelineID:o,resetPodIndex:s}=n.payload.extra;e.data.episodeID=t,e.data.clipID=i,e.data.programTimelineID=o,e.data.cmPlutoID=D.data.cmPlutoID,e.data.cmPodDuration=D.data.cmPodDuration,e.data.cmDurationOriginal=D.data.cmDurationOriginal,e.data.cmImpressionIndex=D.data.cmImpressionIndex,e.data.cmDurationServed=D.data.cmDurationServed,e.data.cmStarted=D.data.cmStarted,s&&(e.data.cmPodIndex=D.data.cmPodIndex)}if("clipStart"===n.payload.name&&n.payload.extra){const{episodeID:t,clipID:i,programTimelineID:o}=n.payload.extra;e.data.episodeID=t,e.data.clipID=i,e.data.programTimelineID=o}if("signInSuccessful"===n.payload.name){const{accountID:t}=n.payload.extra;e.data.accountID=t}if("signUpSuccessful"===n.payload.name){const{accountID:t}=n.payload.extra;e.data.accountID=t}e.lastEventTimestamp=Date.now()})),F=(0,l.createReducer)(D).handleAction(o.K.success,M).handleAction(o.K.failure,_).handleAction(c.K9.success,_).handleAction(c.K9.failure,_).handleAction(u.H,w).handleAction(a.E,b).handleAction(d.H,Z).handleAction(r.Q,U).handleAction(m,V).handleAction(i.JO.success,S).handleAction(i._h.request,T).handleAction(i._h.success,P).handleAction(i._h.failure,A).handleAction(f.M,Y).handleAction(y,h).handleAction(p,I).handleAction(g.k,q).handleAction(s.W,L);var $=t(64687),K=t(24970),Q=t(33114);const W="launch",X=(0,d.c)({category:W,name:"appLaunch"}),H=(0,d.c)({category:W,name:"appLoaded"}),G=(0,d.c)({category:W,name:"uILoaded"});var B=t(57441);const J="qos",ee=(0,d.c)({category:J,name:"appLoadError",labelResolver:({errorDescription:e="na"})=>e,valueResolver:({errorCode:e})=>(0,B.v)(e)}),ne=(0,d.c)({category:W,name:"bootstrapLoaded"}),te=(0,d.c)({category:W,name:"bootstrapRequest"});var ie=t(28606);const oe=(0,d.c)({category:ie.W,name:"videoLoaded"}),se=(0,d.c)({category:ie.W,name:"videoRequest",extraResolver:e=>e});var re=t(94006);const ae=(0,d.c)({category:re.W,name:"vodEpisodeWatch",labelResolver:({episodeID:e})=>e});var ce=t(92299),le=t(56297),de=t(23607);const ue=(0,$.gV)("/app/src/modules/tracking/sagas/appLaunch/video.ts");function*ge(){const e=yield(0,K.ZO)((0,l.getType)(de.x)),n=yield(0,K.ZO)((0,l.getType)(le.o));ue.log("waiting video request");const{payload:{content:{ID:t,type:i},autoPlay:o}}=yield(0,K.qn)((0,l.getType)(ce.F.request));[C.Ab.ON_DEMAND_MOVIE,C.Ab.ON_DEMAND_SERIES_EPISODE].includes(i)&&(ue.log("firing vod episode watch event"),yield(0,K.gz)(ae({episodeID:t}))),yield(0,K.gz)(m({ID:t,type:i})),yield(0,K.gz)(se({autoPlay:o,contentID:t})),ue.log("video requested"),ue.log("waiting video load");const[s]=yield(0,K.S3)([(0,K.qn)((0,l.getType)(ce.F.failure)),(0,K.qn)((0,l.getType)(ce.F.success))]);s?ue.log("video error"):(ue.log("waiting viral or stitcher session update"),yield(0,K.S3)([(0,K.qn)(e),(0,K.qn)(n)]),yield(0,K.gz)(oe()),ue.log("video loaded"))}const ye=(0,$.gV)("/app/src/modules/tracking/sagas/appLaunch/bootstrap.ts");function*pe(){yield(0,K.rM)(ge),ye.log("waiting application bootstrap start request"),yield(0,K.qn)((0,l.getType)(i.JO.request)),yield(0,K.gz)(te()),ye.log("application bootstrap requested"),ye.log("waiting application bootstrap start response"),yield(0,K.qn)((0,l.getType)(i.JO.success)),ye.log("application bootstrap responded"),yield(0,K.gz)(ne())}const me=(0,d.c)({category:J,name:"appLaunchTrack"}),ve=(0,$.gV)("/app/src/modules/tracking/sagas/appLaunch/track.ts");function*fe(e=1e3){for(;;)ve.log(`waiting ${e}ms to track launch`),yield(0,K.gw)(e),ve.log("launch track"),yield(0,K.gz)(me())}const De=(0,$.gV)("/app/src/modules/tracking/sagas/appLaunch/index.ts");function*Ee(){De.log("waiting application initialize request"),yield(0,K.qn)((0,l.getType)(Q.K.request)),De.log("starting track");const e=yield(0,K.rM)(fe);yield(0,K.gz)(X()),De.log("application initialize requested");const[n]=yield(0,K.S3)([(0,K.qn)((0,l.getType)(Q.K.failure)),(0,K.RE)(pe)]);var t;De.log("canceling track"),yield(0,K.al)(e),n?yield(0,K.gz)(ee({errorDescription:null===(t=n.payload.error)||void 0===t?void 0:t.message})):(De.log("waiting ui load"),yield(0,K.gz)(G()),De.log("ui loaded"),yield(0,K.gz)(H()))}var Ie=t(66320);const he=(0,d.c)({category:ie.W,name:"channelGuideLoaded"}),Se=(0,d.c)({category:ie.W,name:"channelGuideRequest"}),Te=(0,$.gV)("/app/src/modules/tracking/sagas/channelGuide/root.ts");function*Pe(){Te.log("waiting channel guide request"),yield(0,K.qn)((0,l.getType)(Ie.N.request)),yield(0,K.gz)(Se()),Te.log("waiting channel guide load"),yield(0,K.qn)((0,l.getType)(Ie.N.success)),yield(0,K.gz)(he())}var Ae=t(50457),Ce=t(49397),Re=t(71445),Oe=t(60595);function*ke(){yield(0,K.ib)((0,l.getType)(Ce.u),(function*(){const e=yield(0,K.Ys)(Oe.Gn);yield(0,K.gz)((0,Re.F)({jsonExtensions:{screenID:e,screenElementID:Ae.C.turnonkidsmode}}))}))}var be=t(32851),we=t(83676),Me=t(48932),_e=t(29626),qe=t(53865),xe=t(79094);let ze;var je;function Ne(e,{featureType:n}){const t=function(e){var n;return null===(n=e.tracking)||void 0===n?void 0:n.kidsMode}(e),i=[];return(0,xe.j)(e)?i.push(je.LoggedInUser):i.push(je.LoggedOutUser),t&&i.push(je.KidsMode),{ver:"1.0",data:{featureTypeID:i}}}function Ue(e){const n=(0,Oe.Gn)(e);return(0,_e.rY)(e)&&n===Oe._0.vodhome?ze.HeroCarousel:null}function Ve(e){switch((0,qe.h)(e)){case we.$Q.promotedOnEntry:case we.$Q.promotedDetailsOnEntry:case we.$Q.channelOnAfterContent:return ze.SamplerPromoPPlus;case we.$Q.upsellChannelOnAfterContent:case we.$Q.upsellChannelOnEntry:return ze.UpsellPPlus;default:return null}}!function(e){e.HeroCarousel="herocarousel",e.UpsellPPlus="upsellpplus",e.SamplerPromoPPlus="samplerpromopplus",e.KidsMode="kidsmode"}(ze||(ze={})),function(e){e.KidsMode="10001",e.SharePlay="10002",e.OnboardVidWatched="10003",e.HeroCarousel="10004",e.UpsellPPlus="10005",e.SamplerPromoPPlus="10006",e.LoggedInUser="10011",e.LoggedOutUser="10012"}(je||(je={}));var Ye=t(18040),Le=t(66152);function Ze(e){const n=(0,Le.lw)(e),t=(0,Le.H6)(e);return n||t?Ae.C.lowerthird:Ae.C.popover}function Fe(){return(0,Ye.kD)()?Ae.C.popover:Ae.C.lowerthird}var $e=t(47776);function*Ke(){yield(0,K.ib)((0,l.getType)(be.v),(function*({payload:{currentPromotionMessageID:e}}){let n;const t=yield(0,K.Ys)($e.i);if(!t)return;const i=yield(0,K.Ys)(Me.F,{contentID:t}),o=yield(0,K.Ys)(Ve);switch(e){case we.$Q.upsellChannelOnAfterContent:case we.$Q.channelOnAfterContent:n=yield(0,K.Ys)(Ze),yield(0,K.gz)((0,Re.F)({jsonExtensions:{screenID:Oe._0.endcard,screenElementID:n,screenElementDetail:[{name:i,value:t}]},featureType:o}));break;case we.$Q.promotedOnEntry:const e=yield(0,K.Ys)(Oe.Gn);n=yield(0,K.Ys)(Fe),yield(0,K.gz)((0,Re.F)({jsonExtensions:{screenID:e,screenElementID:n,screenElementDetail:[{name:i,value:t}]},featureType:o}))}}))}function*Qe(){yield(0,K.rM)(ke),yield(0,K.rM)(Ke)}var We=t(84361),Xe=t(76862),He=t(61194),Ge=t(20656),Be=t(66695),Je=t(79515);const en=(0,$.gV)("/app/src/modules/tracking/sagas/kidsConstrained/root.ts");function*nn({payload:{routeID:e,params:n}}){(yield(0,K.Ys)(Je.EF))&&(yield(0,K.gz)((0,Be.m)({routeID:e,params:n})))}function*tn(e){const{payload:{params:{slug:n},routeID:t}}=e;if(n){if([x.SX.liveTVChannel,x.SX.onDemandMovie,x.SX.onDemandSeriesEpisode].includes(t)){const e=yield(0,K.Ys)(He.i,{routeID:t,slug:n});en.log("kids constrained update:",e),yield(0,K.gz)((0,u.H)({isKidsContent:e}))}x.SX.viral===t&&(yield(0,K.Ys)(Ge.u,{slug:n}))&&(en.log("kids constrained update:",!1),yield(0,K.gz)((0,u.H)({isKidsContent:!1})))}}function*on(e){const{payload:{content:n}}=e,t=yield(0,K.Ys)(He.b,n);en.log("kids constrained update:",t),yield(0,K.gz)((0,u.H)({isKidsContent:t}))}function*sn(){if(yield(0,K.RE)(We.R),yield(0,K.Ys)(_e.a5)){const e=yield(0,K.ZO)((0,l.getType)(ce.F.request)),n=yield(0,K.ZO)((0,l.getType)(r.Q)),t=yield(0,K.ZO)((0,l.getType)(c.K$.success)),i=yield(0,K.ZO)((0,l.getType)(c.K9.success)),[o]=yield(0,K.S3)([(0,K.qn)(t),(0,K.qn)(i)]);if(o)en.log("kids constrained update:",!0),yield(0,K.gz)((0,u.H)({isKidsContent:!0}));else{const n=yield(0,K.qn)(e);yield(0,K.RE)(on,n)}for(i.close(),e.close();;){const[e,i]=yield(0,K.S3)([(0,K.qn)(n),(0,K.qn)(t)]);i?(en.log("kids constrained update:",!0),yield(0,K.gz)((0,u.H)({isKidsContent:!0}))):e&&((yield(0,K.Ys)(Xe.n))||(yield(0,K.RE)(tn,e),yield(0,K.RE)(nn,e)))}}else yield(0,K.gz)((0,u.H)({isKidsContent:!1}))}var rn=t(13192),an=t(75203);function*cn(){yield(0,an.A)(15e3),yield(0,K.gz)((0,rn.N)())}const ln=(0,l.createAction)("@tracking/OMSDK/PLAYER_STATE_CHANGE")();var dn=t(84417),un=t(16728),gn=t(92305),yn=t(29849);function*pn(){let e=yield(0,K.Ys)(Le.yv);for(;;){yield(0,K.S3)([(0,K.qn)((0,l.getType)(gn.k.success)),(0,K.qn)((0,l.getType)(un.T.success)),(0,K.qn)((0,l.getType)(dn.W)),(0,K.qn)((0,l.getType)(yn.B))]);const n=yield(0,K.Ys)(Le.yv);n!==e&&(e=n,yield(0,K.gz)(ln({playerState:n})))}}function*mn(){(yield(0,K.Ys)(_e.GL))&&(yield(0,K.rM)(pn))}var vn=t(52249),fn=t(71599);const Dn=(0,d.c)({category:ie.W,name:"pageView",featureTypeResolver:fn.J,jsonExtensionsResolver:fn.x});var En=t(32413);const In=(0,$.gV)("/app/src/modules/tracking/sagas/pageViewing/confirmAccount.ts");function*hn(){(yield(0,K.Ys)(vn.Pt))&&(In.log(`tracking screenID - ${Oe._0.deviceactivationconfirmsignout}`),yield(0,K.gz)(Dn({jsonExtensions:{screenID:Oe._0.deviceactivationconfirmsignout}})))}function*Sn(){yield(0,K.ib)((0,l.getType)(En.c),hn)}var Tn=t(44171);function*Pn(){yield(0,K.gz)(Dn({jsonExtensions:{screenID:Oe._0.passwordresetlinksent}}))}function*An(){yield(0,K.ib)((0,l.getType)(Tn.s.success),Pn)}var Cn=t(78073);const Rn=(0,$.gV)("/app/src/modules/tracking/sagas/pageViewing/pageView.ts");function*On(){let e=null;function*n(){yield(0,K.RE)(We.R);const n=yield(0,K.Ys)(Oe.Gn),t=yield(0,K.Ys)(Ue);n&&n!==e&&(e=n,Rn.log(`tracking screenID - ${n}`),yield(0,K.gz)(Dn({jsonExtensions:{screenID:n},featureType:t})))}yield(0,K.ib)((0,l.getType)(r.Q),n),yield(0,K.ib)((0,l.getType)(Cn.p.success),n)}var kn=t(64088);function*bn(){const e=yield(0,K.Ys)(Oe.Iw);e&&(yield(0,K.gz)(Dn({jsonExtensions:{screenID:e}})))}function*wn(){yield(0,K.ib)((0,l.getType)(kn.c),bn)}function*Mn(){yield(0,K.ib)((0,l.getType)(be.v),(function*({payload:{currentPromotionMessageID:e}}){const n=yield(0,K.Ys)(Ve);switch(e){case we.$Q.upsellChannelOnAfterContent:case we.$Q.channelOnAfterContent:yield(0,K.gz)(Dn({jsonExtensions:{screenID:Oe._0.endcard},featureType:n}));break;case we.$Q.promotedOnEntry:const e=yield(0,K.Ys)(Oe.EZ);yield(0,K.gz)(Dn({jsonExtensions:{screenID:e},featureType:n}))}}))}var _n=t(21193),qn=t(64986);const xn=(0,$.gV)("/app/src/modules/tracking/sagas/pageViewing/toogleFullScreen.ts");function*zn(){function*e(e){xn.log(`tracking screenID - ${e}`),yield(0,K.gz)(Dn({jsonExtensions:{screenID:e}}))}function*n(){const n=yield(0,K.Ys)(Oe.Gn);yield(0,K.RE)(e,n)}function*t(){const n=yield(0,K.Ys)(_n.E);yield(0,K.RE)(e,n)}yield(0,K.ib)((0,l.getType)(gn.k.success),n),yield(0,K.ib)((0,l.getType)(qn.i),n),yield(0,K.ib)((0,l.getType)(un.T.success),t),yield(0,K.ib)((0,l.getType)(qn.P),t)}function*jn(){yield(0,K.rM)(On),yield(0,K.rM)(zn),yield(0,K.rM)(Mn),yield(0,K.rM)(Sn),yield(0,K.rM)(wn),yield(0,K.rM)(An)}var Nn=t(51114),Un=t(52298),Vn=t(57872),Yn=t(40478),Ln=t(54785),Zn=t(55257),Fn=t(72180),$n=t(4762),Kn=t(84018);function Qn(e){return(0,Kn.k)((0,Yn.G)(e)||"na",200)}function Wn(e){return(0,Kn.k)((0,Ln.b)(e)||"na",50)}function Xn(e){return(0,Kn.k)((0,$n.b)(e)||"na",200)}function Hn(e){return(0,Kn.k)((0,Zn.m)(e)||"na",50)}function Gn(e){return(0,Kn.k)((0,Fn.G)(e)||"na",50)}function Bn(e){return(0,Kn.k)((0,Nn.mn)(e)||"",50)}function Jn(e){const n=(0,Vn.q)(e);return null!==n&&n in{"app-windows":"3x"}?{"app-windows":"3x"}[n]:"0n"}function et(e){const n=(0,Vn.q)(e);return null!==n&&n in{"app-windows":"windows","app-oculus":"oculus"}?{"app-windows":"windows","app-oculus":"oculus"}[n]:"na"}var nt=t(96156),tt=t(75119),it=t(37401);function ot(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function st(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ot(Object(t),!0).forEach((function(n){(0,nt.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ot(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const rt=(0,$.gV)("/app/src/modules/tracking/sagas/processEvents/sendOdinEvents.ts");function at(e){const n=Date.now().toString();return e.data=e.data.map((e=>st(st({},e),{},{stm:n}))),e}function*ct(e){const n=yield(0,K.fw)("snowplowCoreInstance");return{data:e.map((e=>n.trackUnstructEvent({data:e,schema:"iglu:com.plutotv/pluto_events/jsonschema/1-0-0"}).build())),schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4"}}function*lt(e,n){const i=new Blob([JSON.stringify(e)],{type:"application/json"});yield(0,K.RE)([t.g.navigator,t.g.navigator.sendBeacon],n,i)}function dt(){return t.g.navigator,!1}function*ut(e){try{const n=yield(0,K.Ys)(tt.RZ);if(yield(0,K.RE)(dt)){const t=at(e);rt.log("sending odin events with beaconApi",t),yield(0,K.RE)(lt,t,n),rt.log("odin events sent successfuly with beaconApi",t)}else{const t=at(e);rt.log("sending odin events with fetchApi",t);const i=yield(0,K.RE)(fetch,n,{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"});if(!1===i.ok){const e=`Response ${i.status}: ${JSON.stringify({endpointUrl:n,finalPayload:t})}`;throw new Error(e)}rt.log("odin events sent successfuly",t)}}catch(n){throw rt.error("failed to send odin event with fetchApi, will retry in 5000ms",{payload:e,err:(0,it.X)(n)}),n}}function*gt(e){if(e.length>0){rt.log("process event",e);try{const n=yield(0,K.RE)(ct,e);yield(0,K.XD)(5,5e3,ut,n)}catch(e){rt.error("Error sending beacon ",e)}}}var yt=t(59828),pt=t(71376);function mt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function vt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mt(Object(t),!0).forEach((function(n){(0,nt.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const ft=(0,$.gV)("/app/src/modules/tracking/sagas/processEvents/sendPhoenixEvents.ts");function Dt(e){return vt(vt({},e),{},{featureTypeExtension:void 0,jsonExtensions:void 0,userAgent:e.clientUserAgent,eventOccurredTimestamp:(0,yt.C8)(e.eventOccurredTimestamp),eventEmittedTimestamp:(0,yt.C8)(new Date)})}function*Et(e){if(e.length>0){ft.log("process event",e);for(const n of e)yield(0,K.XD)(5,5e3,St,n)}}function*It(e,n){const i=new Blob([(0,pt.vE)(e)],{type:"application/x-www-form-urlencoded"});yield(0,K.RE)([t.g.navigator,t.g.navigator.sendBeacon],n,i)}function ht(){return t.g.navigator,!1}function*St(e){try{const n="https://s.pluto.tv/";if(yield(0,K.RE)(ht)){const t=yield(0,K.RE)(Dt,e);ft.log("sending phoenix events with beaconApi",t),ft.log("logBeacons: sending phoenix events with beaconApi",t,"logBeacons"),yield(0,K.RE)(It,t,n),ft.log("phoenix events sent successfuly with beaconApi",t),ft.log("logBeacons: phoenix events sent successfuly with beaconApi",t,"logBeacons")}else{const t=yield(0,K.RE)(Dt,e);ft.log("sending phoenix events with fetchApi",t),ft.log("logBeacons: sending phoenix events with fetchApi",t,"logBeacons");const i=yield(0,K.RE)(fetch,n,{body:(0,pt.vE)(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!1===i.ok){const e=`Response ${i.status}: ${JSON.stringify({endpointURL:n,finalPayload:t})}`;throw new Error(e)}ft.log("phoenix events sent successfuly",t),ft.log("logBeacons: phoenix events sent successfuly",t,"logBeacons")}}catch(n){throw ft.error("failed to send phoenix event, will retry in 5000ms",{payload:e,err:(0,it.X)(n)}),n}}const Tt=(0,d.c)({category:ie.W,name:"sessionReset",labelResolver:({oldSessionID:e})=>e});function Pt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function At(){let e=0;return{getNext:()=>++e,reset:()=>{e=0}}}function Ct(e,n){return n.filter((([e])=>Boolean(e))).map((([n])=>("sessionReset"===n.eventName&&e.reset(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pt(Object(t),!0).forEach((function(n){(0,nt.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({hitID:e.getNext()},n))))}var Rt=t(76077);const Ot=(0,$.gV)("/app/src/modules/tracking/sagas/processEvents/utils/snowplowInstance.ts");function kt(e){const n=(0,Rt.i)(!0);return n.setTrackerVersion("js-3.0.0"),n.setAppId(e),n.setPlatform("web"),Ot.log("snowplow setup using the following params",{appID:e,trackerVersion:"js-3.0.0",platform:"web",isProduction:!0}),n}const bt=(0,$.gV)("/app/src/modules/tracking/sagas/processEvents/batch.ts");function*wt(e){const n=yield(0,K.RE)(At);yield(0,K.RE)(We.R);const t=yield(0,K.Ys)(Jn),i=yield(0,K.RE)(kt,t);for(yield(0,K.v)({snowplowCoreInstance:i});;){const t=yield(0,K.$6)([(0,K.S3)([(0,K.qn)(e),(0,an.A)(0)]),(0,K.S3)([(0,K.qn)(e),(0,an.A)(0)]),(0,K.S3)([(0,K.qn)(e),(0,an.A)(0)]),(0,K.S3)([(0,K.qn)(e),(0,an.A)(0)]),(0,K.S3)([(0,K.qn)(e),(0,an.A)(0)])]),i=yield(0,K.RE)(Ct,n,t);i.length&&bt.log("process event",i),yield(0,K.rM)(gt,i),yield(0,K.rM)(Et,i),yield(0,an.A)(1e3)}}var Mt=t(14950),_t=t(79658),qt=t(35966),xt=t(66664);const zt="watch";function jt(e){var n,t;return null!==(n=null===(t=e.tracking)||void 0===t?void 0:t.data.cmDurationOriginal)&&void 0!==n?n:0}function Nt(e){var n,t;return null!==(n=null===(t=e.tracking)||void 0===t?void 0:t.data.cmImpressionCounter)&&void 0!==n?n:0}function Ut(e){var n,t;return null!==(n=null===(t=e.tracking)||void 0===t?void 0:t.data.cmImpressionIndex)&&void 0!==n?n:-1}function Vt(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.cmPlutoID)||"",200)}function Yt(e){var n,t;return null!==(n=null===(t=e.tracking)||void 0===t?void 0:t.data.cmPodCounter)&&void 0!==n?n:0}function Lt(e){var n,t;return null!==(n=null===(t=e.tracking)||void 0===t?void 0:t.data.cmPodDuration)&&void 0!==n?n:0}function Zt(e){var n,t;return null!==(n=null===(t=e.tracking)||void 0===t?void 0:t.data.cmPodIndex)&&void 0!==n?n:-1}function Ft(e,{trackingEventAction:n}){const t={cmPodCounter:Yt(e),cmPodDuration:Lt(e),cmPodIndex:Zt(e)};if(n.payload.extra){const e=n.payload.extra;0!==e.cmPodDuration&&(t.cmPodDuration=e.cmPodDuration)}return t}function $t(e,{trackingEventAction:n}){const t={cmDurationOriginal:jt(e),cmImpressionCounter:Nt(e),cmImpressionIndex:Ut(e),cmPodCounter:Yt(e),cmPodDuration:Lt(e),cmPodIndex:Zt(e),cmPlutoID:Vt(e)};if(n.payload.extra){const e=n.payload.extra;null!==e.cmID&&(t.cmPlutoID=e.cmID),-1!==e.cmImpressionIndex&&(t.cmImpressionIndex=e.cmImpressionIndex),0!==e.cmPodDuration&&(t.cmPodDuration=e.cmPodDuration),0!==e.cmDuration&&(t.cmDurationOriginal=e.cmDuration)}return t}var Kt=t(4145);function Qt(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.accountID)||"na",200)}function Wt(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.channelID)||"na",50)}function Xt(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.clipID)||"na",50)}function Ht(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.episodeID)||"na",50)}var Gt=t(26287);function Bt(e){return(0,Kn.k)((0,Gt.e)(e)||"na",50)}function Jt(e){return(0,Kn.k)((0,Gt.P)(e)||"na",20)}function ei(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.previousChannelID)||"na",50)}function ni(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.previousSection)||"na",50)}function ti(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.programTimelineID)||"na",50)}var ii=t(17957);function oi(e){var n;return(0,Kn.k)((null===(n=e.tracking)||void 0===n?void 0:n.data.section)||"",50)}function si(e){return(0,Kn.k)(e.tracking.data.utmCampaign,100)}function ri(e){return(0,Kn.k)(e.tracking.data.utmContent,100)}function ai(e){return(0,Kn.k)(e.tracking.data.utmMedium,100)}function ci(e){return(0,Kn.k)(e.tracking.data.utmSource,100)}function li(e){return(0,Kn.k)(e.tracking.data.utmTerm,100)}function di(e){return{cmPlutoID:"na",cmDurationOriginal:0,cmImpressionCounter:0,cmImpressionIndex:-1,cmPodCounter:0,cmPodDuration:0,cmPodIndex:0,isAutoPlay:!1,accountID:Qt(e),clipID:Xt(e),episodeID:Ht(e),programTimelineID:ti(e),channelID:Wt(e),previousChannelID:ei(e),playbackState:(0,Kt.W)(e),playerName:Bt(e),playerVersion:Jt(e),clientID:Qn(e),clientIP:Wn(e),eventEmitterIP:Wn(e),sessionID:Xn(e),section:oi(e),previousSection:ni(e),userCountryCode:Hn(e),userPostalCode:Gn(e),utmCampaign:si(e),utmContent:ri(e),utmMedium:ai(e),utmSource:ci(e),utmTerm:li(e),referrer:(0,ii.s)(e),kidsConstrained:(0,Je.E3)(e),activeSimOperator:(0,Kn.k)((0,Un.ec)()||"na",48)}}function ui(e){var n;return null===(n=e.tracking)||void 0===n?void 0:n.data.isAutoPlay}function gi(){const e=(0,Ye.kD)();return(0,Ye.e2)()?5:e?4:2}var yi=t(43631);function pi(e){var n,i,o,s;const r=(0,yi.qY)();return{appID:Jn(e),appName:Bn(e),appVersion:(0,Kn.k)((0,Nn.xp)()||"",50),browserName:null!==(n=null==r?void 0:r.name)&&void 0!==n?n:"na",browserVersion:null!==(i=null==r?void 0:r.version)&&void 0!==i?i:"na",clientDeviceType:gi(),clientLanguage:null===(o=t.g.navigator)||void 0===o?void 0:o.language,clientOS:null!==(s=null==r?void 0:r.os)&&void 0!==s?s:"na",clientTimezone:(0,Kn.k)((0,Nn.uN)()||"",50),clientUserAgent:(0,Kn.k)((0,Nn.DV)()||"na",500),environment:"prod",eventEmitterType:"client",eventGeneratorType:"client",isClientDNT:(0,Nn.Ym)(),subAppName:et(e),playerHeight:-1,playerWidth:-1,activeSimOperator:"na",carrierName:"na",clientChipset:"na",clientFirmware:"na",clientManufacturer:"na",clientModelName:"na",clientModelNumber:"na",clientNetworkType:"na",clientPrivateIP:"na",clientScreenResolution:"na",cmProxyVersion:"na",cmAudienceID:"na",eventGeneratorIP:"na",stitcherVersion:"na",userLatitude:"na",userLongitude:"na"}}var mi=t(43800),vi=t(17172);function fi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Di(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fi(Object(t),!0).forEach((function(n){(0,nt.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const Ei=(0,$.gV)("/app/src/modules/tracking/sagas/processEvents/queue.ts");function*Ii(e,n,t){const{payload:i}=t;if(!(yield(0,K.Ys)(qt.g)))return void Ei.log("dropping event, functional consent not given",i);const o=yield(0,K.Ys)(di),s=yield(0,K.Ys)(Ne,{featureType:i.featureType});let r={},a=!1;i.category===xt.W&&(a=yield(0,K.Ys)(ui),r=i.name.includes("Pod")?yield(0,K.Ys)(Ft,{trackingEventAction:t}):yield(0,K.Ys)($t,{trackingEventAction:t})),i.category===zt&&(a=yield(0,K.Ys)(ui));const c=Di(Di(Di(Di(Di(Di(Di(Di({eventOccurredTimestamp:i.timestamp,eventCategory:i.category,eventName:i.name,linkID:i.linkID},i.label?{label:i.label}:{}),null!==i.value?{value:i.value}:{}),void 0!==i.jsonExtensions?{jsonExtensions:i.jsonExtensions}:{}),s?{featureTypeExtension:s}:{}),e),o),r),{},{isAutoPlay:a});Ei.log("queueing event",{category:i.category,name:i.name,payload:i,dataEvent:c}),yield(0,K.gz)(n,c)}function*hi(e){Ei.log("queueTrackingEventsWatcher started");const n=yield(0,K.Ys)(pi),t=yield(0,K.ZO)((0,l.getType)(d.H),vi.buffers.expanding());for(Ei.log("waiting application initial consent"),yield(0,K.RE)(Mt.uy),Ei.log("waiting application finish to load"),yield(0,K.RE)(We.R),Ei.log("waiting application mode to load"),yield(0,K.RE)(_t.Y),Ei.log("waiting kidsConstrained to be set"),yield(0,K.RE)(mi.$);;){const i=yield(0,K.qn)(t);Ei.log("trackingEventAction received",i),yield(0,K.rM)(Ii,n,e,i)}}function Si(){const e=vi.buffers.expanding(1);return(0,vi.channel)(e)}function*Ti(){const e=yield(0,K.RE)(Si);yield(0,K.rM)(hi,e),yield(0,K.rM)(wt,e)}const Pi=(0,d.c)({category:re.W,name:"sectionSelect",labelResolver:({section:e})=>e}),Ai=(0,$.gV)("/app/src/modules/tracking/sagas/sectionSelect/sectionSelect.ts");function Ci({module:e}){switch(e){case N.liveTV:return j.liveTV;case N.onDemand:return j.onDemand;case N.account:return j.settings}}function*Ri(){let e=null;yield(0,K.ib)((0,l.getType)(r.Q),(function*({payload:{params:{module:n},extra:t}}){let i=n;i===x.bC.viral&&(i=x.bC.liveTV);const o=Object.values(N).includes(i);if(i!==e&&o)if(e){if(Ai.log("changing section to",i),e=i,null!=t&&t.skipSectionSelectTrack)return;const n=yield(0,K.RE)(Ci,{module:i});yield(0,K.gz)(Pi({section:n}))}else e=i}))}const Oi=(0,d.c)({category:ie.W,name:"signInSuccessful",labelResolver:()=>"email",extraResolver:e=>e}),ki=(0,d.c)({category:ie.W,name:"signOutSuccessful"}),bi=(0,d.c)({category:ie.W,name:"signUpSuccessful",labelResolver:()=>"email",extraResolver:e=>e});var wi=t(25375),Mi=t(53842),_i=t(97120),qi=t(94950),xi=t(93924);function*zi(){for(;;){const[r,a,c,d,u]=yield(0,K.S3)([(0,K.qn)((0,l.getType)(Mi.i.request)),(0,K.qn)((0,l.getType)(Mi.i.success)),(0,K.qn)((0,l.getType)(xi.C.success)),(0,K.qn)((0,l.getType)(qi.s.success)),(0,K.qn)((0,l.getType)(_i.M.success))]);var e,n,t,i,o,s;if(r)(yield(0,K.Ys)(vn.Pt))&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:null!==(e=r.payload)&&void 0!==e&&e.isActivatationOverlay?Oe._0.deviceactivationconfirmsignout:Oe._0.webactivationcomplete,screenElementID:Ae.C.signout}})));else a?(yield(0,K.gz)(ki()),yield(0,K.gz)(y())):c?yield(0,K.gz)(bi({accountID:null===(n=c.payload)||void 0===n||null===(t=n.response)||void 0===t?void 0:t.id})):u?yield(0,K.gz)(p({accountID:null===(i=u.payload)||void 0===i||null===(o=i.response)||void 0===o?void 0:o.id})):d&&(yield(0,K.gz)(Oi({accountID:null===(s=d.payload.response)||void 0===s?void 0:s.id})))}}function*ji(e){(yield(0,K.Ys)($n.b))!==e&&(yield(0,K.gz)(Tt({oldSessionID:e}))),yield(0,K.gz)(ne())}function*Ni(){let e=null,n=!1,t=!1;const o=yield(0,K.ZO)((0,l.getType)(i._h.request)),s=yield(0,K.ZO)((0,l.getType)(i._h.success)),r=yield(0,K.ZO)((0,l.getType)(d.H),vi.buffers.expanding());for(;;){const[i,c,l]=yield(0,K.S3)([(0,K.qn)(o),(0,K.qn)(s),(0,K.qn)(r)]);var a;l?"bootstrapRestartRequest"===(null==l||null===(a=l.payload)||void 0===a?void 0:a.name)&&(n=!0,t&&(yield(0,K.RE)(ji,e),t=!1)):i?(t=!1,n=!1,e=yield(0,K.Ys)($n.b)):c&&(t=!0,n&&(yield(0,K.RE)(ji,e),n=!1,t=!1))}}const Ui=(0,d.c)({category:J,name:"videoError",labelResolver:({errorDescription:e="na"})=>e,valueResolver:({errorCode:e})=>(0,B.v)(e)});function*Vi(){for(;;){const{payload:{error:e}}=yield(0,K.qn)((0,l.getType)(ce.F.failure));yield(0,K.gz)(Ui({errorDescription:e.message}))}}var Yi=t(36438);const Li=(0,d.c)({category:Yi.W,name:"clickVolume",valueResolver:e=>e.volumeLevel,labelResolver:({volumeDirection:e})=>e}),Zi=(0,l.createAction)("@tracking/OMSDK/VOLUME_CHANGE")();var Fi,$i=t(94929),Ki=t(34071),Qi=t(42326);function*Wi({volumeLevel:e,volumeDirection:n}){yield(0,K.gz)(Zi({volumeLevel:e})),yield(0,K.gz)(Li({volumeLevel:e,volumeDirection:n}))}function*Xi(e){const n=yield(0,K.Ys)(Le.ry),t=e.payload.volumeLevel;t!==n&&(yield(0,K.RE)(Wi,{volumeLevel:t/100,volumeDirection:n>t?Fi.Down:Fi.Up}))}function*Hi(){yield(0,K.RE)(Wi,{volumeLevel:0,volumeDirection:Fi.Down})}function*Gi(e){const n=e.payload.volumeLevel;yield(0,K.RE)(Wi,{volumeLevel:n/100,volumeDirection:Fi.Up})}function*Bi(){yield(0,K.Fm)((0,l.getType)(Ki.c.request),Xi),yield(0,K.ib)((0,l.getType)($i.M.success),Hi),yield(0,K.ib)((0,l.getType)(Qi.s.success),Gi)}function*Ji(){yield(0,K.rM)(Ni),yield(0,K.rM)(zi),yield(0,K.rM)(Bi),yield(0,K.rM)(Vi)}function*eo(){const e=yield(0,K.Ys)(Oe.Gn);yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:e,screenElementID:Ae.C.validateactivationcode}}))}function*no(){yield(0,K.ib)((0,l.getType)(Cn.p.request),eo)}!function(e){e.Up="up",e.Down="down"}(Fi||(Fi={}));var to=t(52230);function*io(){const e=yield(0,K.Ys)(Oe.Gn);yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:e,screenElementID:Ae.C.exitkidsmode}}))}function*oo(){yield(0,K.ib)((0,l.getType)(to.u),io)}var so=t(80535);function*ro(){const e=yield(0,K.Ys)($e.i),n=yield(0,K.Ys)(Me.F,{contentID:e});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.endcard,screenElementID:Ae.C.watchnow,screenElementDetail:[{name:n,value:e}]},featureType:ze.SamplerPromoPPlus}))}function*ao(e){const{payload:n}=e,t=yield(0,K.Ys)($e.i),i=yield(0,K.Ys)(Me.F,{contentID:t});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.endcard,screenElementID:n.screenElementID,screenElementDetail:[{name:i,value:t}]},featureType:ze.SamplerPromoPPlus}))}function*co(){yield(0,K.ib)((0,l.getType)(so.nP),ro),yield(0,K.ib)((0,l.getType)(so.rr),ao)}function*lo(){const e=yield(0,K.Ys)($e.i),n=yield(0,K.Ys)(Me.F,{contentID:e});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.endcard,screenElementID:Ae.C.signup,screenElementDetail:[{name:n,value:e}]},featureType:ze.UpsellPPlus}))}function*uo(e){const{payload:n}=e,t=yield(0,K.Ys)($e.i),i=yield(0,K.Ys)(Me.F,{contentID:t});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.endcard,screenElementID:n.screenElementID,screenElementDetail:[{name:i,value:t}]},featureType:ze.UpsellPPlus}))}function*go(){yield(0,K.ib)((0,l.getType)(so.uh),lo),yield(0,K.ib)((0,l.getType)(so.db),uo)}function*yo(){const e=yield(0,K.Ys)(Oe.Gn),n=yield(0,K.Ys)($e.i),t=yield(0,K.Ys)(Me.F,{contentID:n});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:e,screenElementID:Ae.C.watchnow,screenElementDetail:[{name:t,value:n}]},featureType:ze.SamplerPromoPPlus}))}function*po(e){const{payload:n}=e,t=yield(0,K.Ys)(Oe.Gn),i=yield(0,K.Ys)($e.i),o=yield(0,K.Ys)(Me.F,{contentID:i});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:t,screenElementID:n.screenElementID,screenElementDetail:[{name:o,value:i}]},featureType:ze.SamplerPromoPPlus}))}function*mo(){yield(0,K.ib)((0,l.getType)(so.no),yo),yield(0,K.ib)((0,l.getType)(so.ot),po)}var vo=t(23595),fo=t(30431),Do=t(63805),Eo=t(73400),Io=t(77972),ho=t(272),So=t(95968),To=t(33363),Po=t(71949);function*Ao({index:e}){let n=0,t=e;for(;t>=0;){if((yield(0,K.Ys)(Io.q,{index:t}))===Eo.vs.Category)return n;t-=1,n+=1}return null}function*Co(e){let n;const{payload:t}=e;let i,o=yield(0,K.Ys)(Oe.Gn);const s=yield(0,K.Ys)(Me.F,{contentID:t.contentID});switch(t.type){case vo.I.ClickWatchNow:case vo.I.ClickWatcLiveChannel:i=t.type===vo.I.ClickWatchNow?Ae.C.watchnow:Ae.C.watchlivechannel,yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:i,screenElementDetail:[{name:t.trackingName,value:t.contentID}]}}));break;case vo.I.ClickSearchButton:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.search}}));break;case vo.I.ClickSeeChannelDetails:const e=yield(0,K.RE)(Ao,{index:t.itemIndex});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.seechanneldetails1,screenElementDetail:[{name:s,value:t.contentID}],positionID:e}}));break;case vo.I.ClickResultOnDemandContent:case vo.I.ClickResultOnDemandSeries:case vo.I.ClickResultLiveTVChannel:case vo.I.ClickResultLiveTVTimeline:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.searchresulttile,screenElementDetail:[{name:t.trackingName,value:t.contentID}],positionID:t.positionID+1}}));break;case vo.I.ClickHeroCarouselDetails:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.herocarouseldetails,screenElementDetail:[{name:s,value:t.contentID}],positionID:t.positionID+1}}));break;case vo.I.ClickContentDetailsOfferButton:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.contentdetails,screenElementDetail:[{name:fo.f.LiveChannel,value:t.contentID}]},featureType:ze.UpsellPPlus}));break;case vo.I.GoToKidsModePage:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.tokidsmodepage}}));break;case vo.I.EnterKidsMode:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.enterkidsmode}}));break;case vo.I.TurnOnKidsMode:o=yield(0,K.Ys)(Oe.EZ),yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.turnonkidsmode}}));break;case vo.I.GoToExitKidsModePage:o=yield(0,K.Ys)(Oe.Iw),o||(o=yield(0,K.Ys)(Oe.Gn)),yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.toexitkidsmodepage}}));break;case vo.I.ExitKidsMode:o=yield(0,K.Ys)(Oe.Iw),o||(o=yield(0,K.Ys)(Oe.Gn)),yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.exitkidsmode}}));break;case vo.I.CloseKidsModeButton:o=yield(0,K.Ys)(Oe.EZ),yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.close}}));break;case vo.I.Dismiss:o=yield(0,K.Ys)(Oe.EZ),yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.dismiss}}));break;case vo.I.CancelConfirmLogout:null!=t&&t.isActivationOverlay&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.deviceactivationconfirmsignout,screenElementID:Ae.C.dismiss}})));break;case vo.I.ForgotPin:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.forgotpin}}));break;case vo.I.ReturnToPlutoTV:(yield(0,K.Ys)(So.jt))&&(o=Oe._0.passwordresetlinksent),yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.returntoplutotv}}));break;case vo.I.ClickVodCategory:Po.O.includes(null==t?void 0:t.categoryID)||(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.vodl2nav,screenElementDetail:[{name:fo.f.OnDemandMainCategory,value:null==t?void 0:t.categoryID}]}})));break;case vo.I.PartnerDismiss:o=yield(0,K.Ys)(Oe.Iw),o&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.dismiss}})));break;case vo.I.PartnerOffer:o=yield(0,K.Ys)(To.cZ,{type:ho.a.welcome}),i=yield(0,K.Ys)(To.Mm,{type:ho.a.welcome}),o&&i&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:i}})));break;case vo.I.PartnerStartWatching:o=yield(0,K.Ys)(To.cZ,{type:ho.a.success}),i=yield(0,K.Ys)(To.Mm,{type:ho.a.success}),o&&i&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:i}})));break;case vo.I.SeeVodSeriesDetails:case vo.I.SeeVodEpisodeDetails:null!=t&&t.contentID&&!t.contentID.includes("view-all")&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:t.type===vo.I.SeeVodSeriesDetails?Ae.C.seevodseriesdetails:Ae.C.seevodmoviedetails,screenElementDetail:[{name:t.type===vo.I.SeeVodSeriesDetails?fo.f.OnDemandSeries:fo.f.OnDemandEpisode,value:null==t?void 0:t.contentID},...null!=t&&t.mainCategoryID?[{name:fo.f.OnDemandMainCategory,value:null==t?void 0:t.mainCategoryID},{name:fo.f.OnDemandCategory,value:null==t?void 0:t.categoryID}]:[{name:fo.f.OnDemandMainCategory,value:null==t?void 0:t.categoryID}]],positionID:null==t?void 0:t.positionID}})));break;case vo.I.ConfirmAccount:n=yield(0,K.Ys)(vn.Pt),n&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.deviceactivationconfirmacct,screenElementID:Ae.C.confirmaccount}})));break;case vo.I.SwitchAccount:n=yield(0,K.Ys)(vn.Pt),n&&(yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:Oe._0.deviceactivationconfirmacct,screenElementID:Ae.C.switchaccount}})));break;case vo.I.UserProfileIcon:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.userprofileicon}}));break;case vo.I.ToSignUpPage:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.tosignuppage}}));break;case vo.I.ToSignInPage:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.tosigninpage}}));break;case vo.I.ToHelpAndSupport:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.tohelpandsupport}}));break;case vo.I.Cancel:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.cancel}}));break;case vo.I.SignUp:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.signup}}));break;case vo.I.SignIn:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.signin}}));break;case vo.I.ForgotPassword:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.forgotpassword}}));break;case vo.I.SendResetLink:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.sendresetlink}}));break;case vo.I.ToManageAccount:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.tomanageaccount}}));break;case vo.I.ToSignOut:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.tosignout}}));break;case vo.I.SignOut:yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:o,screenElementID:Ae.C.signout}}))}}function*Ro(){yield(0,K.ib)((0,l.getType)(Do.X.request),Co)}var Oo=t(96728),ko=t(90260);function*bo(e){const{payload:{contentID:n}}=e,t=yield(0,K.Ys)(Oe.Gn),i=yield(0,K.Ys)(Me.F,{contentID:n});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:t,screenElementID:Ae.C.addtowatchlist,screenElementDetail:[{name:i,value:n}]}}))}function*wo(e){const{payload:{contentID:n}}=e,t=yield(0,K.Ys)(Oe.Gn),i=yield(0,K.Ys)(Me.F,{contentID:n});yield(0,K.gz)((0,wi.$)({jsonExtensions:{screenID:t,screenElementID:Ae.C.removefromwatchlist,screenElementDetail:[{name:i,value:n}]}}))}function*Mo(){yield(0,K.ib)((0,l.getType)(Oo.r.request),bo),yield(0,K.ib)((0,l.getType)(ko._.request),wo)}function*_o(){yield(0,K.rM)(Ro),yield(0,K.rM)(oo),yield(0,K.rM)(Mo),yield(0,K.rM)(co),yield(0,K.rM)(go),yield(0,K.rM)(mo),yield(0,K.rM)(no)}var qo=t(53147),xo=t(2106),zo=t(57289),jo=t(36303),No=t(15344),Uo=t(18724),Vo=t(81117),Yo=t(58706),Lo=t(13408),Zo=t(19864);const Fo=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/utils/getAdSession.ts");function*$o({context:e,sessionClient:n}){if(!n||!e)return Fo.log("can't start omsdk ad session"),null;const t=new n.AdSession(e);return yield(0,Zo.RE)([t,"setCreativeType"],"video"),yield(0,Zo.RE)([t,"setImpressionType"],"beginToRender"),(yield(0,Zo.RE)([t,"isSupported"]))?t:void 0}const Ko=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/utils/getOmidSessionClient.ts");function*Qo(){var e,n;if(yield(0,Zo.RE)(We.R),!(yield(0,Zo.Ys)(_e.GL)))return Ko.log("OMSDK is not enabled"),null;return(null===(e=t.g.window)||void 0===e?void 0:e.OmidSessionClient)&&(null===(n=t.g.window)||void 0===n?void 0:n.OmidSessionClient.default)||(Ko.log("Session client not available, can't use OMSDK"),null)}var Wo=t(74940);function Xo({sessionClient:e}){return e?new e.Partner("Plutotv","6.7.1-38d521889b5c2cd009d29efb8c0355e10028c31d"):null}const Ho=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/utils/getVerificationContext.ts");function*Go({extendedEvents:e,videoElement:n,sessionClient:i}){var o,s;const r=yield(0,Zo.RE)(Xo,{sessionClient:i});if(!i||!r||null===(o=t.g.window)||void 0===o||!o.top)return Ho.log("not on window browser, skipping"),null;Ho.log("OMSDK is available");const a=[];for(const{vendorKey:n,javascriptResourceUrl:t,verificationParameters:o}of e)if(n&&t&&o){const e=new i.VerificationScriptResource(t,n,o,"full");a.push(e)}const c=yield(0,Zo.Ys)(Wo.c),l=new i.Context(r,a,c);return n&&(yield(0,Zo.RE)([l,"setVideoElement"],n)),l.setServiceWindow(null===(s=t.g.window)||void 0===s?void 0:s.top),l}const Bo=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/omsdk.ts");var Jo;function*es({omsdkTrackingChannel:e}){let n,t,i,o,s,r,a,c=!0;function l(){n=null,t=null,i=null,o=null,s=!1}function*d(e){var n;r=(yield(0,K.Ys)(Ye.IR))?null===(n=document)||void 0===n?void 0:n.getElementById("omsdk-video-placeholder"):e}function*u(e){if(!n)try{const s=yield(0,K.RE)(Qo),a=yield(0,K.RE)(Go,{videoElement:r,sessionClient:s,extendedEvents:e});a&&(n=yield(0,K.RE)($o,{context:a,sessionClient:s}),t=new s.MediaEvents(n),i=new s.AdEvents(n),o=new s.VastProperties(!1,0,!0,"midroll"))}catch(e){Bo.error("failed to set up omsdk events",e),yield(0,K.RE)(l)}}function*g(){s||(Bo.log("firing omsdk startAdSession event"),yield(0,K.RE)(n.start.bind(n)),Bo.log("firing omsdk loaded event"),yield(0,K.RE)(i.loaded.bind(i,o)),s=!0)}function*y(){Bo.log("firing omsdk finishAdSession event"),yield(0,K.RE)(n.finish.bind(n)),yield(0,K.RE)(l)}function*p(){a||(a=!0,Bo.log("firing omsdk bufferStart event"),yield(0,K.RE)(t.bufferStart.bind(t)))}function*m(){a&&(a=!1,Bo.log("firing omsdk bufferFinish event"),yield(0,K.RE)(t.bufferFinish.bind(t)))}function*v({cmEvent:e}){var o,s;if(Bo.log("process cm event",{cmEvent:e}),n)switch(null===(o=e.payload)||void 0===o?void 0:o.type){case C.Yp.BEGIN:yield(0,K.RE)(g);break;case C.Yp.IMPRESSION:Bo.log("firing omsdk impressionOccurred event"),yield(0,K.RE)(i.impressionOccurred.bind(i));break;case C.Yp.START:Bo.log("firing omsdk start event");const n=yield(0,K.Ys)(Lo.$);yield(0,K.RE)(t.start.bind(t,null===(s=e.payload)||void 0===s?void 0:s.cmDuration,n/100));break;case C.Yp.FIRST_QUARTILE:Bo.log("firing omsdk firstQuartile event"),yield(0,K.RE)(t.firstQuartile.bind(t));break;case C.Yp.MIDPOINT:Bo.log("firing omsdk midpoint event"),yield(0,K.RE)(t.midpoint.bind(t));break;case C.Yp.THIRD_QUARTILE:Bo.log("firing omsdk thirdQuartile event"),yield(0,K.RE)(t.thirdQuartile.bind(t));break;case C.Yp.COMPLETE:Bo.log("firing omsdk complete event"),yield(0,K.RE)(t.complete.bind(t));break;case C.Yp.END:case C.Yp.POD_END:yield(0,K.RE)(y)}}function*f(e){switch(Bo.log("firing omsdk playerStateChange event",{playerState:e}),e){case C.SW.DOCKED:yield(0,K.RE)(t.playerStateChange.bind(t,Jo.COLLAPSED));break;case C.SW.EXPANDED:yield(0,K.RE)(t.playerStateChange.bind(t,Jo.NORMAL));break;case C.SW.FULLSCREEN:yield(0,K.RE)(t.playerStateChange.bind(t,Jo.FULLSCREEN))}}function*D(e=0){Bo.log("firing volumeChange event"),yield(0,K.RE)(t.volumeChange.bind(t,e))}if(yield(0,K.Ys)(_e.GL))for(;;){var E;const{videoPlayerInitialize:n,cmEvent:t,playStreamRequest:i,bootstrapRestartRequest:o,bufferingRequest:r,bufferingSuccess:a,playerStateChange:l,volumeChange:g}=yield(0,K.qn)(e);var I;if(n)yield(0,K.RE)(d,null===(I=n.payload)||void 0===I?void 0:I.videoElement);else if(t&&null!==(E=t.payload)&&void 0!==E&&E.extendedEvents){const{extendedEvents:e}=t.payload;e.length&&(yield(0,K.RE)(u,e),yield(0,K.RE)(v,{cmEvent:t}))}else if(i&&c)c=!1;else if(s){if(i||o){yield(0,K.RE)(y);continue}if(r){yield(0,K.RE)(p);continue}if(a){yield(0,K.RE)(m);continue}if(l){var h;yield(0,K.RE)(f,null===(h=l.payload)||void 0===h?void 0:h.playerState);continue}var S;g&&(yield(0,K.RE)(D,null===(S=g.payload)||void 0===S?void 0:S.volumeLevel))}}else e.close()}!function(e){e.MINIMIZED="minimized",e.COLLAPSED="collapsed",e.NORMAL="normal",e.EXPANDED="expanded",e.FULLSCREEN="fullscreen"}(Jo||(Jo={}));var ns=t(23091);const ts=(0,d.c)({category:xt.W,name:"cmBegin",extraResolver:e=>e}),is=(0,d.c)({category:xt.W,name:"cmComplete",extraResolver:e=>e}),os=(0,d.c)({category:xt.W,name:"cmEnd",extraResolver:e=>e}),ss=(0,d.c)({category:xt.W,name:"cmFirstQuartile",extraResolver:e=>e}),rs=(0,d.c)({category:xt.W,name:"cmImpression",extraResolver:e=>e}),as=(0,d.c)({category:xt.W,name:"cmMidPoint",extraResolver:e=>e}),cs=(0,d.c)({category:xt.W,name:"cmPodBegin",extraResolver:e=>e}),ls=(0,d.c)({category:xt.W,name:"cmPodComplete",extraResolver:e=>e}),ds=(0,d.c)({category:xt.W,name:"cmPodEnd",extraResolver:e=>e}),us=(0,d.c)({category:xt.W,name:"cmPodStart",extraResolver:e=>e}),gs=(0,d.c)({category:xt.W,name:"cmStart",extraResolver:e=>e}),ys=(0,d.c)({category:xt.W,name:"cmThirdQuartile",extraResolver:e=>e}),ps=(0,d.c)({category:Yi.W,name:"channelChange",labelResolver:({newChannelID:e,currentlyPlaying:n})=>`newChannelID=${e}|currentlyPlaying=${n}`}),ms=(0,d.c)({category:Yi.W,name:"clickPause"}),vs=(0,d.c)({category:Yi.W,name:"clickPlay"}),fs=(0,d.c)({category:Yi.W,name:"clickSkipForward",valueResolver:e=>e.numberOfSeconds}),Ds=(0,d.c)({category:Yi.W,name:"clickSkipRewind",valueResolver:e=>e.numberOfSeconds}),Es=(0,d.c)({category:W,name:"bootstrapRestartRequest"}),Is=(0,d.c)({category:J,name:"playerBufferEnd",valueResolver:({diff:e})=>e}),hs=(0,d.c)({category:J,name:"playerBufferStart"}),Ss=(0,d.c)({category:zt,name:"clipEnd"}),Ts=(0,d.c)({category:zt,name:"clipStart",extraResolver:e=>e}),Ps=(0,d.c)({category:zt,name:"episodeEnd"}),As=(0,d.c)({category:zt,name:"episodeStart",extraResolver:e=>e});var Cs=t(39629),Rs=t(10706),Os=t(47198),ks=t(22766),bs=t(99512),ws=t(85823);const Ms=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/contentConsumption.ts");function _s(){let e,n=null,t=0,i=!1;function o(){t=0,i=!1}function*s(){Ms.log("paused",{timeplaying:t}),n=null,e&&(yield(0,K.RE)(e.close),e=null)}return{start:function*(){e&&(yield(0,K.RE)(s)),e=(0,vi.eventChannel)((e=>{const n=ws.Zi((()=>e(!0)),500);return()=>{ws.cv(n)}})),Ms.log("start",{timeplaying:t}),yield(0,K.Fm)(e,(function*(){var e;if(yield(0,K.Ys)(bs.js))return Ms.log("player not playing, resetting timeplaying"),void(yield(0,K.RE)(o));const s=new Date,r=(0,R.a5)(s,null!==(e=n)&&void 0!==e?e:new Date);n=s,t+=r,!i&&t>=15e3&&(Ms.log("submitting kochava media_play event"),yield(0,K.gz)((0,Os.u)()),i=!0)}))},pause:s,submit:function*(){if(Ms.log("submitted",{timeplaying:t}),t>0){const e=yield(0,K.Ys)($e.i),n=yield(0,K.Ys)(ks.iI);yield(0,K.gz)((0,g.k)({contentID:e,contentType:n,msConsumed:t}))}yield(0,K.RE)(o)},reset:o}}const qs=(0,d.c)({category:zt,name:"heartBeat"}),xs=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/heartbeat.ts");function zs(){let e,n=null,t=0;function i(){t=0}function*o(){xs.log("paused",{timeplaying:t}),n=null,e&&(yield(0,K.RE)(e.close),e=null)}return{start:function*(){e&&(yield(0,K.RE)(o)),e=(0,vi.eventChannel)((e=>{const n=ws.Zi((()=>e(!0)),500);return()=>{ws.cv(n)}})),xs.log("start",{timeplaying:t}),yield(0,K.Fm)(e,(function*(){var e;if(yield(0,K.Ys)(bs.js))return xs.log("player not playing, ignoring heartbeat"),void(yield(0,K.RE)(i));const o=new Date,s=(0,R.a5)(o,null!==(e=n)&&void 0!==e?e:new Date);n=o,t+=s,t>=2e4&&(t>=21e3?xs.log("late heartbeat",{timeplaying:t,delta:s}):xs.log("heartbeat",{timeplaying:t,delta:s}),yield(0,K.gz)(qs()),yield(0,K.RE)(i))}))},pause:o,reset:i}}const js=(0,$.gV)("/app/src/modules/tracking/sagas/videoViewing/worker.ts");function*Ns({viewingTrackingChannel:e}){let n,t;const i=yield(0,K.RE)(zs),o=yield(0,K.RE)(_s);let s=!1,r=null,a=null,c=null,l=-1,d=0,u=0,g=!0,y=!0,p=null,v=null,f=null,D=null,E=null,I=!1,h=!1,S=null,T=!1,P=!1;const A=[];function*O(e,n,t,i){if(yield(0,K.Cs)($),yield(0,K.Cs)(X),g)return js.log("ignoring first video request, the first trackingVideoRequestAction is dispatched as part of trackingAppLaunchVideoWorker"),p=yield(0,K.Ys)(Wt),void(g=!1);yield(0,K.RE)(J,e,t,i),yield(0,K.RE)(B,e),js.log("firing video request event"),yield(0,K.gz)(se({autoPlay:n,contentID:e.ID})),s=!1,I=!1,h=!1,v=null,D=null,E=null,y=!1,A.length>0&&(js.log("clearing postponedCmEvents",A),A.splice(0,A.length))}function*k(){s?js.log("video already playing"):(s=!0,y?(js.log("ignoring first video loaded event, the first trackingVideoLoadedAction is dispatched as part of trackingAppLaunchVideoWorker"),y=!1):(js.log("firing video loaded event"),yield(0,K.gz)(oe())))}function*b(){S||(js.log("start buffering"),yield(0,K.Cs)($),yield(0,K.Cs)(X),S=new Date,yield(0,K.gz)(hs()))}function*w(){if(S){js.log("end buffering");const e=(0,R.a5)(new Date,S);S=null,yield(0,K.gz)(Is({diff:e})),["vod","viral"].includes(p)&&(yield(0,K.Cs)(F),yield(0,K.Cs)(W))}yield(0,K.RE)(k),T&&(yield(0,K.RE)(re,{clickPlay:!1}))}function*M(){I||(I=!0,yield(0,K.gz)(Ts({clipID:v,episodeID:D,programTimelineID:E})))}function*_({resetPodIndex:e=!1}){h||(h=!0,yield(0,K.gz)(As({clipID:v,episodeID:D,programTimelineID:E,resetPodIndex:e})))}function*q(){I&&(I=!1,yield(0,K.gz)(Ss()))}function*x(){h&&(h=!1,yield(0,K.gz)(Ps()))}function*z({cmEvent:e}){js.log("cm event",{action:e});let n=!1;switch(e.payload.type){case C.Yp.CLEAR_CM_DATA:js.log("cm event, try clear cm data"),js.log("clear playing cmID"),a=null,c=null,l=-1,u=0;break;case C.Yp.POD_ALREADY_STARTED:js.log("cm event, try cm pod already started"),yield(0,K.RE)(j,{cmEvent:e});break;case C.Yp.POD_START:js.log("cm event, try cm pod start from beginning"),yield(0,K.RE)(j,{cmEvent:e}),js.log("firing cm pod start event"),yield(0,K.gz)(us(null==e?void 0:e.payload));break;case C.Yp.BEGIN:var t,i,o,s,r;js.log("cm event, try cm begin"),yield(0,K.RE)(j,{cmEvent:e}),n=yield(0,K.RE)(L,{cmEvent:e}),n?js.log("ignoring same cmID"):(js.log("firing cm begin event"),yield(0,K.gz)(ts(null==e?void 0:e.payload)),js.log("set current playing cmID"),a=null==e||null===(t=e.payload)||void 0===t?void 0:t.cmID,c=null==e||null===(i=e.payload)||void 0===i?void 0:i.cmType,l=null==e||null===(o=e.payload)||void 0===o?void 0:o.cmImpressionIndex,d=null==e||null===(s=e.payload)||void 0===s?void 0:s.cmPodDuration,u=null==e||null===(r=e.payload)||void 0===r?void 0:r.cmDuration,P=!1);break;case C.Yp.IMPRESSION:js.log("cm event, try cm impression"),n=yield(0,K.RE)(L,{cmEvent:e}),n?(js.log("firing cm impression occurred event"),yield(0,K.gz)(rs(null==e?void 0:e.payload))):js.log("ignoring different cmID");break;case C.Yp.START:js.log("cm event, try cm start"),n=yield(0,K.RE)(L,{cmEvent:e}),n?(js.log("firing cm start event"),yield(0,K.gz)(gs(null==e?void 0:e.payload))):js.log("ignoring different cmID");break;case C.Yp.FIRST_QUARTILE:js.log("cm event, try cm first quartile"),n=yield(0,K.RE)(L,{cmEvent:e}),n?(js.log("firing cm first quartile event"),yield(0,K.gz)(ss(null==e?void 0:e.payload))):js.log("ignoring different cmID");break;case C.Yp.MIDPOINT:js.log("cm event, try cm midpoint"),n=yield(0,K.RE)(L,{cmEvent:e}),n?(js.log("firing cm midpoint event"),yield(0,K.gz)(as(null==e?void 0:e.payload))):js.log("ignoring different cmID");break;case C.Yp.THIRD_QUARTILE:js.log("cm event, try third quartile"),n=yield(0,K.RE)(L,{cmEvent:e}),n?(js.log("firing cm third quartile event"),yield(0,K.gz)(ys(null==e?void 0:e.payload))):js.log("ignoring different cmID");break;case C.Yp.COMPLETE:js.log("cm event, try complete"),n=yield(0,K.RE)(L,{cmEvent:e}),n?(P=!0,js.log("firing cm complete event"),yield(0,K.gz)(is(null==e?void 0:e.payload))):js.log("ignoring different cmID");break;case C.Yp.END:js.log("cm event, try end"),yield(0,K.RE)(V,{cmEvent:e});break;case C.Yp.POD_END:js.log("cm event, try pod end"),n=yield(0,K.RE)(Z,{cmEvent:e}),n&&(js.log("firing cm pod complete event"),P&&(yield(0,K.gz)(ls(null==e?void 0:e.payload))),yield(0,K.RE)(N,{cmEvent:e}))}}function*j({cmEvent:e}){null===r&&(js.log("registering the begin of a cmPod"),yield(0,K.RE)(q),js.log("firing cm pod begin event"),yield(0,K.gz)(cs(null==e?void 0:e.payload)),r=null==e?void 0:e.payload.cmPodStartTime)}function*N({cmEvent:e}){js.log("trying to end cm pod"),(yield(0,K.RE)(Z,{cmEvent:e}))&&(js.log("ending current cm pod",{playingCmPodStartTime:r,playingCmID:a}),js.log("firing cm pod end event"),yield(0,K.gz)(ds(null==e?void 0:e.payload)),r=null,d=0,yield(0,K.RE)(M))}function*U(e){yield(0,K.gz)(os(e)),a=null,c=null,l=-1,u=0}function*V({cmEvent:e}){js.log("trying to end cm"),(yield(0,K.RE)(L,{cmEvent:e}))&&(js.log("ending current cm",{playingCmPodStartTime:r,playingCmID:a}),yield(0,K.RE)(U,null==e?void 0:e.payload))}function*Y(){if(null!==a||null!==r){let e;js.log("changing channel mid-ad"),null!==a&&(e={cmID:a,cmType:c,cmImpressionIndex:l,cmPodDuration:d,cmDuration:u},js.log("ending current cm",{playingCmPodStartTime:r,playingCmID:a}),js.log("firing cm end event"),yield(0,K.RE)(U,e)),null!==r&&(js.log("ending current cm pod",{playingCmPodStartTime:r,playingCmID:a}),js.log("firing cm pod end event"),yield(0,K.gz)(ds(e)),d=0,r=null)}}function*L({cmEvent:e}){var n;if(null===a)return!1;const t=null==e||null===(n=e.payload)||void 0===n?void 0:n.cmID,i=t===a;return js.log("is same cm?",{isSame:i,current:t,cached:a}),i}function*Z({cmEvent:e}){var n;if(null===r)return!1;const t=null==e||null===(n=e.payload)||void 0===n?void 0:n.cmPodStartTime,i=t.getTime()===r.getTime();return js.log("is same cm pod?",{isSame:i,current:t,cached:r}),i}function*F(){n?js.log("heartbeat already started"):(js.log("starting heartbeat"),n=yield(0,K.rM)(i.start))}function*$(){js.log("pausing heartbeat"),yield(0,K.RE)(i.pause),n&&(yield(0,Rs.k)([n]),n=null)}function*Q(){js.log("reseting heartbeat"),yield(0,K.RE)(i.reset),yield(0,K.Cs)($)}function*W(){t?js.log("content consumption already started"):(js.log("starting content consumption"),t=yield(0,K.rM)(o.start))}function*X(){js.log("pausing content consumption"),yield(0,K.RE)(o.pause),t&&(yield(0,Rs.k)([t]),t=null)}function*H(){js.log("reseting content consumption"),yield(0,K.RE)(o.reset),yield(0,K.Cs)(X)}function*G(){js.log("submitting content consumption"),f=v,yield(0,K.RE)(o.submit)}function*B(e){js.log("set tracking current channel ID"),yield(0,K.gz)(m(e)),p=yield(0,K.Ys)(Wt)}function*J(e,n,t){[C.Ab.CHANNEL,C.Ab.NON_STITCHED_CHANNEL].includes(e.type)&&n?e.ID!==p&&(js.log("firing channel change event"),yield(0,K.gz)(ps({newChannelID:e.ID,currentlyPlaying:t}))):[C.Ab.ON_DEMAND_MOVIE,C.Ab.ON_DEMAND_SERIES_EPISODE].includes(e.type)&&(js.log("firing vod episode watch event"),yield(0,K.gz)(ae({episodeID:e.ID}))),yield(0,K.RE)(Y),yield(0,K.RE)(q),yield(0,K.RE)(x)}function*ee(e){const n=new Date;let t=e.find((e=>(0,Cs.K)(n,e.startTime,e.endTime)));if(t||(t=e[0]),!t)return void js.log("failed to find the current clip");if(!t.episodeID||!t.clipID)return js.warn("missing clip data from stitcher session"),void(yield(0,K.RE)(ne));const i=v!==t.clipID,o=D!==t.episodeID;js.log(`clipUpdated: ${i} | isClipStarted: ${I} | episodeUpdated: ${o} | isEpisodeStarted: ${h}`);let s=!1;if(E=t.timelineID,(i||o)&&(yield(0,K.RE)(q)),o&&(yield(0,K.RE)(x)),o&&(D=t.episodeID),(i||o)&&(v=t.clipID),o&&(yield(0,K.RE)(_,{resetPodIndex:!0}),s=!0),(i||o)&&(yield(0,K.RE)(M),s=!0),yield(0,K.Cs)(F),yield(0,K.Cs)(W),s&&A.length){js.log("reprocessing, postponed cm events: %O",JSON.parse(JSON.stringify(A)));for(const e of A)yield(0,K.RE)(z,{cmEvent:e}),A.splice(0,1)}}function*ne(){yield(0,K.RE)(q),yield(0,K.RE)(x),D="na",v="na",yield(0,K.Cs)($),yield(0,K.Cs)(X)}function*te(){const e=yield(0,K.Ys)($e.i);e?(p="viral",v!==e&&(yield(0,K.RE)(q),v=e,yield(0,K.RE)(M)),yield(0,K.Cs)(F),yield(0,K.Cs)(W)):js.log("failed to find the vrial clip")}function*ie(){T=!0,yield(0,K.gz)(ms()),yield(0,K.RE)(q),yield(0,K.RE)(x),yield(0,K.Cs)($),yield(0,K.Cs)(X)}function*re({clickPlay:e=!0}){T=!1,e&&(yield(0,K.gz)(vs())),yield(0,K.RE)(_,{}),yield(0,K.RE)(M),yield(0,K.Cs)(F),yield(0,K.Cs)(W)}function*ce(e){yield(0,K.gz)(fs({numberOfSeconds:e}))}function*le(e){yield(0,K.gz)(Ds({numberOfSeconds:e}))}function*de(){yield(0,K.Cs)(Q),yield(0,K.Cs)(H),yield(0,K.RE)(Y),yield(0,K.RE)(q),yield(0,K.RE)(x),yield(0,K.gz)(Es())}for(yield(0,K.RE)(ns.e);;){js.log(" --- wait event ---",{isVideoLoaded:s,channelID:p,clipID:v,episodeID:D,programTimelineID:E,isClipStarted:I,isEpisodeStarted:h,playingCmID:a,playingCmType:c,ignoreFirstVideoRequest:g,ignoreFirstVideoLoaded:y,playingCmPodStartTime:r,playingCmImpressionIndex:l,playingCmPodDuration:d,playingCmDuration:u,bufferingStartDate:S});const{playStreamRequest:n,cmEvent:t,playingContentBeforeRequest:i,bootstrapRestartRequest:o,errorAction:m,stitcherSessionUpdate:T,clickPause:P,clickPlay:C,skipForward:R,skipRewind:k,bufferingRequest:M,bufferingSuccess:_,viralContentUpdate:q}=yield(0,K.qn)(e);if(js.log("event received: %O",{playStreamRequest:n,cmEvent:t,playingContentBeforeRequest:i,bootstrapRestartRequest:o,errorAction:m,stitcherSessionUpdate:T,clickPause:P,clickPlay:C,skipForward:R,skipRewind:k,bufferingRequest:M,bufferingSuccess:_,viralContentUpdate:q}),n){js.log("new video requested",n);const{content:e,autoPlay:t,trackChannelChange:o}=n.payload;yield(0,K.RE)(O,e,t,o,i)}else if(M)js.log("firing buffer request event"),yield(0,K.RE)(b);else if(_)js.log("firing buffer success event"),yield(0,K.RE)(w);else if(T){js.log("new stitcher session data",T);const{data:e}=T.payload;if(null==e||!e.clips||0===e.clips.length){js.warn("missing clip data from stitcher session"),yield(0,K.RE)(ne);continue}yield(0,K.RE)(ee,null==e?void 0:e.clips),v!==f&&"placeholder_clip"!==v&&(yield(0,K.Cs)(G))}else if(q)js.log("viral content update data",q),yield(0,K.RE)(te),yield(0,K.Cs)(G);else if(P)js.log("firing click pause event"),yield(0,K.RE)(ie);else if(C)js.log("firing click play event"),yield(0,K.RE)(re,{});else if(R)js.log("firing skip forward event"),yield(0,K.RE)(ce,R.payload.timeSkipInSeconds);else if(k)js.log("firing skip rewind event"),yield(0,K.RE)(le,k.payload.timeSkipInSeconds);else if(t){if(!h&&!I){js.log("waiting clip or episode start, store event to process when the clip or episode starts"),A.push(t);continue}yield(0,K.RE)(z,{cmEvent:t})}else o?(js.log("bootstrap restart requested"),yield(0,K.RE)(de)):m&&(yield(0,K.Cs)($),yield(0,K.Cs)(X))}}function*Us(){const e=yield(0,K.RE)(vi.channel,vi.buffers.expanding()),n=yield(0,K.RE)(vi.channel,vi.buffers.expanding()),t=yield(0,K.ZO)((0,l.getType)(xo.g.request),vi.buffers.expanding()),o=yield(0,K.ZO)((0,l.getType)(ce.F.request),vi.buffers.expanding()),s=yield(0,K.ZO)((0,l.getType)(Vo.i),vi.buffers.expanding()),r=yield(0,K.ZO)((0,l.getType)(a.E),vi.buffers.expanding()),c=yield(0,K.ZO)((0,l.getType)(i._h.request),vi.buffers.expanding()),d=yield(0,K.ZO)((0,l.getType)(le.o),vi.buffers.expanding()),u=yield(0,K.ZO)((0,l.getType)(zo.D.success),vi.buffers.expanding()),g=yield(0,K.ZO)((0,l.getType)(jo.i.success),vi.buffers.expanding()),y=yield(0,K.ZO)((0,l.getType)(No.f.success),vi.buffers.expanding()),p=yield(0,K.ZO)((0,l.getType)(Uo.j.success),vi.buffers.expanding()),m=yield(0,K.ZO)((0,l.getType)(qo.y.request),vi.buffers.expanding()),v=yield(0,K.ZO)((0,l.getType)(qo.y.success),vi.buffers.expanding()),f=yield(0,K.ZO)((0,l.getType)(de.x),vi.buffers.expanding()),D=yield(0,K.ZO)((0,l.getType)(ln),vi.buffers.expanding()),E=yield(0,K.ZO)((0,l.getType)(Zi),vi.buffers.expanding());for(yield(0,K.rM)(Ns,{viewingTrackingChannel:e}),yield(0,K.rM)(es,{omsdkTrackingChannel:n});;){const i=yield(0,K.Ys)(Yo.D),[a,l,I,h,S,T,P,A,C,R,O,k,b,w,M]=yield(0,K.S3)([(0,K.qn)(o),(0,K.qn)(s),(0,K.qn)(r),(0,K.qn)(c),(0,K.qn)(d),(0,K.qn)(u),(0,K.qn)(g),(0,K.qn)(y),(0,K.qn)(p),(0,K.qn)(m),(0,K.qn)(v),(0,K.qn)(f),(0,K.qn)(t),(0,K.qn)(D),(0,K.qn)(E)]);yield(0,K.gz)(e,{playStreamRequest:a,cmEvent:I,playingContentBeforeRequest:i,bootstrapRestartRequest:h,errorAction:l,stitcherSessionUpdate:S,clickPause:T,clickPlay:P,skipForward:A,skipRewind:C,bufferingRequest:R,bufferingSuccess:O,viralContentUpdate:k}),yield(0,K.gz)(n,{cmEvent:I,bootstrapRestartRequest:h,playStreamRequest:a,bufferingRequest:R,bufferingSuccess:O,videoPlayerInitialize:b,playerStateChange:w,volumeChange:M})}}function*Vs(){yield(0,K.rM)(Us)}const Ys=(0,$.gV)("/app/src/modules/tracking/sagas/root.ts");function*Ls(){Ys.log("initializing tracking saga channel"),yield(0,K.rM)(Ti),yield(0,K.rM)(Ee),yield(0,K.rM)(sn),yield(0,K.rM)(Pe),yield(0,K.rM)(Vs),yield(0,K.rM)(Ji),yield(0,K.rM)(jn),yield(0,K.rM)(mn),yield(0,K.rM)(Ri),yield(0,K.rM)(Qe),yield(0,K.rM)(_o),yield(0,K.rM)(cn)}function Zs(){return{id:"tracking",reducerMap:{tracking:F},sagas:[Ls]}}},48932:(e,n,t)=>{"use strict";t.d(n,{o:()=>l,F:()=>d});var i=t(30431),o=t(73400),s=t(8247),r=t(41906),a=t(47776),c=t(35844);function l(e){const n=(0,c.Xg)(e);if((0,s.X)(e,{slug:n}))return i.f.LiveChannel;const t=(0,a.i)(e);return(0,r.d)(e,{contentID:t})?i.f.OnDemandSeries:i.f.OnDemandEpisode}function d(e,{contentID:n}){const t=(0,r.Y)(e,{contentID:n});return t?t===o.dm.Series?i.f.OnDemandSeries:i.f.OnDemandEpisode:i.f.LiveChannel}},21193:(e,n,t)=>{"use strict";t.d(n,{E:()=>s});var i=t(22766),o=t(60595);function s(e){return(0,i.mT)(e)?o._0.livefullscreen:o._0.vodfullscreen}},84018:(e,n,t)=>{"use strict";function i(e,n){return e?e.substr(0,n):e}t.d(n,{k:()=>i})},79515:(e,n,t)=>{"use strict";function i(e){var n;return null===(n=e.tracking)||void 0===n?void 0:n.isKidsContent}function o(e){var n;return null===(null===(n=e.tracking)||void 0===n?void 0:n.isKidsContent)}function s(e){var n;return!1===(null===(n=e.tracking)||void 0===n?void 0:n.isKidsContent)}t.d(n,{E3:()=>i,uX:()=>o,EF:()=>s})},32802:(e,n,t)=>{"use strict";function i(e){var n;return(null===(n=e.tracking)||void 0===n?void 0:n.kochava.previous.contentID)||null}t.d(n,{H:()=>i})},99749:(e,n,t)=>{"use strict";function i(e){var n;return(null===(n=e.tracking)||void 0===n?void 0:n.kochava.previous.contentType)||null}t.d(n,{R:()=>i})},48626:(e,n,t)=>{"use strict";function i(e){var n;return(null===(n=e.tracking)||void 0===n?void 0:n.lastGARoutePath)||null}t.d(n,{z:()=>i})},33363:(e,n,t)=>{"use strict";function i(e,{type:n}){const t=s(e,{type:n});return null==t?void 0:t.screenID}function o(e,{type:n}){const t=s(e,{type:n});return null==t?void 0:t.screenElementID}function s(e,{type:n}){var t,i;return(null===(t=e.tracking)||void 0===t?void 0:t.partner)&&(null===(i=e.tracking)||void 0===i?void 0:i.partner[n])}t.d(n,{cZ:()=>i,Mm:()=>o,Ul:()=>s})},21439:(e,n,t)=>{"use strict";function i(e){var n;return null===(n=e.tracking)||void 0===n?void 0:n.phases.appLoaded}function o(e){var n;return null===(n=e.tracking)||void 0===n?void 0:n.phases.restartingSession}t.d(n,{h:()=>i,B:()=>o})},60595:(e,n,t)=>{"use strict";t.d(n,{_0:()=>y,yN:()=>f,Iw:()=>p,EZ:()=>v,Gn:()=>m});var i=t(52249),o=t(8010),s=t(3490),r=t(35844),a=t(66152),c=t(21193),l=t(35357),d=t(95968),u=t(3204),g=t(33363);let y;function p(e){const n=(0,s.X)(e);if(n){const t=(0,g.Ul)(e,{type:n});return null==t?void 0:t.screenID}}function m(e){return(0,a.lw)(e)?(0,c.E)(e):function(e){switch((0,d.D7)(e)){case l.SX.liveTV:case l.SX.liveTVChannel:case l.SX.viral:return y.livehome;case l.SX.onDemand:case l.SX.onDemandMovie:case l.SX.onDemandSeriesEpisode:return y.vodhome;case l.SX.liveTVChannelDetails:case l.SX.liveTVTimelineDetails:return y.livechanneldetails;case l.SX.onDemandMoviesDetails:return y.vodmoviedetails;case l.SX.onDemandSeriesDetails:case l.SX.onDemandSeriesSeasonsDetails:return y.vodseriesdetails;case l.SX.onDemandCategoryViewAll:case l.SX.onDemandChildCategoryViewAll:return y.vodcollection;case l.SX.search:case l.SX.searchLiveTVTimelineDetails:case l.SX.searchLiveTVChannelDetails:case l.SX.searchOnDemandSeriesEpisode:case l.SX.searchOnDemandMoviesDetails:case l.SX.searchOnDemandSeriesDetails:case l.SX.searchOnDemandSeriesSeasonsDetails:return y.searchresults;case l.SX.accountConfirmAccount:return f(e);case l.SX.accountManageAccount:return y.settings;case l.SX.accountSignIn:return y.signinpage;case l.SX.accountSignUp:return y.signuppage;case l.SX.accountForgotPassword:return y.forgotpassword;case l.SX.accountKidsModeEnter:return y.kidsmode;case l.SX.accountKidsModeExit:return y.exitkidsmode;case l.SX.activate:return y.webactivation;case l.SX.activateDevice:return(0,u.H0)(e)?y.webactivationcomplete:y.webactivation}}(e)}function v(e){return(0,r.GG)(e)?y.onboardingvidpage:m(e)}function f(e){return(0,i.Pt)(e)?(0,o.ic)(e)?y.deviceactivationconfirmsignout:y.deviceactivationconfirmacct:y.settings}!function(e){e.livehome="10001",e.vodhome="10002",e.settings="10003",e.livechanneldetails="10004",e.vodmoviedetails="10005",e.vodseriesdetails="10006",e.vodcollection="10008",e.livefullscreen="10009",e.vodfullscreen="10010",e.searchentry="10011",e.searchresults="10012",e.searchempty="10013",e.livecontentnow="10014",e.livecontentlater="10015",e.casting="10016",e.signlandingpage="10017",e.signuppage="10018",e.signinpage="10019",e.myplutoaccountpage="10020",e.onboardingvidpage="10021",e.privacypolicypage="10022",e.endcard="10023",e.forgotpassword="10028",e.kidsmode="10030",e.exitkidsmode="10031",e.webactivation="10039",e.webactivationcomplete="10040",e.deviceactivationconfirmacct="10041",e.deviceactivationconfirmsignout="10042",e.passwordresetlinksent="10046"}(y||(y={}))},17957:(e,n,t)=>{"use strict";t.d(n,{s:()=>d,A:()=>u});var i=t(17673),o=t(64687),s=t(90365),r=t(71376),a=t(84018);const c=(0,o.gV)("/app/src/modules/tracking/selectors/scrubbedReferrer.ts");function l(e){var n;const t=null===(n=e.tracking)||void 0===n?void 0:n.data.referrer;if(t&&"na"!==t)try{const e=new URL(t),{origin:n,pathname:o,search:a}=e,c=i.parse(a.substring(1)),l=(0,s.F)(c),d=(0,r.vE)(l);return`${n}${[o].concat(d||[]).join("?")}`}catch(e){c.error(e)}}function d(e){return(0,a.k)(l(e),250)||"na"}function u(e){return(0,a.k)(l(e),2048)}},57441:(e,n,t)=>{"use strict";t.d(n,{v:()=>i});const i=e=>{const n=parseInt(e,10);return isNaN(n)?null:n}},71599:(e,n,t)=>{"use strict";t.d(n,{J:()=>i,x:()=>o});const i=({featureType:e})=>e,o=({jsonExtensions:e})=>e},71949:(e,n,t)=>{"use strict";t.d(n,{O:()=>o});var i=t(20300);const o=[i.Uc,i.A0,i.wY,i.FX]},43800:(e,n,t)=>{"use strict";t.d(n,{$:()=>a,U:()=>c});var i=t(24970),o=t(91757),s=t(43575),r=t(79515);function*a(){let e=yield(0,i.Ys)(r.uX);for(;e;)yield(0,i.qn)((0,o.getType)(s.H)),e=yield(0,i.Ys)(r.uX)}function*c(){let e=yield(0,i.Ys)(r.E3);for(;!0===e||null===e;){const{payload:{isKidsContent:n}}=yield(0,i.qn)((0,o.getType)(s.H));e=n}}},78073:(e,n,t)=>{"use strict";t.d(n,{p:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/ACTIVATION_AUTHORIZE/REQUEST",e=>e],"@user_account/ACTIVATION_AUTHORIZE/SUCCESS",["@user_account/ACTIVATION_AUTHORIZE/FAILURE",e=>e])()},64116:(e,n,t)=>{"use strict";t.d(n,{C:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/CHANGE_PASSWORD/REQUEST",e=>e],"@user_account/CHANGE_PASSWORD/SUCCESS",["@user_account/CHANGE_PASSWORD/FAILURE",e=>e])()},59417:(e,n,t)=>{"use strict";t.d(n,{_:()=>i});const i=(0,t(91757).createAction)("@user_account/CLEAR_REDIRECT_ROUTE")()},44171:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/FORGOT_PASSWORD/REQUEST",e=>e],["@user_account/FORGOT_PASSWORD/SUCCESS",e=>e],["@user_account/FORGOT_PASSWORD/FAILURE",e=>e])()},23002:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/DELETE_PIN/REQUEST",e=>e],"@user_account/DELETE_PIN/SUCCESS",["@user_account/DELETE_PIN/FAILURE",e=>e])()},44764:(e,n,t)=>{"use strict";t.d(n,{j:()=>i});const i=(0,t(91757).createAction)("@user_account/KIDS_MODE_PIN_SET_FETCHED")()},65182:(e,n,t)=>{"use strict";t.d(n,{j:()=>i});const i=(0,t(91757).createAsyncAction)("@user_account/RESET_PIN/REQUEST","@user_account/RESET_PIN/SUCCESS",["@user_account/RESET_PIN/FAILURE",e=>e])()},71532:(e,n,t)=>{"use strict";t.d(n,{e:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/SET_PIN/REQUEST",e=>e],"@user_account/SET_PIN/SUCCESS",["@user_account/SET_PIN/FAILURE",e=>e])()},349:(e,n,t)=>{"use strict";t.d(n,{e:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/VERIFY_PIN/REQUEST",e=>e],"@user_account/VERIFY_PIN/SUCCESS",["@user_account/VERIFY_PIN/FAILURE",e=>e])()},3547:(e,n,t)=>{"use strict";t.d(n,{g:()=>i});const i=(0,t(91757).createAction)("@user_account/RESET_ERROR")()},79356:(e,n,t)=>{"use strict";t.d(n,{z:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/RESET_PASSWORD/REQUEST",e=>e],"@user_account/RESET_PASSWORD/SUCCESS",["@user_account/RESET_PASSWORD/FAILURE",e=>e])()},55165:(e,n,t)=>{"use strict";t.d(n,{K:()=>i});const i=(0,t(91757).createAction)("@user_account/RESET_REQUEST_STATE")()},73952:(e,n,t)=>{"use strict";t.d(n,{n:()=>i});const i=(0,t(91757).createAction)("@user_account/SET_KIDS_MODE_TOGGLE")()},34892:(e,n,t)=>{"use strict";t.d(n,{u:()=>i});const i=(0,t(91757).createAction)("@user_account/SET_MERGE_DATA_TOGGLE")()},51141:(e,n,t)=>{"use strict";t.d(n,{X:()=>i});const i=(0,t(91757).createAction)("@user_account/SET_REDIRECT_ROUTE")()},32413:(e,n,t)=>{"use strict";t.d(n,{c:()=>i});const i=(0,t(91757).createAction)("@user_account/SHOW_CONFIRM_LOGOUT_MESSAGE")()},60236:(e,n,t)=>{"use strict";t.d(n,{U:()=>i});const i=(0,t(91757).createAsyncAction)(["@user_account/UPDATE_EMAIL/REQUEST",e=>e],["@user_account/UPDATE_EMAIL/SUCCESS",e=>e],["@user_account/UPDATE_EMAIL/FAILURE",e=>e])()},48745:(e,n,t)=>{"use strict";t.d(n,{l:()=>St});var i=t(78073),o=t(64116),s=t(44171),r=t(53842),a=t(3547),c=t(79356),l=t(55165),d=t(32413),u=t(94950),g=t(93924),y=t(60236),p=t(18172);const m=(0,p.ZP)((e=>{e.activationAuthorizeRequestState="requesting",e.ui.errorMessage=null,e.ui.errorCode=null})),v=(0,p.ZP)((e=>{e.activationAuthorizeRequestState="success"})),f=(0,p.ZP)(((e,{payload:n})=>{e.activationAuthorizeRequestState="error",e.ui.errorMessage=n.message,e.ui.errorCode=n.errorCode})),D=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null})),E=(0,p.ZP)((e=>{e.requestState="success"})),I=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message})),h=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null})),S=(0,p.ZP)((e=>{e.requestState="success",e.data=null,e.kidsModePinSet=!1,e.kidsModeToggleOn=!0,e.mergeDataToggleOn=!0})),T=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message})),P=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null})),A=(0,p.ZP)((e=>{e.requestState="success"})),C=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message})),R=(0,p.ZP)((e=>{e.requestState="idle",e.setPinRequestState="idle"})),O=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null})),k=(0,p.ZP)(((e,{payload:{email:n}})=>{e.requestState="success",e.data.email=n})),b=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message}));var w=t(91757),M=t(59417),_=t(23002),q=t(44764),x=t(65182),z=t(71532),j=t(349),N=t(97120);const U=(0,w.createAction)("@user_account/RESTORE_KIDS_MODE_TOGGLE",(({parsedPersistentContent:e,userId:n}={parsedPersistentContent:{},userId:""})=>({parsedPersistentContent:e,userId:n})))();var V=t(73952),Y=t(34892),L=t(51141);const Z=(0,p.ZP)((e=>{e.redirectRoute.ID=null,e.redirectRoute.params={},e.redirectRoute.query={}})),F=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null})),$=(0,p.ZP)((e=>{e.requestState="success"})),K=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message})),Q=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null})),W=(0,p.ZP)((e=>{e.requestState="success",e.kidsModePinSet=!1})),X=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message})),H=(0,p.ZP)(((e,{payload:{kidsModePinSetFetched:n}})=>{e.kidsModePinSetFetched=n})),G=(0,p.ZP)((e=>{e.setPinRequestState="requesting",e.ui.errorMessage=null})),B=(0,p.ZP)((e=>{e.setPinRequestState="success",e.kidsModePinSet=!0})),J=(0,p.ZP)(((e,{payload:n})=>{e.setPinRequestState="error",e.ui.errorMessage=n.message})),ee=(0,p.ZP)((e=>{e.requestState="requesting",e.ui.errorMessage=null,e.ui.errorCode=null})),ne=(0,p.ZP)((e=>{e.requestState="success"})),te=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.ui.errorMessage=n.message,e.ui.errorCode=n.errorCode})),ie=(0,p.ZP)((e=>{e.ui.errorMessage=null,e.ui.errorCode=null})),oe=(0,p.ZP)((e=>{e.requestState="requesting",e.data=null,e.ui.errorMessage=null})),se=(0,p.ZP)(((e,{payload:{response:n}})=>{const t={email:n.email,id:n.id,name:n.name.givenName};e.requestState="success",e.data=t,e.kidsModePinSet=n.kidsModePinSet})),re=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.data=null,e.ui.errorMessage=n.message})),ae=(0,p.ZP)(((e,{payload:{parsedPersistentContent:n,userId:t}})=>{if(t&&n&&Object.keys(n).length>0){var i;const o=null!==(i=n[t])&&void 0!==i?i:De.kidsModeToggleOn;e.kidsModeToggleOn=o}})),ce=(0,p.ZP)(((e,{payload:{kidsModeToggleOn:n}})=>{e.kidsModeToggleOn=n})),le=(0,p.ZP)(((e,{payload:{mergeDataToggleOn:n}})=>{e.mergeDataToggleOn=n})),de=(0,p.ZP)(((e,{payload:n})=>{const{ID:t,params:i,query:o}=n.redirectRoute;e.redirectRoute.ID=t,e.redirectRoute.params=i,e.redirectRoute.query=o})),ue=(0,p.ZP)(((e,{payload:{message:n}})=>{e.ui.showConfirmLogoutMessage=n})),ge=(0,p.ZP)((e=>{e.requestState="requesting",e.data=null,e.ui.errorMessage=null})),ye=(0,p.ZP)(((e,{payload:{response:n}})=>{const t={email:n.email,id:n.id,name:n.name.givenName};e.requestState="success",e.data=t,e.kidsModePinSet=n.kidsModePinSet})),pe=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.data=null,e.ui.errorMessage=n.message})),me=(0,p.ZP)((e=>{e.requestState="requesting",e.data=null,e.ui.errorMessage=null})),ve=(0,p.ZP)(((e,{payload:{response:n}})=>{const t={email:n.email,id:n.id,name:n.name.givenName};e.requestState="success",e.data=t})),fe=(0,p.ZP)(((e,{payload:n})=>{e.requestState="error",e.data=null,e.ui.errorMessage=n.message})),De={data:null,requestState:"idle",setPinRequestState:"idle",activationAuthorizeRequestState:"idle",ui:{errorCode:null,errorMessage:null},kidsModePinSet:!1,kidsModePinSetFetched:!1,kidsModeToggleOn:!0,mergeDataToggleOn:!0,redirectRoute:{ID:null,params:{},query:{}}},Ee=(0,w.createReducer)(De).handleAction(u.s.request,ge).handleAction(u.s.success,ye).handleAction(u.s.failure,pe).handleAction(a.g,ie).handleAction(g.C.request,me).handleAction(g.C.success,ve).handleAction(g.C.failure,fe).handleAction(s.s.request,F).handleAction(s.s.success,$).handleAction(s.s.failure,K).handleAction(l.K,R).handleAction(o.C.request,D).handleAction(o.C.success,E).handleAction(o.C.failure,I).handleAction(y.U.request,O).handleAction(y.U.success,k).handleAction(y.U.failure,b).handleAction(c.z.request,P).handleAction(c.z.success,A).handleAction(c.z.failure,C).handleAction(d.c,ue).handleAction(r.i.request,h).handleAction(r.i.success,S).handleAction(r.i.failure,T).handleAction(N.M.request,oe).handleAction(N.M.success,se).handleAction(N.M.failure,re).handleAction(z.e.request,G).handleAction(z.e.success,B).handleAction(z.e.failure,J).handleAction(x.j.request,G).handleAction(x.j.success,B).handleAction(x.j.failure,J).handleAction(L.X,de).handleAction(M._,Z).handleAction(j.e.request,ee).handleAction(j.e.success,ne).handleAction(j.e.failure,te).handleAction(i.p.request,m).handleAction(i.p.success,v).handleAction(i.p.failure,f).handleAction(_.Q.request,Q).handleAction(_.Q.success,W).handleAction(_.Q.failure,X).handleAction(q.j,H).handleAction(V.n,ce).handleAction(U,ae).handleAction(Y.u,le);var Ie=t(24970),he=t(64687);const Se=(0,he.gV)("/app/src/modules/userAccount/sagas/activationAuthorize/worker.ts");function*Te({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");Se.log("requesting activation authorize API",e),yield(0,Ie.RE)([n,n.userAccountActivationAuthorize],e),yield(0,Ie.gz)(i.p.success())}catch(e){Se.log("activation authorize API ERROR",e),yield(0,Ie.gz)(i.p.failure({message:e.responseBody.message,errorCode:e.responseBody.errorCode}))}}function*Pe(){yield(0,Ie.Fm)((0,w.getType)(i.p.request),Te)}var Ae=t(77470),Ce=t(86885),Re=t(4777);const Oe=(0,he.gV)("/app/src/modules/userAccount/sagas/broadcastReceivedKidsModeToggle/worker.ts");function*ke(e){try{const n=yield(0,Ie.Ys)(Re.h),{userId:t,kidsModeToggle:i}=e;Oe.log("Broadcast received:",{userId:t,currentUserId:n,kidsModeToggle:i}),n===t&&(Oe.log("current user id equals message user id, set kidsmode toggle..."),yield(0,Ie.gz)((0,V.n)({kidsModeToggleOn:i})))}catch(e){Oe.error("Error handling received kids mode toggle broadcast message",e)}}const be=(0,he.gV)("/app/src/modules/userAccount/sagas/broadcastReceivedKidsModeToggle/watcher.ts");function*we(){be.log("create BroascastChannel listener channel");const e=yield(0,Ie.Ys)(Ae.y),n=yield(0,Ie.RE)(Ce.ML,e);try{be.log("registering listener");const e=yield(0,Ie.ib)(n,ke);yield(0,Ie.v_)(e)}finally{(yield(0,Ie.By)())&&(be.log("unregister listener"),n.close())}}function*Me({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([n,n.userAccountResetPassword],e),yield(0,Ie.gz)(c.z.success())}catch(e){yield(0,Ie.gz)(c.z.failure({message:e.responseBody.message}))}}function*_e(){yield(0,Ie.Fm)((0,w.getType)(c.z.request),Me)}var qe=t(70789),xe=t(35357);function*ze({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([n,n.userAccountChangePassword],e),yield(0,Ie.gz)(o.C.success()),yield(0,Ie.gz)((0,qe.Q)(xe.SX.accountManageAccount,{},{extra:{from:xe.Aj.passwordChanged}}))}catch(e){var n;yield(0,Ie.gz)(o.C.failure({message:null===(n=e.responseBody)||void 0===n?void 0:n.message}))}}function*je(){yield(0,Ie.Fm)((0,w.getType)(o.C.request),ze)}function Ne(e){return!!Ue(e)}function Ue(e){var n;return null===(n=e.userAccount)||void 0===n?void 0:n.redirectRoute.ID}function Ve(e){var n;return null===(n=e.userAccount)||void 0===n?void 0:n.redirectRoute.params}function Ye(e){var n;return null===(n=e.userAccount)||void 0===n?void 0:n.redirectRoute.query}const Le=(0,he.gV)("/app/src/modules/userAccount/sagas/clearRedirectRoute/worker.ts");function*Ze(e){const n=e.payload.routeID,t=[xe.SX.accountSignIn,xe.SX.accountSignUp].includes(n);(yield(0,Ie.Ys)(Ne))&&!t&&(Le.log("clearing redirect route from userAccount"),yield(0,Ie.gz)((0,M._)()))}function*Fe(){yield(0,Ie.Fm)((0,w.getType)(qe.Q),Ze)}function*$e({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService"),t=yield(0,Ie.RE)([n,n.userAccountForgotPassword],e);yield(0,Ie.gz)(s.s.success({response:t}))}catch(e){yield(0,Ie.gz)(s.s.failure({message:e.responseBody.message}))}}function*Ke(){yield(0,Ie.Fm)((0,w.getType)(s.s.request),$e)}function*Qe({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([n,n.userAccountKidsModeVerifyPin],e),yield(0,Ie.RE)([n,n.userAccountKidsModeDeletePin]),yield(0,Ie.gz)(_.Q.success())}catch(e){yield(0,Ie.gz)(_.Q.failure({message:e.responseBody.message}))}}function*We(){yield(0,Ie.Fm)((0,w.getType)(_.Q.request),Qe)}function*Xe(){try{const e=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([e,e.userAccountKidsModeResetPin]),yield(0,Ie.gz)(x.j.success())}catch(n){var e;yield(0,Ie.gz)(x.j.failure({message:null==n||null===(e=n.responseBody)||void 0===e?void 0:e.message}))}}function*He(){yield(0,Ie.Fm)((0,w.getType)(x.j.request),Xe)}function*Ge({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([n,n.userAccountKidsModeSetPin],e),yield(0,Ie.gz)(z.e.success())}catch(e){yield(0,Ie.gz)(z.e.failure({message:e.responseBody.message}))}}function*Be(){yield(0,Ie.Fm)((0,w.getType)(z.e.request),Ge)}const Je=(0,he.gV)("/app/src/modules/userAccount/sagas/kidsModeVerifyPin/worker.ts");function*en({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");Je.log("requesting verify exit kids mode pin",e),yield(0,Ie.RE)([n,n.userAccountKidsModeVerifyPin],e),yield(0,Ie.gz)(j.e.success())}catch(e){Je.log("verify exit kids mode pin ERROR",e),yield(0,Ie.gz)(j.e.failure({message:e.responseBody.message,errorCode:e.responseBody.errorCode}))}}function*nn(){try{Je.log("verify exit kids mode pin SUCCESS")}catch(e){}}function*tn(){yield(0,Ie.Fm)((0,w.getType)(j.e.request),en)}function*on(){yield(0,Ie.Fm)((0,w.getType)(j.e.success),nn)}var sn=t(29368),rn=t(50405),an=t(76862),cn=t(52249),ln=t(59394),dn=t(98502);const un=(0,he.gV)("/app/src/modules/userAccount/sagas/utils/navigatePreviousRoute.ts");function*gn(){const e=yield(0,Ie.Ys)(Ue),n=yield(0,Ie.Ys)(Ve),t=yield(0,Ie.Ys)(Ye);un.log("redirecting to previous route",[e,n]),yield(0,Ie.gz)((0,qe.Q)(e,n,{query:t,replace:!0}))}var yn=t(8897),pn=t(68527),mn=t(51612);function*vn(){try{const e=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([e,e.userAccountLogout]);const n=yield(0,Ie.fw)("cookies");yield(0,Ie.RE)([n,"removeItem"],"ptv_idt");const t=yield(0,Ie.Ys)(an.n);if(t){yield(0,Ie.gz)(mn.K9.request());const[e]=yield(0,Ie.S3)([(0,Ie.qn)((0,w.getType)(mn.K9.failure)),(0,Ie.qn)((0,w.getType)(mn.K9.success))]);if(e)throw new Error("enter default mode failed")}yield(0,Ie.RE)([e,e.setIDToken],null),yield(0,Ie.gz)(sn.R1.request({addIDToken:!1}));const[i]=yield(0,Ie.S3)([(0,Ie.qn)((0,w.getType)(sn.R1.failure)),(0,Ie.qn)((0,w.getType)(sn.R1.success))]);if(i)throw new Error("bootstrap refresh failed");yield(0,Ie.gz)(r.i.success());const o=[],s=t?dn.E.logoutAndDefaultMode:dn.E.logout;o.push(s),(yield(0,Ie.Ys)(cn.nq))&&o.push(dn.E.partnerWelcome),yield(0,Ie.gz)((0,rn.F)({notifications:o}));const a=yield(0,Ie.Ys)(Ne),c=yield(0,Ie.Ys)(cn.Fh),l=yield(0,Ie.Ys)(ln.Xc);a?yield(0,Ie.RE)(gn):c?yield(0,Ie.gz)((0,pn.D)()):l&&(yield(0,Ie.gz)((0,yn.u)()))}catch(n){var e;yield(0,Ie.gz)(r.i.failure({message:null===(e=n.responseBody)||void 0===e?void 0:e.message}))}}function*fn(){yield(0,Ie.Fm)((0,w.getType)(r.i.request),vn)}var Dn=t(25412),En=t(2877);const In=(0,he.gV)("/app/src/modules/userAccount/sagas/persistKidsModeToggle/worker.ts");function*hn(){const e=yield(0,Ie.Ys)(Dn.A),n=yield(0,Ie.Ys)(Re.h);let t={};try{const e=yield(0,Ie.RE)([localStorage,"getItem"],"ptv-useraccount-kidsmodetoggle");e&&(t=yield(0,Ie.RE)(En.yj,e))}catch(e){In.error(e)}n&&(t[n]=e);const i=yield(0,Ie.RE)(En.jP,t);In.log("persisting kids mode toggle"),yield(0,Ie.RE)([localStorage,"setItem"],"ptv-useraccount-kidsmodetoggle",i)}function*Sn(){yield(0,Ie.Fm)((0,w.getType)(V.n),hn)}var Tn=t(33759);const Pn=(0,he.gV)("/app/src/modules/userAccount/sagas/persistUserData/worker.ts");function*An({payload:{response:e}}){try{Pn.log("saving user data to cookie");const n=yield(0,Ie.fw)("cookies"),t=(0,Tn.v8)(new Date,e.refreshTokenExpiresInSec),i={idToken:e.idToken,refreshToken:e.refreshToken,expirationDate:t},o={maxAge:e.refreshTokenExpiresInSec},s=yield(0,Ie.RE)(En.jP,i);yield(0,Ie.RE)([n,"setItem"],"ptv_idt",s,o),Pn.log("set cookie success")}catch(e){Pn.error(e)}}function*Cn(){yield(0,Ie.Fm)([(0,w.getType)(N.M.success),(0,w.getType)(g.C.success),(0,w.getType)(u.s.success)],An)}const Rn=(0,w.createAsyncAction)(["@user_account/REFRESH_TOKEN/REQUEST",e=>e],["@user_account/REFRESH_TOKEN/SUCCESS",e=>e],["@user_account/REFRESH_TOKEN/FAILURE",e=>e])(),On=(0,he.gV)("/app/src/modules/userAccount/sagas/refreshToken/worker.ts");function*kn({payload:e}){try{On.log("API call to user refresh for user info/refresh token");const n=yield(0,Ie.fw)("plutoTVAPIService"),t=yield(0,Ie.RE)([n,n.userAccountRefreshToken],{refreshToken:e.refreshToken});yield(0,Ie.RE)([n,n.setIDToken],t.idToken),yield(0,Ie.gz)(Rn.success({response:t})),On.log("User /refresh call successful")}catch(e){var n,t;On.error(`User /refresh call failed. Error: ${null===(n=e.responseBody)||void 0===n?void 0:n.message}`),yield(0,Ie.gz)(Rn.failure({message:null===(t=e.responseBody)||void 0===t?void 0:t.message}))}}function*bn(){yield(0,Ie.Fm)((0,w.getType)(Rn.request),kn)}var wn=t(75203);const Mn=(0,he.gV)("/app/src/modules/userAccount/sagas/resetKidsModePinSetFetched/worker.ts");function*_n(){Mn.log("useraccount resetting kidsModePinSetFetched value"),yield(0,Ie.gz)((0,q.j)({kidsModePinSetFetched:!0})),Mn.log("waiting 15s before allowing kidsModePinSetFetched reset again"),yield(0,wn.A)(15e3),Mn.log("resuming listening for more kidsModePinSetFetched resets"),yield(0,Ie.gz)((0,q.j)({kidsModePinSetFetched:!1}))}function*qn(){yield(0,Ie.A7)([(0,w.getType)(N.M.success),(0,w.getType)(u.s.success)],_n)}const xn=(0,he.gV)("/app/src/modules/userAccount/sagas/resetKidsModeToggle/worker.ts");function*zn(){xn.log("reseting kids mode toggle"),yield(0,Ie.gz)((0,V.n)({kidsModeToggleOn:!0}))}function*jn(){yield(0,Ie.Fm)((0,w.getType)(_.Q.success),zn)}var Nn=t(79094);const Un=(0,he.gV)("/app/src/modules/userAccount/sagas/restoreAuthentication/failure/worker.ts");function*Vn({payload:e}){Un.error("useraccount Restore authentication failure",e.error?{error:e.error}:{}),(yield(0,Ie.Ys)(Nn.j))&&(yield(0,Ie.gz)(r.i.request()))}function*Yn(){yield(0,Ie.Fm)((0,w.getType)(N.M.failure),Vn)}var Ln=t(39629);const Zn=(0,he.gV)("/app/src/modules/userAccount/sagas/restoreAuthentication/request/worker.ts");function*Fn(){try{Zn.log("Checking for persistent login cookie");const e=yield(0,Ie.fw)("cookies"),n=yield(0,Ie.RE)([e,"getItem"],"ptv_idt");if("string"==typeof n){Zn.log("Cookie exists. Checking if refresh token is expired");const e=yield(0,Ie.RE)(En.yj,n);if((0,Ln.C)(e.expirationDate,new Date))Zn.log("Refresh token is expired. Exiting saga. User is unauthenticated"),yield(0,Ie.gz)(N.M.failure({}));else{Zn.log("Refresh token is valid. Logging user back in"),Zn.log("Calling user token refresh endpoint to get data/refresh token"),yield(0,Ie.gz)(Rn.request({refreshToken:e.refreshToken}));const[n,t]=yield(0,Ie.S3)([(0,Ie.qn)((0,w.getType)(Rn.success)),(0,Ie.qn)((0,w.getType)(Rn.failure))]);if(t)return Zn.log("User refresh API call failed. User is unauthenticated."),void(yield(0,Ie.gz)(N.M.failure({})));Zn.log("API call success. User info returned and new ID token saved");const i=n.payload.response;Zn.log("API call to bootstrap refresh for authenticated token"),yield(0,Ie.gz)(sn.R1.request({addIDToken:!0}));const[o]=yield(0,Ie.S3)([(0,Ie.qn)((0,w.getType)(sn.R1.failure)),(0,Ie.qn)((0,w.getType)(sn.R1.success))]);if(o)return Zn.log("Bootstrap API call failed. User is unauthenticated."),void(yield(0,Ie.gz)(N.M.failure({})));Zn.log("API call to bootstrap refresh success"),Zn.log("restoreAuthentication success. User is authenticated."),yield(0,Ie.gz)(N.M.success({response:i}))}}else Zn.log("Cookie does not exist. Exiting saga. User is unauthenticated"),yield(0,Ie.gz)(N.M.failure({}))}catch(e){yield(0,Ie.gz)(N.M.failure({error:e}))}}function*$n(){yield(0,Ie.Fm)((0,w.getType)(N.M.request),Fn)}const Kn=(0,he.gV)("/app/src/modules/userAccount/sagas/restoreKidsModeToggle/worker.ts");function*Qn(){try{const e=yield(0,Ie.RE)([localStorage,"getItem"],"ptv-useraccount-kidsmodetoggle");let n={};e&&(n=yield(0,Ie.RE)(En.yj,e));const t=yield(0,Ie.Ys)(Re.h);Kn.log("restoring kids mode toggle"),yield(0,Ie.gz)(U({parsedPersistentContent:n,userId:t}))}catch(e){Kn.error(e)}}function*Wn(){yield(0,Ie.Fm)([(0,w.getType)(N.M.success),(0,w.getType)(u.s.success)],Qn)}var Xn=t(84361),Hn=t(36150);const Gn=(0,he.gV)("/app/src/modules/userAccount/sagas/routeAuthentication/worker.ts");function*Bn(e){var n;const t=e.payload.routeID,i=null===(n=(yield(0,Ie.Ys)(Hn.l)).get(t))||void 0===n?void 0:n.authenticationRequired;if(i){Gn.log("authenticated route",i),yield(0,Ie.RE)(Xn.R);const{request:n}=yield(0,Ie.S3)({request:(0,Ie.qn)((0,w.getType)(N.M.request)),delay:(0,Ie.gw)(1)});n&&(yield(0,Ie.S3)([(0,Ie.qn)((0,w.getType)(N.M.success)),(0,Ie.qn)((0,w.getType)(N.M.failure))]));const o=yield(0,Ie.Ys)(Nn.j);if(Gn.log("user authenticated:",o),!o){const n={redirectRoute:{ID:t,params:e.payload.params,query:e.payload.query}};yield(0,Ie.gz)((0,pn.D)({},{replace:!0,extra:n}))}}}function*Jn(){yield(0,Ie.Fm)((0,w.getType)(qe.Q),Bn)}var et=t(96156),nt=t(272),tt=t(76604);function*it(){const e=yield(0,Ie.Ys)(Ne),n=yield(0,Ie.Ys)(cn.Pt);if(e)yield(0,Ie.RE)(gn);else if(n)yield(0,Ie.gz)((0,tt.N)({},{replace:!0}));else{const e=(yield(0,Ie.Ys)(cn.nq))?{partnerActivePopup:nt.a.success}:{};yield(0,Ie.gz)((0,yn.u)({},{replace:!0,extra:e}))}}function ot(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}const st=(0,he.gV)("/app/src/modules/userAccount/sagas/signIn/worker.ts");function*rt({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");st.log("requesting sign in authentication");const t=yield(0,Ie.RE)([n,n.userAccountSignIn],e);st.log("set id token",t.idToken),yield(0,Ie.RE)([n,n.setIDToken],t.idToken);const i=Date.now(),o=yield(0,Ie.Ys)(cn.S0);yield(0,Ie.gz)(sn._h.request(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ot(Object(t),!0).forEach((function(n){(0,et.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ot(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({lastEventTimeMS:i},!!o&&{entitlements:o}))),st.log("waiting bootstrap restart success"),yield(0,Ie.qn)((0,w.getType)(sn._h.success)),yield(0,Ie.gz)(u.s.success({response:t})),yield(0,Ie.RE)(it),(yield(0,Ie.Ys)(cn.nq))||(yield(0,Ie.gz)((0,rn.F)({notifications:[dn.E.signin]})))}catch(e){var n;yield(0,Ie.gz)(u.s.failure({message:null===(n=e.responseBody)||void 0===n?void 0:n.message}))}}function*at(){yield(0,Ie.Fm)((0,w.getType)(u.s.request),rt)}var ct=t(74341),lt=t(22531);function dt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function ut(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dt(Object(t),!0).forEach((function(n){(0,et.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const gt=(0,he.gV)("/app/src/modules/userAccount/sagas/signUp/worker.ts"),yt="coppa_underage";function*pt({payload:e}){try{const n=yield(0,Ie.fw)("cookies");if((()=>{const n=e.birthYear,t=(new Date).getFullYear();return parseInt(n,10)+13>=t})()){const e=(0,Tn.TR)(new Date,2);yield(0,Ie.RE)([n,"setItem"],yt,"1",{expires:e})}if(yield(0,Ie.RE)([n,"getItem"],yt))throw new lt.h({method:"validation",error:"coppa-underage",responseBody:{message:"Sorry, an error occurred."}});gt.log("requesting sign up authentication");const t=yield(0,Ie.fw)("plutoTVAPIService"),i=e=>new Date(parseInt(e,10),0,1).toISOString(),o=yield(0,Ie.Ys)(ct.Rr),s=ut({email:e.email,password:e.password,birthYear:i(e.birthYear),name:e.name},"string"==typeof o?{promoSource:o}:{}),r=yield(0,Ie.RE)([t,t.userAccountSignUp],s);gt.log("set id token",r.idToken),yield(0,Ie.RE)([t,t.setIDToken],r.idToken);const a=Date.now(),c=yield(0,Ie.Ys)(cn.S0);yield(0,Ie.gz)(sn._h.request(ut({lastEventTimeMS:a},!!c&&{entitlements:c}))),yield(0,Ie.qn)((0,w.getType)(sn._h.success)),yield(0,Ie.gz)(g.C.success({response:r})),yield(0,Ie.RE)(it)}catch(e){yield(0,Ie.gz)(g.C.failure({message:e.responseBody.message}))}}function*mt(){yield(0,Ie.Fm)((0,w.getType)(g.C.request),pt)}function*vt({payload:e}){try{const n=yield(0,Ie.fw)("plutoTVAPIService");yield(0,Ie.RE)([n,n.userAccountUpdateEmail],e),yield(0,Ie.gz)(y.U.success({email:e.email})),yield(0,Ie.gz)((0,qe.Q)(xe.SX.accountManageAccount,{},{extra:{from:xe.Aj.emailUpdated}}))}catch(e){var n;yield(0,Ie.gz)(y.U.failure({message:null===(n=e.responseBody)||void 0===n?void 0:n.message}))}}function*ft(){yield(0,Ie.Fm)((0,w.getType)(y.U.request),vt)}const Dt=(0,he.gV)("/app/src/modules/userAccount/sagas/userTokenRefreshTimer/worker.ts");function*Et({payload:{response:e}}){const n=e.idTokenExpiresInSec;let t;Dt.log(`useraccount getting id token expiration time: ${n} seconds`),t=n<=120?1e3*(n-10):1e3*(n-60);try{Dt.log(`useraccount setting refresh timeout: will wait ${t/1e3} seconds to refresh id token`),yield(0,wn.A)(t),Dt.log("useraccount id token is about to expire. Calling restore authentication "),(yield(0,Ie.Ys)(Nn.j))&&(yield(0,Ie.gz)(N.M.request()))}catch(e){Dt.log("id token refresh failed"),Dt.error(e)}}function*It(){yield(0,Ie.Fm)([(0,w.getType)(N.M.success),(0,w.getType)(g.C.success),(0,w.getType)(u.s.success)],Et)}function*ht(){yield(0,Ie.rM)(Jn),yield(0,Ie.rM)(Cn),yield(0,Ie.rM)($n),yield(0,Ie.rM)(at),yield(0,Ie.rM)(mt),yield(0,Ie.rM)(Ke),yield(0,Ie.rM)(je),yield(0,Ie.rM)(ft),yield(0,Ie.rM)(_e),yield(0,Ie.rM)(fn),yield(0,Ie.rM)(It),yield(0,Ie.rM)(bn),yield(0,Ie.rM)(Yn),yield(0,Ie.rM)(Be),yield(0,Ie.rM)(He),yield(0,Ie.rM)(Fe),yield(0,Ie.rM)(tn),yield(0,Ie.rM)(on),yield(0,Ie.rM)(We),yield(0,Ie.rM)(qn),yield(0,Ie.rM)(Sn),yield(0,Ie.rM)(Wn),yield(0,Ie.rM)(Pe),yield(0,Ie.rM)(jn),yield(0,Ie.rM)(we)}function St(){return{id:"userAccount",reducerMap:{userAccount:Ee},sagas:[ht]}}},98502:(e,n,t)=>{"use strict";let i;t.d(n,{E:()=>i}),function(e){e.signin="signin",e.signup="signup",e.logout="logout",e.logoutAndDefaultMode="logoutAndDefaultMode",e.kidsMode="kidsMode",e.defaultMode="defaultMode",e.partnerWelcome="partnerWelcome"}(i||(i={}))},78477:(e,n,t)=>{"use strict";function i(e){var n;const{showConfirmLogoutMessage:t}=null===(n=e.userAccount)||void 0===n?void 0:n.ui;return{showConfirmLogoutMessage:t}}t.d(n,{E:()=>i})},5538:(e,n,t)=>{"use strict";function i(e){var n;return(null===(n=e.userAccount)||void 0===n?void 0:n.ui.errorMessage)||null}function o(e){var n;return(null===(n=e.userAccount)||void 0===n?void 0:n.ui.errorCode)||null}t.d(n,{E:()=>i,$:()=>o})},79094:(e,n,t)=>{"use strict";function i(e){var n,t,i,o;return"undefined"!=typeof window&&window.dataDogLog&&null!==(n=e.userAccount)&&void 0!==n&&n.data&&(window.dataDogLog.userEmail=(null===(i=e.userAccount)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.email)||null),!(null===(t=e.userAccount)||void 0===t||!t.data)||!1}t.d(n,{j:()=>i})},43846:(e,n,t)=>{"use strict";function i(e){var n;return!(null===(n=e.userAccount)||void 0===n||!n.kidsModePinSet)||!1}t.d(n,{v:()=>i})},68726:(e,n,t)=>{"use strict";function i(e){var n;return!(null===(n=e.userAccount)||void 0===n||!n.kidsModePinSetFetched)}t.d(n,{p:()=>i})},25412:(e,n,t)=>{"use strict";function i(e){var n;return!(null===(n=e.userAccount)||void 0===n||!n.kidsModeToggleOn)}t.d(n,{A:()=>i})},87290:(e,n,t)=>{"use strict";function i(e){var n;return!(null===(n=e.userAccount)||void 0===n||!n.mergeDataToggleOn)}t.d(n,{T:()=>i})},3204:(e,n,t)=>{"use strict";function i(e){var n;return"requesting"===(null===(n=e.userAccount)||void 0===n?void 0:n.requestState)}function o(e){var n;return"success"===(null===(n=e.userAccount)||void 0===n?void 0:n.requestState)}function s(e){var n;return"success"===(null===(n=e.userAccount)||void 0===n?void 0:n.activationAuthorizeRequestState)}function r(e){var n;return"error"===(null===(n=e.userAccount)||void 0===n?void 0:n.activationAuthorizeRequestState)}function a(e){var n;return"success"===(null===(n=e.userAccount)||void 0===n?void 0:n.setPinRequestState)}function c(e){var n;return"error"===(null===(n=e.userAccount)||void 0===n?void 0:n.setPinRequestState)}t.d(n,{Tw:()=>i,rA:()=>o,H0:()=>s,lr:()=>r,pB:()=>a,tl:()=>c})},80558:(e,n,t)=>{"use strict";function i(e){var n;return"requesting"===(null===(n=e.userAccount)||void 0===n?void 0:n.setPinRequestState)}function o(e){var n;return"success"===(null===(n=e.userAccount)||void 0===n?void 0:n.setPinRequestState)}t.d(n,{M:()=>i,T:()=>o})},77470:(e,n,t)=>{"use strict";t.d(n,{y:()=>o});var i=t(58394);function o(){return i.$.getInstance("kidsModeToggle")}},11598:(e,n,t)=>{"use strict";function i(e){var n,t;return(null===(n=e.userAccount)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.email)||null}t.d(n,{T:()=>i})},4777:(e,n,t)=>{"use strict";function i(e){var n,t;return(null===(n=e.userAccount)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.id)||null}t.d(n,{h:()=>i})},7227:(e,n,t)=>{"use strict";function i(e){var n,t;return(null===(n=e.userAccount)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.name)||null}t.d(n,{p:()=>i})}}]);